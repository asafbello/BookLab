!function e(t,r,o){function n(a,i){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r?r:e)},d,d.exports,e,t,r,o)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ShelvedBookOrigin={BROWSE_SPOTLIGHT:"browse_spotlight",RECS_WIDGET:"recs_widget"}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.URLTrackingParams={FROM_SEARCH_PARAM:"from_search=true",BOOK_SHOW_INTERACTION_PARAM:"ac=1",DISCUSSIONS_PANE_ALL_DISCUSSIONS:"nav_bar_discussions_pane_all_discussions",DISCUSSIONS_PANE_GROUP:"nav_bar_discussions_pane_group",DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS:"nav_bar_discussions_pane_group_all_unread_posts",DISCUSSIONS_PANE_DISCUSSION:"nav_bar_discussions_pane_discussion",DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES:"nav_bar_discussions_sparse_reading_challenge",DISCUSSIONS_PANE_SPARSE_ALL:"nav_bar_discussions_sparse_all",DISCUSSIONS_PANE_SPARSE_POPULAR:"nav_bar_discussions_sparse_popular"}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TRACKED_CLASSES={book_image:{dfp:!0,pmet:{click_type:"book_image"}},book_title:{dfp:!0,pmet:{click_type:"book_title"}},author_link:{dfp:!0,pmet:{click_type:"author_name"}},full_content_link:{dfp:!0,pmet:{click_type:"body_click"}},user_profile:{dfp:!0,pmet:{click_type:"social"}},want_to_read_button:{dfp:!0,pmet:{click_type:"wtr_button"}},sponsored_update_body_image:{dfp:!0,pmet:{click_type:"image"}},cta_link:{dfp:!0,pmet:{click_type:"cta_click"}},sponsored_footer_actions:{dfp:!0,pmet:{click_type:"sponsored"}},newsfeed_caret_not_interested:{dfp:!1,pmet:{click_type:"not_interested"}},newsfeed_caret_help:{dfp:!1,pmet:{click_type:"why"}},newsfeed_caret:{dfp:!1,pmet:{click_type:"caret"}},user_rating_star:{dfp:!0,pmet:{click_type:"rating"}},preview_book:{dfp:!0,pmet:{click_type:"preview"}},sponsored_update_body_title_link:{dfp:!0,pmet:{click_type:"sponsored_title"}}},r.TRACKED_CLASSES_AUDIBLE={AEP_Desktop_Browse_Image:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Image"}},AEP_Desktop_Browse_Title:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Title"}},AEP_Desktop_Browse_ExploreButton:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_ExploreButton"}},AEP_Desktop_Browse_SponsoredBy:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_SponsoredBy"}},AEP_Desktop_Video_ExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Video_ExternalLink",no_redirect:!0}},AEP_Desktop_Sponsored_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookImage",no_redirect:!0}},AEP_Desktop_Sponsored_BookTitle:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookTitle",no_redirect:!0}},AEP_Desktop_Sponsored_AuthorLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_AuthorLink",no_redirect:!0}},AEP_Desktop_Sponsored_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_WantToRead",no_redirect:!0}},AEP_Desktop_Sponsored_Stars:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_Stars",no_redirect:!0}},AEP_Desktop_Sponsored_BookDescription:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookDescription",no_redirect:!0}},AEP_Desktop_Sponsored_BookExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookExternalLink",no_redirect:!0}},AEP_Desktop_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_BookImage",no_redirect:!0}},AEP_Desktop_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookImage",no_redirect:!0}},AEP_Mobile_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookTitle:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookTitle",no_redirect:!0}},AEP_Mobile_Carousel_Author:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_Author",no_redirect:!0}}}},{}],4:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){c(e,t),u["default"].hasRequestedCreativeForSlot(e)})}function s(e,t,r){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var o=window.googletag,n=o.defineSlot(t,d[r],e);n.addService(o.pubads())})}function a(){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var e=window.googletag;e.enableServices()})}Object.defineProperty(r,"__esModule",{value:!0}),r.requestCreativeForAdSlot=n,r.defineSlot=s,r.enableServices=a;var i=e("../../react_stores/google_ads_store"),l=e("../../react_actions/google_ads_actions"),u=o(l),d={"300x250":[300,250],"970x66":[970,66],"160x600":[160,600],"300x140":[300,140],"728x90":[728,90],"625x210":[625,210],"640x480":[640,480],"300x225":[300,225],"300x175":[300,175],"320x50":[320,50],"400x300":[400,300]},c=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=window.googletag;r.pubads().addEventListener("slotRenderEnded",function(r){if(r.slot.getSlotId().getDomId()==e)if(r.isEmpty)u["default"].removeAdSlot(e),u["default"].trackImpression(e,i.ImpressionCode.empty);else{u["default"].displayCreativeForSlot(e);var o=$j(t.googleHookSelector).find('iframe[id^="google_ads_iframe_"]'),n=o.contents().find(t.creativeSelector),s=r.slot.getName().split("/",3)[2];if(t.isNativeAd){var a=n.data("id"),l=n.data("url");a&&l?u["default"].attachServedNativeAdAttributesAndTracking(e,r.lineItemId,n,a,i.ImpressionCode.success,n.data("url"),s):u["default"].trackImpression(e,i.ImpressionCode.dfpError)}else t.pollRequest?!function(){var a={id:n.data("id"),line_item_id:r.lineItemId,ad_unit:s,ad_device_type:t.deviceType},i=o.closest("td");$j.each(["offset","index"],function(e,t){a[t]=i.attr(t)}),u["default"].populateHomepagePollAndTracking(e,r.lineItemId,n,a)}():u["default"].attachServedBannerAdAttributesAndTracking(e,r.lineItemId,n,i.ImpressionCode.success,t.delayImpressionTracking);"160x600"===t.dimensions&&$j(".mainContentContainer").addClass("adSkinEnabled")}}),r.display(e)}},{"../../react_actions/google_ads_actions":38,"../../react_stores/google_ads_store":221}],5:[function(e,t,r){"use strict";function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,l.merge)({},t,{type:t.method}),t=(0,l.omit)(t,"method");var r=$j.Deferred(),o=$j.ajax(e,t);return o.done(r.resolve),o.fail(function(e,t,o){(0,i.redirectOnAuthFailure)(e)||r.reject(e,t,o)}),r.promise()}function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(e,(0,l.merge)({},t,{method:"POST"}))}function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(e,(0,l.merge)({},t,{method:"DELETE"}))}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(e,(0,l.merge)({},t,{method:"GET"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.httpRequest=o,r.httpPost=n,r.httpDelete=s,r.httpGet=a;var i=e("./default_auth_failure_handler"),l=e("lodash")},{"./default_auth_failure_handler":6,lodash:"lodash"}],6:[function(e,t,r){"use strict";function o(e){if(e&&403===e.status){var t=e.responseJSON;if(t.redirect)return(0,n.setLocationUrl)(t.redirect),!0}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.redirectOnAuthFailure=o;var n=e("../env_utils")},{"../env_utils":19}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BOOK_ORIGINS={CURRENTLY_READING_WIDGET:"currently-reading-widget",UPDATE_READING_PROGRESS:"hp_status_editor"}},{}],8:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("append-query"),s=o(n);r["default"]={openSocialShareWindow:function(e,t,r){var o=(0,s["default"])(e,t),n="left="+r.left+", top="+r.top,a="width="+r.width+", height="+r.height,i=n+", "+a+", menubar=no, scrollbar=no";window.open(o,"_blank",i)}}},{"append-query":"append-query"}],9:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=e.target,r=e.currentTarget,o=!1;if(t===r)o=i(t);else for(;r.contains(t)&&!(o=i(t));)t=t.parentNode;o&&a["default"].trackClickEvent(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.handleDataTracking=n;var s=e("../../react_actions/data_tracking/data_tracking_actions"),a=o(s),i=function(e){return"true"===e.getAttribute("data-tracking-enabletracking")}},{"../../react_actions/data_tracking/data_tracking_actions":31}],10:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=arguments.length<=1||void 0===arguments[1]?(0,u["default"])():arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];t.locale("en-abbreviated"),e=null!==r?r:(0,u["default"])(e).locale("en-abbreviated");var o=t.diff(e,"days"),n=t.diff(e,"months"),s=t.diff(e,"days",!0),a=6.5;return i["default"].inRange(n,1,13)?t.subtract(o,"days").format("DD MMM"):n>12?t.subtract(o,"days").format("DD MMM YY"):i["default"].inRange(o,7,28)?Math.ceil(o/7)+"w":s>=a&&28>=s?Math.round(s/a)+"w":e.fromNow()}function s(e){var t=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD":arguments[1];if(e){var r=(0,u["default"])(e);return r.format(t)}return""}Object.defineProperty(r,"__esModule",{value:!0}),r.fromNow=n,r.getFormattedDate=s;var a=e("lodash"),i=o(a),l=e("moment"),u=o(l);u["default"].relativeTimeThreshold("s",60),u["default"].relativeTimeThreshold("m",60),u["default"].relativeTimeThreshold("h",24),u["default"].relativeTimeThreshold("d",25),u["default"].relativeTimeThreshold("M",10),u["default"].locale("en-abbreviated",{relativeTime:{future:"in %s",past:"%s",s:"Just now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),u["default"].locale("en")},{lodash:"lodash",moment:"moment"}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.LAYOUT_SIZE={WIDE:"wide",NARROW:"narrow"}},{}],12:[function(e,t,r){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}Object.defineProperty(r,"__esModule",{value:!0}),r.groupDeals=r.createMatcher=void 0;var s=e("lodash"),a=function(e){return(0,s.isArray)(e)||(e=[e]),e},i=r.createMatcher=function(e){var t=e.matcher,r=e.headline;if(!t)return function(e){return(0,s.includes)(e.genres,r)};var o=function(){var e=(0,s.keys)(t)[0],r=t[e];if(!(0,s.isArray)(r))return{v:function(t){return t[e]===r}};var o=function(){var t=r;return{v:{v:function(r){return(0,s.some)(a(r[e]),function(e){return(0,s.includes)(t,e)})}}}}();return"object"===("undefined"==typeof o?"undefined":n(o))?o.v:void 0}();return"object"===("undefined"==typeof o?"undefined":n(o))?o.v:void 0},l=function(e){var t=e.map(function(e){var t=i(e);return Object.assign({},e,{matcher:t})});return t},u=function(e,t){return t.map(function(t,r){return t.hideWhenEmpty&&(0,s.isEmpty)(e[r])?Object.assign({},t,{visible:!1}):Object.assign({},t,{visible:!0})})};r.groupDeals=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=r.selectedCategory;t=l(t);var a=t.map(function(t){if(n&&n.headline!==t.headline)return[];var r=e.filter(t.matcher);return s.pull.apply(void 0,[e].concat(o(r))),r});return t=u(a,t),{lists:a,categories:t}}},{lodash:"lodash"}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRelatedDeals=r.filterLists=r.filterRetailerLinks=void 0;var o=e("lodash"),n=r.filterRetailerLinks=function(e,t){if((0,o.isEmpty)(t))return e;var r=[e.preferred].concat(e.additional),n=r.filter(function(e){return(0,o.includes)(t,e.id)});return 0==n.length?{preferred:e.preferred,additional:[]}:1===n.length?{preferred:n[0],additional:[]}:{preferred:n[0],additional:n.slice(1)}},s=function(e,t){var r=t.preferredRetailers;return Object.assign({},e,{retailerLinks:n(e.retailerLinks,r)})};r.filterLists=function(e,t){var r=t.preferredRetailers,o=void 0===r?null:r;return e.map(function(e){return e.map(function(e){return s(e,{preferredRetailers:o})})})},r.getRelatedDeals=function(e,t){return(0,o.filter)(t,function(t){return e.uri!==t.uri&&!(0,o.isEmpty)((0,o.intersection)(e.genres,t.genres))})}},{lodash:"lodash"}],14:[function(e,t,r){"use strict";function o(e){var t=e.tagsByDealUri,r=void 0===t?{}:t,o=e.featuredCategory,u=e.tagWeights,d=e.preferredRetailers,c=e.socialInfoByDealUri,f=e.selectedCategory,p=(0,n.tagDeals)(e.deals,r),h=(0,s.addSocialDataToDeals)(p,c),m=(0,a.groupDeals)(h,e.categories,{featuredCategory:o,selectedCategory:f}),g=m.lists,_=m.categories,v=(0,l.sortDealsWithinLists)(g,_,{tagWeights:u}),y=(0,i.filterLists)(v,{preferredRetailers:d});return Object.assign({},e,{deals:y,categories:_})}Object.defineProperty(r,"__esModule",{value:!0}),r.prepareProps=o;var n=e("./tagger"),s=e("./social_signals"),a=e("./categories"),i=e("./filters"),l=e("./sorter")},{"./categories":12,"./filters":13,"./social_signals":15,"./sorter":16,"./tagger":17}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.addSocialDataToDeals=function(e,t){return t?[].concat(e).map(function(e){return Object.assign({},e,{social:t[e.uri]})}):e}},{}],16:[function(e,t,r){"use strict";var o=function(){function e(e,t){var r=[],o=!0,n=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(l){n=!0,s=l}finally{try{!o&&i["return"]&&i["return"]()}finally{if(n)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0}),r.sortDealsWithinLists=void 0;var n=e("lodash"),s=function(e,t){return t?(0,n.keys)(t).reduce(function(r,o){return(0,n.includes)(e.tags,o)?r+t[o]:r},0):0},a=function(e,t){return[].concat(e).sort(function(e,r){return t.indexOf(r.uri)-t.indexOf(e.uri)}).reverse()},i=function(e,t){return[].concat(e).sort(function(e,r){var o={a:s(e,t),b:s(r,t)};return o.a===o.b?e.book.ratingsCount-r.book.ratingsCount:o.a-o.b}).reverse()};r.sortDealsWithinLists=function(e,t,r){var s=r.tagWeights;return(0,n.zip)(e,t).map(function(e){var t=o(e,2),r=t[0],n=t[1],l=n.orderedDealUris;return l?a(r,l):i(r,s)})}},{lodash:"lodash"}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.tagDeals=function(e,t){return[].concat(e).map(function(e){var r=t[e.uri]||[],o=e.tags||[];return Object.assign({},e,{tags:r.concat(o)})})}},{}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.DEFAULT_SHELVES={READ:{name:"read",displayName:"Read"},CURRENTLY_READING:{name:"currently-reading",displayName:"Currently Reading"},WANT_TO_READ:{name:"to-read",displayName:"Want to Read"}}},{}],19:[function(e,t,r){"use strict";t.exports={PRODUCTION:"production",DEVELOPMENT:"development",TEST:"test",hasDom:function(){return!!window.document},domUnavailable:function(){return!this.hasDom()},isDevelopment:function(){return"production"===this.DEVELOPMENT},getCurrentPath:function(){return window?window.encodeURIComponent(window.location.pathname+window.location.search):void 0},setLocationUrl:function(e){window&&(window.location.href=e)},getLocationUrl:function(){return window&&window.location?window.location.href:void 0}}},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=r.clearFlashMessage=function(){$j("#flashMessages").trigger("clearFlashError")};r.flashSuccessMessage=function(e){o(),$j("#flashMessages").trigger("addFlashMessage",[e,"notice"])},r.flashErrorMessage=function(e){$j("#flashMessages").trigger("addFlashMessage",[e,"error"])}},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash");r["default"]={notifyException:function(e,t){e?window.console&&(0,o.isFunction)(window.console.error)&&window.console.error(t,e.stack):window.console&&(0,o.isFunction)(window.console.warn)&&window.console.warn("Attempted to notifyException without providing error,\n                           message: "+t)},notifyUser:function(e){window&&(0,o.isFunction)(window.alert)&&window.alert(e)}}},{lodash:"lodash"}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={enter:13,escape:27,space:32,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};r["default"]={isEnter:function(e){return e===o.enter},isEscape:function(e){return e===o.escape},isSpace:function(e){return e===o.space},isArrowLeft:function(e){return e===o.leftArrow},isArrowUp:function(e){return e===o.upArrow},isArrowRight:function(e){return e===o.rightArrow},isArrowDown:function(e){return e===o.downArrow},isDropdownOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)||this.isArrowDown(e)},isDefaultOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)},isDefaultCloserKey:function(e){return this.isEscape(e)},KEYCODES:o}},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.LAYOUT_SIZE={WIDE:"wide",NARROW:"narrow"},r.BOOK_LOAD_ERROR_MSG="Sorry, we’re having trouble loading your books right now. Please try again later."},{}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ICON_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"},r.ICON_SHAPES={CIRCLE:"circular",ROUND_SQUARE:"roundSquare"}},{}],25:[function(e,t,r){"use strict";function o(){return window.GrImageRegistry||{}}Object.defineProperty(r,"__esModule",{value:!0}),r.getImages=o},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.astralLength=function(e){return e.replace(/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"_").length},r.countWords=function(e){return e?e.split(" ").length:0}},{}],27:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s);r["default"]={toSentence:function(e){var t=arguments.length<=1||void 0===arguments[1]?"and":arguments[1],r=[],o=e.length;switch(o){case 0:return"";case 1:r.push(e[0]);break;case 2:r.push(e[0]),r.push(" "+t+" "),r.push(e[1]);break;default:a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(", ")}),r.push(t+" "),r.push(e[o-1])}return n("span",{},void 0,r)},sentenceJoin:function(e){var t=arguments.length<=1||void 0===arguments[1]?", ":arguments[1],r=[];return a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(t)}),r.push(e[e.length-1]),n("span",{},void 0,r)}}},{lodash:"lodash"}],28:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return s["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var n=e("reflux"),s=o(n)},{reflux:"reflux"}],29:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({addNewComment:{},commentEntered:{sync:!0},deleteComment:{},showCommentsForPage:{},showSeeMoreLoadingSpinner:{},textareaFocused:{},textareaFocusRequested:{},textareaUnfocused:{}})},{reflux:"reflux"}],30:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["updatePreference"])},{reflux:"reflux"}],31:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["trackClickEvent"])},{reflux:"reflux"}],32:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["openPane"])},{reflux:"reflux"}],33:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return s["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var n=e("reflux"),s=o(n)},{reflux:"reflux"}],34:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["enablePublishPermission","togglePublishPermission"])},{reflux:"reflux"}],35:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["changeFavoriteGenres"])},{reflux:"reflux"}],36:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["selectFavoriteGenre","deselectFavoriteGenre","submitSelectedGenres"])},{reflux:"reflux"}],37:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["displayError","requestFeaturedBooks"])},{reflux:"reflux"}],38:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["hasRequestedCreativeForSlot","displayCreativeForSlot","removeAdSlot","trackImpression","attachServedNativeAdAttributesAndTracking","attachServedBannerAdAttributesAndTracking","populateHomepagePollAndTracking","pollAnswerChanged"])},{reflux:"reflux"}],39:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["like","unLike"])},{reflux:"reflux"}],40:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["openModal","closeModal"])},{reflux:"reflux"}],41:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({loadMoreUpdates:{},newsfeedItemsLoaded:{sync:!0},updateNativeAdSlot:{},userNotInterested:{},undoUserNotInterested:{},hideStory:{},previewBook:{},setUpdatesFeedPreferences:{}})},{reflux:"reflux"}],42:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["loadError","loadNotifications","requestNotifications"])},{reflux:"reflux"}],43:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["loadAnnotatedBooks"])},{reflux:"reflux"}],44:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["updateProgress","closeUpdateProgressForm","openUpdateProgressForm","refreshReadingSessions","shelveBookSuccess","loadAllReadingSessions"])},{reflux:"reflux"}],45:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({updateSharingTextInputValue:{sync:!0},submitShare:{},openShareModal:{}})},{reflux:"reflux"}],46:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions({addShelvings:{},bookShelved:{},bookUnshelved:{},shelveBook:{},toggleNonExclusiveShelving:{},rateBook:{children:["newBook","failed"]},unshelveBook:{}})},{reflux:"reflux"}],47:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["selectTab"])},{reflux:"reflux"}],48:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return function(t){t({type:"NOTIFICATIONS_PUSH_TO_KINDLE_SAVING"}),(0,p.httpPost)("/user/update",{data:{format:"json",category:"index",notif_prefs:{push:{kindle:e}}},dataType:"JSON"}).done(function(){t({type:"NOTIIFICATIONS_PUSH_TO_KINDLE_CHANGED",value:e})}).fail(function(){t({type:"NOTIFICATIONS_PUSH_TO_KINDLE_SAVE_FAILED"}),(0,h.flashErrorMessage)("Sorry, we weren’t able to update your notifications setting. Please try again later, or contact us if the problem persists.")})}}function s(e,t){return function(r){r({type:"FB_PREF_SAVING",settingObj:e}),(0,p.httpPost)("/user/update_fb_cog_prefs",{data:{format:"json",setting:{name:e.name,value:t}},dataType:"JSON"}).done(function(){r({type:"FB_PREF_CHANGED",settingObj:e,newValue:t})}).fail(function(){r({type:"FB_PREF_SAVE_FAILED",settingObj:e}),(0,h.flashErrorMessage)("Sorry, we weren’t able to update your notifications setting. Please try again later, or contact us if the problem persists.")})}}function a(e,t){return function(r){r({type:"TWITTER_PREF_SAVING",settingObj:e}),(0,p.httpPost)("/user/update_twitter_prefs",{data:{format:"json",setting:{name:e.name,value:t}},dataType:"JSON"}).done(function(){r({type:"TWITTER_PREF_CHANGED",settingObj:e,newValue:t})}).fail(function(){r({type:"TWITTER_PREF_SAVE_FAILED",settingObj:e}),(0,h.flashErrorMessage)("Sorry, we weren’t able to update your notifications setting. Please try again later, or contact us if the problem persists.")})}}function i(){return function(e){e({type:"ACCOUNTS_AMAZON_UNLINK_REQUESTED"}),(0,p.httpDelete)("/amazon/login/destroy").done(function(){e({type:"ACCOUNTS_AMAZON_UNLINKED"}),(0,h.flashSuccessMessage)("Amazon account unlinked")}).fail(function(){e({type:"ACCOUNTS_AMAZON_UNLINK_FAILED"}),(0,h.flashErrorMessage)("Sorry, we weren’t able to unlink your Amazon account. Please try again later, or contact us if the problem persists.")})}}function l(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return function(t){t({type:"ACCOUNTS_FACEBOOK_UNLINK_REQUESTED"}),(0,p.httpDelete)("/facebook_users/destroy",{data:{deauth:!0}}).done(function(){t({type:"ACCOUNTS_FACEBOOK_UNLINKED"}),(0,h.flashSuccessMessage)("Facebook account unlinked")}).fail(function(){t({type:"ACCOUNTS_FACEBOOK_UNLINK_FAILED"}),e||(0,h.flashErrorMessage)("Sorry, we weren’t able to unlink your Facebook account. Please try again later, or contact us if the problem persists.")})}}function u(e){return function(t){$grfb&&$grfb.init.done(function(){"connected"!==$grfb.auth.status||e.name?"not_authorized"===$grfb.auth.status&&l(!0)(t):$grfb.getUserData().done(function(e){t({type:"ACCOUNTS_FACEBOOK_DATA_LOADED",userData:e})})})}}function d(){return function(e){e({type:"ACCOUNTS_TWITTER_UNLINK_REQUESTED"}),(0,p.httpDelete)("/twitter_users/destroy",{data:{format:"json"}}).done(function(){e({type:"ACCOUNTS_TWITTER_UNLINKED"}),(0,h.flashSuccessMessage)("Twitter account unlinked")}).fail(function(){e({type:"ACCOUNTS_TWITTER_UNLINK_FAILED"}),(0,h.flashErrorMessage)("Sorry, we weren’t able to unlink your Twitter account. Please try again later, or contact us if the problem persists.")})}}Object.defineProperty(r,"__esModule",{value:!0}),r.changeNotificationsPushToKindle=n,r.changeFBPref=s,r.changeTwitterPref=a,r.unlinkAmazonAccount=i,r.unlinkFacebookAccount=l,r.initFB=u,r.unlinkTwitterAccount=d;var c=e("reflux"),f=o(c),p=e("../../../modules/ajax/ajax_helper"),h=e("../../../modules/flash_message_helper");r["default"]=f["default"].createActions(["updatePreferences"])},{"../../../modules/ajax/ajax_helper":5,"../../../modules/flash_message_helper":20,reflux:"reflux"}],49:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["userAgentGainsTouch","userAgentLosesTouch"])},{reflux:"reflux"}],50:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["userNotInterested","undoUserNotInterested","isFlashMessageForBook","closeFlashMessage","addBookIDToState"])},{reflux:"reflux"}],51:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["addNonExclusiveShelf","removeNonExclusiveShelf"])},{reflux:"reflux"}],52:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n);r["default"]=s["default"].createActions(["openAddShelfTextbox","updateShelfNameFilter","updateShelves"])},{reflux:"reflux"}],53:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}e("./_polyfills");var n=e("./_dom_ready_initializers"),s=o(n),a=e("./_public_actions"),i=o(a);window.ReactActions=i["default"],s["default"].initializeModernizrTouchCheck()},{"./_dom_ready_initializers":54,"./_polyfills":55,"./_public_actions":56}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={initializeModernizrTouchCheck:function(){document.addEventListener("DOMContentLoaded",function(){Modernizr&&Modernizr.touchevents?window.ReactActions.UserAgentCapabilitiesActions.userAgentGainsTouch():window.ReactActions.UserAgentCapabilitiesActions.userAgentLosesTouch()})}}},{}],55:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=e("object-assign"),s=o(n);e("../react_isomorphic/shims/Array.prototype.find"),window.Object.assign=s["default"]},{"../react_isomorphic/shims/Array.prototype.find":205,"object-assign":"object-assign"}],56:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("../react_actions/user_agent_capabilities_actions"),s=o(n);r["default"]={UserAgentCapabilitiesActions:s["default"]}},{"../react_actions/user_agent_capabilities_actions":49}],57:[function(e,t,r){"use strict";e("./_common");var o=e("../react_isomorphic/site_header"),n=e("../react_isomorphic/deals"),s=e("../react_isomorphic/reading_notes"),a=e("../react_isomorphic/experiments"),i=e("lodash");window.ReactComponents=(0,i.merge)({},o.HeaderComponents,a.ExperimentComponents,n.DealsComponents,s.ReadingNotesComponents),
window.ReactStores=(0,i.merge)({},o.HeaderStores,a.ExperimentStores,n.DealsStores,s.ReadingNotesStores)},{"../react_isomorphic/deals":199,"../react_isomorphic/experiments":201,"../react_isomorphic/reading_notes":204,"../react_isomorphic/site_header":206,"./_common":53,lodash:"lodash"}],58:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("../gr_component_factory"),i=o(a),l=e("../../react_stores/google_ads_store"),u=o(l),d=e("reflux"),c=o(d),f=e("classnames"),p=o(f),h=e("../../modules/ads/google_ad_helper"),m="googleBannerAd";r["default"]=i["default"].createClass({displayName:"GoogleBannerAd",mixins:[c["default"].connectFilter(u["default"],"googleAdsStore",function(e){return e.ads[this.props.adId]})],propTypes:{adId:s["default"].PropTypes.string.isRequired,delayImpressionTracking:s["default"].PropTypes.bool},getDefaultProps:function(){return{delayImpressionTracking:!1}},componentDidMount:function(){var e=this.state.googleAdsStore,t={googleHookSelector:this.refs.googleHook,creativeSelector:e.creativeSelector,dimensions:e.dimensions,isNativeAd:e.isNativeAd,delayImpressionTracking:this.props.delayImpressionTracking};(0,h.requestCreativeForAdSlot)(this.props.adId,t)},render:function(){var e=this.state.googleAdsStore,t={width:parseInt(e.dimensions.split("x")[0]),height:"auto"},r=(0,p["default"])(e.className,m,{"googleBannerAd--970x66":"970x66"===e.dimensions,"googleBannerAd--300x250 u-bottomGrayBorder":e.path.match(/goodr.home.cb/)||e.path.match(/goodr.home/)&&"300x250"===e.dimensions,"googleBannerAd--left_skin":e.path.match(/left.160x600/)||e.path.match(/left.out.160x600/),"googleBannerAd--right_skin":e.path.match(/right.160x600/)||e.path.match(/right.out.160x600/)});return e?s["default"].createElement("div",{className:r,id:this.props.adId,style:t,ref:"googleHook"}):null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":221,"../gr_component_factory":114,classnames:"classnames",react:"react",reflux:"reflux"}],59:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../../react_stores/user_not_interested_store"),f=o(c),p=e("../../react_actions/user_not_interested_actions"),h=o(p),m=e("../../react_stores/google_ads_store"),g=o(m),_=e("./google_native_ad_body"),v=o(_),y=e("../close_button"),b=o(y);r["default"]=d["default"].createClass({displayName:"GoogleNativeAd",mixins:[l["default"].connect(f["default"],"userNotInterestedStore"),l["default"].connectFilter(g["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:a["default"].PropTypes.string.isRequired,trackingOptions:a["default"].PropTypes.shape({enableTracking:a["default"].PropTypes.bool,adId:a["default"].PropTypes.string}).isRequired,signedIn:a["default"].PropTypes.bool},getAdsStoreState:function(){return this.state.googleAdsStore},getUserNotInterestedStoreState:function(){return this.state.userNotInterestedStore},renderUndoButton:function(e){var t=this;return n("button",{className:"gr-buttonAsLink",onClick:function(){h["default"].undoUserNotInterested(e.bookId,t.props.adId)}},void 0,"Undo")},renderUserNotInterestedMessage:function(){var e=this.getAdsStoreState().creative.book,t=n("span",{className:"userNotInterested__message"},void 0,"Thanks! We won't recommend"," ",n("a",{href:e.bookUrl},void 0,e.title)," ","again!"," ",this.renderUndoButton(e));return n("div",{className:"userNotInterested",role:"alert"},void 0,n("div",{className:"userNotInterested__close"},void 0,n(b["default"],{action:function(){h["default"].closeFlashMessage(e.bookId)}})),t)},render:function(){if(null!=this.getAdsStoreState()&&this.getAdsStoreState().hasCreative&&null!=this.getAdsStoreState().creative.book){var e=this.getAdsStoreState().creative.book.bookId;if(null==this.getUserNotInterestedStoreState()[e])h["default"].addBookIDToState(e);else{if(this.getUserNotInterestedStoreState()[e].isClosed)return null;if(this.getUserNotInterestedStoreState()[e].isFlashMessage)return this.renderUserNotInterestedMessage()}}return n(v["default"],{adId:this.props.adId,trackingOptions:this.props.trackingOptions,signedIn:this.props.signedIn})}})},{"../../react_actions/user_not_interested_actions":50,"../../react_stores/google_ads_store":221,"../../react_stores/user_not_interested_store":233,"../close_button":72,"../gr_component_factory":114,"./google_native_ad_body":60,react:"react",reflux:"reflux"}],60:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../react_stores/google_ads_store"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("./sponsored_book_header"),f=o(c),p=e("./native_ad_item"),h=o(p),m=e("../book_with_wtr_button"),g=o(m),_=e("../preview_book/preview_book"),v=o(_),y=e("../user_content/expandable_html"),b=o(y),k=e("../book_description"),S=o(k),T=e("./sponsored_update_body"),P=o(T),N=e("../newsfeed/footer/newsfeed_item_footer_actions"),w=o(N),R=e("../../modules/ads/google_ad_helper"),x=e("classnames"),A=o(x),C="googleNativeAd";r["default"]=l["default"].createClass({displayName:"GoogleNativeAdBody",mixins:[d["default"].connectFilter(a["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired,signedIn:React.PropTypes.bool},getStoreState:function(){return this.state.googleAdsStore},componentDidMount:function(){if(!this.getStoreState().hasCreative){var e={googleHookSelector:this.refs.googleHook,creativeSelector:this.getStoreState().creativeSelector,dimensions:this.getStoreState().dimensions,isNativeAd:this.getStoreState().isNativeAd};(0,R.requestCreativeForAdSlot)(this.props.adId,e)}},getHeaderText:function(){return{__html:this.getStoreState().creative.headerText}},renderPreviewButton:function(){var e=[n(v["default"],{book:this.getStoreState().creative.book})];return n(w["default"],{elements:e,isSponsored:this.getStoreState().creative.isSponsored,footerClasses:(0,A["default"])("nativeAdFooterActions")})},renderBookBody:function(){return this.getStoreState().creative.customText?n("div",{className:"gr-book__description u-marginTopXSmall"},void 0,React.createElement(b["default"],this.getStoreState().creative.customText)):n(S["default"],{className:"u-marginTopXSmall",bookDescription:this.getStoreState().creative.book.description})},renderBody:function(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return n(g["default"],{body:this.renderBookBody(),book:this.getStoreState().creative.book,bookClassName:"nativeAdQuotesBodyContainer",hideWtrButton:e})},renderSponsoredChallenge:function(){var e=n("div",{className:"gr-newsfeedItem__headerText",dangerouslySetInnerHTML:this.getHeaderText()}),t=n(P["default"],{creative:this.getStoreState().creative,bodyClassNames:(0,A["default"])("nativeAdQuotesBodyContainer")}),r=n(w["default"],{isSponsored:this.getStoreState().creative.isSponsored,sponsoredBy:this.getStoreState().creative.sponsoredBy,sponsoredUrl:this.getStoreState().creative.sponsoredUrl,footerClasses:(0,A["default"])("nativeAdFooterActions")});return n(h["default"],{creative:this.getStoreState().creative,header:e,body:t,footer:r,id:this.props.adId,classNames:(0,A["default"])("gr-mediaBox"),headerClassNames:(0,A["default"])("nativeAdHeaderText"),hasIcon:!1,hasBottomBorder:!0})},renderSponsoredBookUpdate:function(){var e=n(f["default"],{creative:this.getStoreState().creative,signedIn:this.props.signedIn}),t=this.renderBody(!this.props.signedIn);return n(h["default"],{creative:this.getStoreState().creative,header:e,body:t,footer:this.renderPreviewButton(),id:this.getStoreState().id,classNames:(0,A["default"])("gr-mediaBox"),headerClassNames:(0,A["default"])("nativeAdHeaderText"),hasIcon:!1,hasBottomBorder:!0,signedIn:this.props.signedIn})},renderCreative:function(){return this.getStoreState().creative&&this.getStoreState().creative.book?this.renderSponsoredBookUpdate():this.getStoreState().creative?this.renderSponsoredChallenge():null},render:function(){if(this.getStoreState()){var e=(0,A["default"])(C,this.getStoreState().className),t=this.getStoreState().hasCreative?this.renderCreative():null;return n("div",{},void 0,t,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":221,"../book_description":69,"../book_with_wtr_button":70,"../gr_component_factory":114,"../newsfeed/footer/newsfeed_item_footer_actions":143,"../preview_book/preview_book":146,"../user_content/expandable_html":188,"./native_ad_item":64,"./sponsored_book_header":65,"./sponsored_update_body":66,classnames:"classnames",reflux:"reflux"}],61:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/google_ads_store"),d=o(u),c=e("../../modules/ads/google_ad_helper"),f=e("classnames"),p=o(f),h="googleNativeNewsfeedAd";r["default"]=l["default"].createClass({displayName:"GoogleNativeNavAd",mixins:[a["default"].connectFilter(d["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired},componentDidMount:function(){var e=this.state.googleAdsStore;if(!e.hasCreative){var t={googleHookSelector:this.refs.googleHook,creativeSelector:e.creativeSelector,dimensions:e.dimensions,isNativeAd:e.isNativeAd};(0,c.requestCreativeForAdSlot)(this.props.adId,t)}},render:function(){var e=this.state.googleAdsStore;if(e){var t=(0,p["default"])(h,e.className);return n("div",{},void 0,React.createElement("div",{className:t,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":221,"../gr_component_factory":114,classnames:"classnames",reflux:"reflux"}],62:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/google_ads_store"),d=o(u),c=e("../click_tracking_wrapper"),f=o(c),p=e("../user_content/expandable_html"),h=o(p),m=e("../../modules/ads/click_tracking_helper");r["default"]=l["default"].createClass({displayName:"GoogleNativeNavCreative",mixins:[a["default"].connectFilter(d["default"],"googleAdsStore",function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,genre:React.PropTypes.string,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired},getDefaultProps:function(){return{audibleUrl:"https://www.goodreads.com/audible"}},renderImage:function(){var e=this.state.googleAdsStore,t=n("a",{href:this.props.audibleUrl},void 0,n("img",{alt:e.creative.title,src:e.creative.image}));return n(f["default"],{trackingOptions:m.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Image,children:t})},renderExploreButton:function(){var e=n("a",{href:this.props.audibleUrl,className:"gr-button u-marginTopSmall gr-microsite-link"},void 0,"Browse ",this.props.genre);return n(f["default"],{trackingOptions:m.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_ExploreButton,children:e})},renderBody:function(){var e=this.state.googleAdsStore,t=n("div",{className:"gr-book__titleLink gr-book__title gr-book__titleLink--large"},void 0,n("a",{href:this.props.audibleUrl,className:"gr-hyperlink gr-hyperlink--naked"},void 0,e.creative.title));return n("div",{},void 0,this.renderImage(),n("div",{className:"u-marginTopXSmall"},void 0,n(f["default"],{trackingOptions:m.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Title,children:t})),n("div",{className:"u-marginTopXSmall"},void 0,React.createElement(h["default"],e.creative.description)),this.renderExploreButton())},renderCreative:function(){var e=this.state.googleAdsStore;if(e.creative){var t=n("a",{href:this.props.audibleUrl,className:"gr-hyperlink featuredGenres__sponsoredLink"},void 0,e.creative.sponsoredBy),r=n("div",{className:"featuredGenres__sponsoredFooter"},void 0,n("span",{className:"gr-newsfeedItem__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),n("span",{className:"featuredGenres__sponsoredLabel"},void 0,"Sponsored by "),n(f["default"],{children:t,trackingOptions:m.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_SponsoredBy}));return n("div",{className:"featuredGenres__book"},void 0,n("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Discover Audiobooks through Audible"),n("div",{className:"u-marginTopSmall"},void 0,this.renderBody(),r))}return null},render:function(){return this.state.googleAdsStore?n("div",{},void 0,this.renderCreative()):null}})},{"../../modules/ads/click_tracking_helper":3,"../../react_stores/google_ads_store":221,"../click_tracking_wrapper":71,"../gr_component_factory":114,"../user_content/expandable_html":188,reflux:"reflux"}],63:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shared/gr_prop_types"),l=o(i),u=e("../dropdown"),d=o(u),c=e("../click_tracking_wrapper"),f=o(c),p=e("../../react_actions/newsfeed_actions"),h=o(p),m=e("../../react_actions/user_not_interested_actions"),g=o(m),_=e("../../modules/ads/click_tracking_helper"),v=e("react"),y=o(v),b=e("lodash");r["default"]=a["default"].createClass({displayName:"NativeAdCaret",propTypes:{book:l["default"].book(),helpLink:y["default"].PropTypes.string.isRequired,updateId:y["default"].PropTypes.string.isRequired,additionalLinks:y["default"].PropTypes.arrayOf(y["default"].PropTypes.elements),isNewsfeed:y["default"].PropTypes.bool,signedIn:y["default"].PropTypes.bool},getDefaultProps:function(){return{trackingOptions:_.TRACKED_CLASSES.newsfeed_caret,isNewsfeed:!0,signedIn:!0}},renderNotInterested:function(){var e=this;if(this.props.book&&this.props.signedIn){var t=void 0,r=void 0;return r=this.props.isNewsfeed?function(){return h["default"].userNotInterested(e.props.book.bookId,e.props.updateId)}:function(){return g["default"].userNotInterested(e.props.book.bookId)},t=n("button",{className:"gr-buttonAsLink nativeAdCaretMenu__button",onClick:r},void 0,"I’m not interested in this book"),n(f["default"],{children:t,trackingOptions:_.TRACKED_CLASSES.newsfeed_caret_not_interested})}return null},caretList:function(){var e=n("a",{className:"nativeAdCaretMenu__link",href:this.props.helpLink},void 0,"Why am I seeing this?");return n("div",{className:"nativeAdCaretMenu"},void 0,this.renderNotInterested(),(0,b.map)(this.props.additionalLinks,function(e){return n("div",{className:"nativeAdCaretMenu__button"},e,"link")}),n(f["default"],{children:e,trackingOptions:_.TRACKED_CLASSES.newsfeed_caret_help}))},render:function(){return n("div",{className:"nativeAdCaret"},void 0,n(d["default"],{trigger:n("div",{className:"nativeAdCaret nativeAdCaret__image","aria-label":"Sponsored item options"}),triggerEventType:d["default"].TriggerEventTypes.CLICK,bemModifiers:"caret",children:this.caretList()}))}})},{"../../modules/ads/click_tracking_helper":3,"../../react_actions/newsfeed_actions":41,"../../react_actions/user_not_interested_actions":50,"../click_tracking_wrapper":71,"../dropdown":102,"../gr_component_factory":114,"../shared/gr_prop_types":165,lodash:"lodash",react:"react"}],64:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("classnames"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shape_icon"),f=o(c),p=e("../user/user_icon"),h=o(p),m=e("../../modules/shape_icon_values"),g=e("../shared/gr_prop_types"),_=o(g),v=e("./native_ad_caret"),y=o(v);r["default"]=d["default"].createClass({displayName:"NativeAdItem",propTypes:{creative:_["default"].creative().isRequired,header:a["default"].PropTypes.element.isRequired,body:a["default"].PropTypes.element.isRequired,id:a["default"].PropTypes.string.isRequired,footer:a["default"].PropTypes.element,classNames:a["default"].PropTypes.string,headerClassNames:a["default"].PropTypes.string,bodyClassNames:a["default"].PropTypes.string,hasIcon:a["default"].PropTypes.bool,hasBottomBorder:a["default"].PropTypes.bool,signedIn:a["default"].PropTypes.bool},renderCaret:function(){return n("div",{className:"gr-newsfeedItem__caret"},void 0,n(y["default"],{book:this.props.creative.book,helpLink:this.props.creative.helpLink,updateId:this.props.id,isNewsfeed:!1,signedIn:this.props.signedIn}))},renderIconBody:function(){return this.props.creative.firstFriend?n(h["default"],{user:this.props.creative.firstFriend,size:m.ICON_SIZES.MEDIUM}):n(f["default"],{imageUrl:this.props.creative.defaultIcon,size:m.ICON_SIZES.MEDIUM,imageAlt:"Sponsored Newsfeed Item Icon",border:!0})},renderIcon:function(){return n("div",{className:"gr-newsfeedItem__headerIcon gr-mediaBox__media gr-mediaBox__media--marginSmall"},void 0,this.renderIconBody())},render:function(){return a["default"].createElement("div",{className:this.props.hasBottomBorder?this.props.classNames+" "+(0,l["default"])("nativeAdBottomBorder"):this.props.classNames,ref:"nativeAd"},this.props.hasIcon&&this.renderIcon(),n("div",{className:this.props.bodyClassNames},void 0,this.renderCaret(),n("div",{className:this.props.headerClassNames},void 0,this.props.header),this.props.body),this.props.footer)}})},{"../../modules/shape_icon_values":24,"../gr_component_factory":114,"../shape_icon":160,"../shared/gr_prop_types":165,"../user/user_icon":185,"./native_ad_caret":63,classnames:"classnames",react:"react"}],65:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../user/user_profile_link"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("lodash"),f=o(c);r["default"]=a["default"].createClass({displayName:"SponsoredBookHeader",propTypes:{creative:d["default"].creative().isRequired,signedIn:React.PropTypes.bool},getDefaultProps:function(){return{signedIn:!0}},renderLink:function(e,t){return n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:t},void 0,e)},renderFriendHeader:function(){var e=f["default"].head(this.props.creative.topFriends);return n("span",{className:"gr-newsfeedItem__headerText"},void 0,n(l["default"],{user:e}),this.renderHeaderText()," ",this.props.creative.friendActionText)},renderHeaderText:function(){return 1===this.props.creative.numAdditionalFriends?n("span",{},void 0," and ",n(l["default"],{user:this.props.creative.topFriends[1]})):this.props.creative.numAdditionalFriends>1?n("span",{},void 0," and ",this.renderLink(this.props.creative.numAdditionalFriends+" other friends",this.props.creative.book.bookUrl+"#friendReviews")):null},renderSimilarBook:function(){return n("div",{className:"gr-newsfeedItem__headerText gr-newsfeedItem__headerText--truncateWithEllipsis"},void 0,"This is similar to ",this.renderLink(this.props.creative.similarBook.title,this.props.creative.similarBook.bookUrl))},renderGenres:function(){var e=f["default"].head(this.props.creative.genres);return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"This book has been shelved by members as ",this.renderLink(e.genre,e.url),this.props.creative.genres.length>1?n("span",{},void 0," and ",this.renderLink(this.props.creative.genres[1].genre,this.props.creative.genres[1].url)):null)},renderDefault:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"Based on your reading preferences, you might enjoy")},renderSignedOutText:function(){return n("div",{className:"gr-newsfeedItem__headerText"},void 0,"Goodreads Recommends")},render:function(){return this.props.signedIn?this.props.creative.topFriends?this.renderFriendHeader():this.props.creative.similarBook?this.renderSimilarBook():this.props.creative.genres?this.renderGenres():this.renderDefault():this.renderSignedOutText()}})},{"../gr_component_factory":114,"../shared/gr_prop_types":165,"../user/user_profile_link":187,lodash:"lodash"}],66:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shared/gr_prop_types"),l=o(i),u=e("classnames"),d=o(u),c=e("../click_tracking_wrapper"),f=o(c),p=e("../user_content/expandable_html"),h=o(p),m=e("../../modules/ads/click_tracking_helper");r["default"]=a["default"].createClass({displayName:"SponsoredUpdateBody",propTypes:{creative:l["default"].creative().isRequired,bodyClassNames:React.PropTypes.string},renderImage:function(){var e=(0,d["default"])("gr-mediaBox__media",this.withBemModifiers("gr-sponsoredUpdateBody__image")),t=n("a",{target:this.props.creative.externalLink?"_blank":"_self",href:this.props.creative.updateUrl},void 0,n("img",{alt:this.props.creative.title,className:e,src:this.props.creative.image}));return n(f["default"],{trackingOptions:m.TRACKED_CLASSES.sponsored_update_body_image,children:t})},renderExploreButton:function(){var e=n("a",{target:this.props.creative.externalLink?"_blank":"_self",href:this.props.creative.callToActionUrl,className:"gr-button u-marginTopMedium gr-microsite-link"},void 0,this.props.creative.callToActionText);return n(f["default"],{trackingOptions:m.TRACKED_CLASSES.cta_link,children:e})},render:function(){var e=(0,d["default"])(this.props.bodyClassNames,"gr-mediaBox","gr-sponsoredUpdateBody"),t=(0,d["default"])("gr-sponsoredUpdateBody__titleLink","gr-hyperlink","gr-hyperlink--naked"),r=n("a",{target:this.props.creative.externalLink?"_blank":"_self",href:this.props.creative.updateUrl,className:t},void 0,this.props.creative.title);return n("div",{className:e},void 0,this.renderImage(),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-sponsoredUpdateBody__title"},void 0,n(f["default"],{trackingOptions:m.TRACKED_CLASSES.sponsored_update_body_title_link,children:r})),n("div",{className:"gr-sponsoredUpdateBody__description"},void 0,React.createElement(h["default"],this.props.creative.description)),this.renderExploreButton()))}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":71,"../gr_component_factory":114,"../shared/gr_prop_types":165,"../user_content/expandable_html":188,classnames:"classnames"}],67:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=n("span",{className:"gr-icon gr-icon--authorBadge",title:"Goodreads Author"});r["default"]=a["default"].createClass({displayName:"AuthorBadge",propTypes:{isGoodreadsAuthor:i.PropTypes.bool.isRequired},render:function(){return this.props.isGoodreadsAuthor?l:null}})},{"../gr_component_factory":114,react:"react"}],68:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.VALID_BOOK_SIZES=void 0;var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("./gr_component_factory"),d=o(u),c=e("./shared/gr_prop_types"),f=o(c),p=e("./click_tracking_wrapper"),h=o(p),m=e("../modules/ads/click_tracking_helper"),g=e("classnames"),_=o(g),v=e("./author/author_badge"),y=o(v),b=r.VALID_BOOK_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"};r["default"]=d["default"].createClass({displayName:"Book",propTypes:{imageUrl:a["default"].PropTypes.string.isRequired,bookUrl:a["default"].PropTypes.string.isRequired,bookCoverUrl:a["default"].PropTypes.string,title:a["default"].PropTypes.string.isRequired,size:a["default"].PropTypes.oneOf(l["default"].values(b)),titleSize:a["default"].PropTypes.oneOf(l["default"].values(b)),author:f["default"].author(),mediaBoxModifier:a["default"].PropTypes.string,className:a["default"].PropTypes.string,sponsored:a["default"].PropTypes.bool,bookImageTrackingData:a["default"].PropTypes.object,bookTitleTrackingData:a["default"].PropTypes.object,authorLinkTrackingData:a["default"].PropTypes.object,label:a["default"].PropTypes.element},getDefaultProps:function(){return{size:b.MEDIUM,bookImageTrackingData:m.TRACKED_CLASSES.book_image,bookTitleTrackingData:m.TRACKED_CLASSES.book_title,authorLinkTrackingData:m.TRACKED_CLASSES.author_link}},render:function(){var e=(0,_["default"])("gr-mediaBox","gr-book--"+this.props.size,this.withBemModifiers("gr-book"),this.props.className),t=(0,_["default"])("gr-mediaBox__media",this.withBemModifiers("gr-book__image"),{"gr-book__image--large":this.props.size===b.LARGE}),r=null==this.props.titleSize?this.props.size:this.props.titleSize,o=(0,_["default"])(this.withBemModifiers("gr-book__titleLink"),{"gr-book__titleLink--large":r===b.LARGE},"gr-hyperlink gr-hyperlink--naked"),s=(0,_["default"])(this.withBemModifiers("gr-book__title")),a=this.withBemModifiers("gr-mediaBox__desc",this.props.mediaBoxModifier),i=n("img",{alt:this.props.title,className:t,src:this.props.imageUrl}),l=n("a",{href:this.props.bookUrl,className:o},void 0,this.props.title);return n("div",{className:e},void 0,n("a",{href:this.props.bookCoverUrl||this.props.bookUrl},void 0,n(h["default"],{children:i,trackingOptions:this.props.bookImageTrackingData})),n("div",{className:a},void 0,this.props.label,n("div",{className:s},void 0,n(h["default"],{children:l,trackingOptions:this.props.bookTitleTrackingData})),this.renderAuthorLink(),n("div",{className:"gr-book__additionalContent"},void 0,this.props.children)))},renderAuthorLink:function(){var e=null==this.props.titleSize?this.props.size:this.props.titleSize,t=(0,_["default"])(this.withBemModifiers("gr-book__author"),{"gr-book__author--large":e===b.LARGE});if(this.props.author){var r=n("a",{href:this.props.author.profileUrl,className:"gr-book__authorLink gr-hyperlink gr-hyperlink--naked"},void 0,this.props.author.name);return n("div",{className:t},void 0,"by ",n(h["default"],{children:r,trackingOptions:this.props.authorLinkTrackingData}),a["default"].createElement(y["default"],this.props.author))}return n("div",{className:t},void 0,"by deleted author")}})},{"../modules/ads/click_tracking_helper":3,"./author/author_badge":67,"./click_tracking_wrapper":71,"./gr_component_factory":114,"./shared/gr_prop_types":165,classnames:"classnames",lodash:"lodash",react:"react"}],69:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gr_component_factory"),i=o(a),l=e("./user_content/truncated_html"),u=o(l),d=e("./shared/gr_prop_types"),c=o(d),f=e("classnames"),p=o(f);r["default"]=i["default"].createClass({
displayName:"BookDescription",propTypes:{bookDescription:c["default"].bookDescription().isRequired,className:React.PropTypes.string,bookDescriptionTargetingData:React.PropTypes.object},getDefaultProps:function(){return{bookDescription:{html:"",truncated:!1,fullContentUrl:""}}},render:function(){var e=(0,p["default"])(this.props.className,"gr-book__description"),t=this.props.bookDescription;return s("div",{className:e},void 0,t.html?React.createElement(u["default"],n({},t,{fullContentText:"Continue reading",bookDescriptionTargetingData:this.props.bookDescriptionTargetingData})):null,this.props.children)}})},{"./gr_component_factory":114,"./shared/gr_prop_types":165,"./user_content/truncated_html":192,classnames:"classnames"}],70:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("./gr_component_factory"),i=o(a),l=e("./shared/gr_prop_types"),u=o(l),d=e("./book"),c=o(d),f=e("./want_to_read/want_to_read_button"),p=o(f),h=e("lodash"),m=e("./click_tracking_wrapper"),g=o(m),_=e("../modules/ads/click_tracking_helper");r["default"]=i["default"].createClass({displayName:"BookWithWTRButton",propTypes:{book:u["default"].book().isRequired,body:React.PropTypes.element,bookSize:React.PropTypes.oneOf((0,h.values)(d.VALID_BOOK_SIZES)),bookClassName:React.PropTypes.string,hideWtrButton:React.PropTypes.bool},getDefaultProps:function(){return{bookSize:d.VALID_BOOK_SIZES.LARGE}},renderBookBody:function(){return this.props.body?this.props.body:null},renderWtrButton:function(){return s(p["default"],{bookTitle:this.props.book.title,uniqueId:(0,h.random)(1e6).toString(),bookId:this.props.book.bookId,showStars:!0})},renderLearnMoreButton:function(){var e=s("a",{target:"_self",href:this.props.book.bookUrl,className:"gr-button u-marginTopMedium"},void 0,"Learn More");return s(g["default"],{trackingOptions:_.TRACKED_CLASSES.cta_link,children:e})},render:function(){return React.createElement(c["default"],n({className:this.props.bookClassName},this.props.book,{size:this.props.bookSize}),!this.props.hideWtrButton&&this.renderWtrButton(),this.renderBookBody(),this.props.hideWtrButton&&this.renderLearnMoreButton())}})},{"../modules/ads/click_tracking_helper":3,"./book":68,"./click_tracking_wrapper":71,"./gr_component_factory":114,"./shared/gr_prop_types":165,"./want_to_read/want_to_read_button":194,lodash:"lodash"}],71:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("./gr_component_factory"),i=o(a);r["default"]=i["default"].createClass({displayName:"ClickTrackingWrapper",propTypes:{trackingOptions:s["default"].PropTypes.shape({dfp:s["default"].PropTypes.bool,pmet:s["default"].PropTypes.object.isRequired}).isRequired,children:s["default"].PropTypes.element.isRequired},render:function(){return this.props.children}})},{"./gr_component_factory":114,react:"react"}],72:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("../modules/shared/image_registry"),d=e("classnames"),c=o(d);r["default"]=l["default"].createClass({displayName:"CloseButton",propTypes:{action:a["default"].PropTypes.func.isRequired},render:function(){var e=(0,c["default"])("gr-iconButton",this.props.className);return n("button",{className:e,onClick:this.props.action},void 0,n("img",{alt:"Dismiss",src:(0,u.getImages)().closeIcon}))}})},{"../modules/shared/image_registry":25,"./gr_component_factory":114,classnames:"classnames",react:"react"}],73:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../user_content/expandable_html"),c=o(d),f=e("../user_content/hidden_html"),p=o(f),h=e("../shared/gr_prop_types"),m=o(h),g=e("../user/user_profile_link"),_=o(g),v=e("../user/user_icon"),y=o(v),b=e("./right_side_information"),k=o(b);r["default"]=u["default"].createClass({displayName:"Comment",propTypes:{body:i["default"].PropTypes.shape(m["default"].expandableHtml()),createdAt:m["default"].date.isRequired,authorUser:m["default"].user().isRequired,subjectKey:i["default"].PropTypes.string.isRequired,subject:m["default"].commentSubject(),deletableByCurrentUser:i["default"].PropTypes.bool.isRequired,blockedByCurrentUser:i["default"].PropTypes.bool,showTimestamp:i["default"].PropTypes.bool,uri:i["default"].PropTypes.string.isRequired,flagForAbuseUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{blockedByCurrentUser:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},renderBody:function(){if(this.props.blockedByCurrentUser){var e="unhide comment";return s(p["default"],{unhideText:e},void 0,i["default"].createElement(c["default"],this.props.body))}return i["default"].createElement(c["default"],this.props.body)},render:function(){var e=this;return s("div",{className:"gr-comment gr-mediaBox",onMouseEnter:function(){e.setState({isHoveringOnComment:!0})},onMouseLeave:function(){e.setState({isHoveringOnComment:!1})}},void 0,s("div",{className:"gr-mediaBox__media"},void 0,s(y["default"],{user:this.props.authorUser})),s("div",{className:"gr-mediaBox__desc\n                              gr-mediaBox__desc--clearfixOverflow"},void 0,i["default"].createElement(k["default"],n({isHoveringOnComment:this.state.isHoveringOnComment},this.props)),s(_["default"],{user:this.props.authorUser}),this.props.blockedByCurrentUser?s("strong",{},void 0," (blocked)"):null,s("div",{className:"gr-comment__body"},void 0,this.renderBody())))}})},{"../gr_component_factory":114,"../shared/gr_prop_types":165,"../user/user_icon":185,"../user/user_profile_link":187,"../user_content/expandable_html":188,"../user_content/hidden_html":189,"./right_side_information":76,react:"react"}],74:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shared/gr_prop_types"),f=o(c),p=e("../../react_actions/comment_actions"),h=o(p),m=e("../../react_stores/comments_store"),g=o(m),_=e("../user/user_icon"),v=o(_),y=e("../../react_mixins/gr_reflux"),b=e("classnames"),k=o(b);r["default"]=d["default"].createClass({displayName:"CommentForm",propTypes:{authorUser:f["default"].user().isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string}),placeholder:a["default"].PropTypes.string},mixins:[(0,y.connectToLazyStore)(g["default"],"subjectKey")],getDefaultProps:function(){return{placeholder:"Write a comment…"}},addNewComment:function(e){this.isCommentEmpty()||h["default"].addNewComment({subjectKey:this.props.subjectKey,subject:this.props.subject,body:this.state.unsavedComment,authorUser:this.props.authorUser}),e.preventDefault()},isCommentEmpty:function(){return l["default"].isEmpty(l["default"].trim(this.state.unsavedComment))},onTextChange:function(e){h["default"].commentEntered(this.props.subjectKey,e.target.value)},onFocus:function(){h["default"].textareaFocused(this.props.subjectKey)},onBlur:function(){h["default"].textareaUnfocused(this.props.subjectKey)},componentDidUpdate:function(){this.state.textareaFocusRequested===!0&&this.refs.commentBodyTextarea.focus()},render:function(){var e=(0,k["default"])(this.withBemModifiers("gr-commentForm"),"gr-mediaBox");return n("div",{className:e},void 0,n("div",{className:"gr-mediaBox__media u-noLineHeight"},void 0,n(v["default"],{user:this.props.authorUser})),n("form",{className:"gr-mediaBox__desc",method:"post",action:"/comment"},void 0,n("input",{type:"hidden",name:"id",value:this.props.subject.id}),n("input",{type:"hidden",name:"type",value:this.props.subject.type}),a["default"].createElement("textarea",{className:"gr-textarea gr-commentForm__textarea",name:"comment[body_usertext]",disabled:this.state.saveInProgress,onChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,rows:this.state.textareaRows,value:this.state.unsavedComment,ref:"commentBodyTextarea",placeholder:this.props.placeholder,"aria-label":this.props.placeholder}),this.state.showCommentButton?n("button",{className:"gr-commentForm__submitButton gr-button gr-button--small",disabled:this.state.saveInProgress||this.isCommentEmpty(),onClick:this.addNewComment,type:"submit"},void 0,"Comment"):null))}})},{"../../react_actions/comment_actions":29,"../../react_mixins/gr_reflux":210,"../../react_stores/comments_store":214,"../gr_component_factory":114,"../shared/gr_prop_types":165,"../user/user_icon":185,classnames:"classnames",lodash:"lodash",react:"react"}],75:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../gr_component_factory"),c=o(d),f=e("../shared/gr_prop_types"),p=o(f),h=e("./comment"),m=o(h),g=e("../pagination_links"),_=o(g),v=e("../../react_stores/comments_store"),y=o(v),b=e("../../react_actions/comment_actions"),k=o(b),S=e("../spinner"),T=o(S),P=e("../../react_mixins/gr_reflux"),N=e("classnames"),w=o(N),R=3,x=1;r["default"]=c["default"].createClass({displayName:"Comments",propTypes:{subjectKey:i["default"].PropTypes.string.isRequired,subject:p["default"].commentSubject(),subjectUrl:i["default"].PropTypes.string,showTimestamp:i["default"].PropTypes.bool},getDefaultProps:function(){return{showTimestamp:!0}},mixins:[(0,P.connectToLazyStore)(y["default"],"subjectKey")],seeMoreCommentsText:function(){return 1==this.state.numComments?"See 1 comment":"See all "+this.state.numComments+" comments"},showCommentsForPage:function(e){k["default"].showCommentsForPage({subjectKey:this.props.subjectKey,subject:this.props.subject,page:e})},showMoreClicked:function(e){k["default"].showSeeMoreLoadingSpinner(this.props.subjectKey),this.showCommentsForPage(x),e.preventDefault()},renderSeeMoreComments:function(){var e=this.state.numComments;return e>R||e>this.state.comments.length?s("div",{className:"gr-comments__seeAllLinkBox"},void 0,this.state.showSeeMoreLoadingSpinner?s("span",{},void 0,s("span",{className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.seeMoreCommentsText()),s("span",{id:"showMoreSpinner",className:"u-marginLeftTiny"},void 0,s(T["default"],{}))):s("a",{href:this.props.subjectUrl,className:"gr-hyperlink gr-hyperlink--bold",onClick:this.showMoreClicked},void 0,this.seeMoreCommentsText())):null},renderComments:function(){var e=this,t=this.state.showPagination?this.state.comments:u["default"].takeRight(this.state.comments,R);return u["default"].map(t,function(t){return i["default"].createElement(m["default"],n({key:t.uri,subjectKey:e.props.subjectKey,subject:e.props.subject,showTimestamp:e.props.showTimestamp},t))})},render:function(){var e=(0,w["default"])(this.withBemModifiers("gr-comments"),"gr-box","gr-box--hiddenOverflow","u-defaultType");return this.state.numComments>0?s("div",{className:e},void 0,this.state.showPagination?null:this.renderSeeMoreComments(),this.renderComments(),this.state.showPagination?s("div",{className:"u-topGrayBorder"},void 0,s(_["default"],{subjectKey:this.props.subjectKey,totalSize:this.state.numComments,currentPageNumber:this.state.currentPage,perPage:10,changePageAction:this.showCommentsForPage,className:"gr-paginationLinks__links"})):null):null}})},{"../../react_actions/comment_actions":29,"../../react_mixins/gr_reflux":210,"../../react_stores/comments_store":214,"../gr_component_factory":114,"../pagination_links":144,"../shared/gr_prop_types":165,"../spinner":177,"./comment":73,classnames:"classnames",lodash:"lodash",react:"react"}],76:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shared/gr_prop_types"),f=o(c),p=e("../spinner"),h=o(p),m=e("../flagged_resources/flag_for_abuse_link"),g=o(m),_=e("../time/relative_time"),v=o(_),y=e("../dot_separated_elements"),b=o(y),k=e("../../react_actions/comment_actions"),S=o(k),T=e("../../react_stores/user_agent_capabilities_store"),P=o(T),N=e("../../modules/env_utils"),w=o(N);r["default"]=d["default"].createClass({displayName:"CommentRightSideInformation",mixins:[l["default"].connect(P["default"],"userAgentCapabilities")],propTypes:{showTimestamp:a["default"].PropTypes.bool,isHoveringOnComment:a["default"].PropTypes.bool,deletableByCurrentUser:a["default"].PropTypes.bool.isRequired,subject:f["default"].commentSubject().isRequired,uri:a["default"].PropTypes.string.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,createdAt:f["default"].date.isRequired,flagForAbuseUrl:a["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{showTimestamp:!0,isHoveringOnComment:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},deleteComment:function(){var e={subject:this.props.subject,subjectKey:this.props.subjectKey};window.confirm("Are you sure you want to delete this comment?")&&(this.setState({showCommentDeletingSpinner:!0}),S["default"].deleteComment(this.props.subjectKey,this.props.uri,e))},getDeleteLink:function(){return this.props.deletableByCurrentUser?this.state.showCommentDeletingSpinner?a["default"].createElement(h["default"],{ref:"spinner"}):a["default"].createElement("a",{className:"gr-comment__deleteLink gr-hyperlink--naked gr-hyperlink",ref:"deleteLink",onClick:this.deleteComment,"aria-label":"Delete comment"},"Delete"):void 0},getFlag:function(){var e=this.props.flagForAbuseUrl+"&return_url="+encodeURIComponent(w["default"].getLocationUrl());return n(g["default"],{flagForAbuseUrl:e})},getTimestamp:function(){return this.props.showTimestamp?n("small",{className:"gr-comment__timestamp"},void 0,n(v["default"],{time:this.props.createdAt})):void 0},getRightSideElements:function(){var e=[];return this.state.userAgentCapabilities.touch?(e.push(this.getDeleteLink()),e.push(this.getFlag()),e.push(this.getTimestamp())):this.props.isHoveringOnComment?(e.push(this.getDeleteLink()),e.push(this.getFlag())):e.push(this.getTimestamp()),e},render:function(){return n("div",{className:"gr-comment__rightSideInformation"},void 0,n(b["default"],{elements:this.getRightSideElements()}))}})},{"../../modules/env_utils":19,"../../react_actions/comment_actions":29,"../../react_stores/user_agent_capabilities_store":232,"../dot_separated_elements":100,"../flagged_resources/flag_for_abuse_link":111,"../gr_component_factory":114,"../shared/gr_prop_types":165,"../spinner":177,"../time/relative_time":180,react:"react",reflux:"reflux"}],77:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("classnames"),d=o(u),c=e("./dot_separated_elements"),f=o(c),p={SMALL:"small",MEDIUM:"medium",LARGE:"large"},h=5;r["default"]=l["default"].createClass({displayName:"CommunityRating",statics:{ICON_SIZES:p},propTypes:{rating:a["default"].PropTypes.number.isRequired,displayAvg:a["default"].PropTypes.bool,displayAvgRatingText:a["default"].PropTypes.bool,ratingsCount:a["default"].PropTypes.number,textReviewsCount:a["default"].PropTypes.number,className:a["default"].PropTypes.string,size:a["default"].PropTypes.oneOf([p.SMALL,p.MEDIUM,p.LARGE])},getDefaultProps:function(){return{displayAvg:!1,size:p.SMALL}},wrapperClasses:function(){return(0,d["default"])("communityRating__starsWrapper",{"communityRating__starsWrapper--small":this.props.size===p.SMALL,"communityRating__starsWrapper--medium":this.props.size===p.MEDIUM,"communityRating__starsWrapper--large":this.props.size===p.LARGE})},starClasses:function(){return(0,d["default"])("communityRating__stars",{"communityRating__stars--small":this.props.size===p.SMALL,"communityRating__stars--medium":this.props.size===p.MEDIUM,"communityRating__stars--large":this.props.size===p.LARGE})},getRoundedRating:function(e){var t=Math.floor(e);return e===t?e:.5>e-t?t+.45:t+.6},renderRating:function(){var e=this.getRoundedRating(this.props.rating),t={width:e/h*100+"%"},r="Rated "+this.props.rating.toFixed(2)+" of "+h,o=null==this.props.displayAvgRatingText?this.props.displayAvg:this.props.displayAvgRatingText;return n("span",{},void 0,n("div",{className:this.wrapperClasses()},void 0,n("div",{className:this.starClasses(),style:t,"aria-label":r})),this.props.displayAvg?n("span",{className:"gr-metaText"},void 0,this.props.rating.toFixed(2),o?" avg. rating":""):null)},renderRatingsCount:function(){return n("span",{className:"gr-metaText"},void 0,this.props.ratingsCount," Ratings")},renderTextReviewsCount:function(){return n("span",{className:"gr-metaText"},void 0,this.props.textReviewsCount," Reviews")},render:function(){var e=(0,d["default"])("communityRating",this.props.className),t="Rated "+this.props.rating.toFixed(2)+" of "+h,r=[this.renderRating()];return this.props.ratingsCount&&r.push(this.renderRatingsCount()),this.props.textReviewsCount&&r.push(this.renderTextReviewsCount()),n("div",{className:e,"aria-label":t},void 0,n(f["default"],{elements:r}))}})},{"./dot_separated_elements":100,"./gr_component_factory":114,classnames:"classnames",react:"react"}],78:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../shared/gr_prop_types"),i=o(a),l=e("../book"),u=o(l),d=e("../community_rating"),c=o(d),f=e("./deal_expiration_date"),p=o(f),h=e("./deal_price"),m=o(h),g=e("./deal_tags"),_=o(g),v=e("../user_content/expandable_html"),y=o(v),b=e("./deal_buy_button"),k=o(b),S=e("../../modules/deals/deals_helper"),T=e("./deal_friend_list"),P=o(T),N=function(e){var t=e.deal,r=e.categories;return n("div",{className:"gr-deal"},void 0,React.createElement(u["default"],Object.assign({},t.book,{size:"large",bookCoverUrl:t.url}),n("div",{},void 0,n(c["default"],{rating:parseFloat(t.book.avgRating),size:"medium",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),n("span",{},void 0," · "),n("span",{className:"gr-metaText"},void 0,t.book.ratingsCount.toLocaleString()," Ratings"),n("span",{},void 0," · "),n("span",{className:"gr-metaText"},void 0,t.book.textReviewsCount.toLocaleString()," Reviews")),n(_["default"],{tags:t.tags.concat(t.genres),categories:r}),n(y["default"],{html:t.description.html,className:"gr-deal__blurb"}),n(m["default"],{dealPrice:t.dealPrice,listPrice:t.listPrice}),n(p["default"],{expirationDate:t.expirationDate,size:S.LAYOUT_SIZE.WIDE}),n(k["default"],{retailerLinks:t.retailerLinks})),null!=t.social?n(P["default"],{social:t.social}):null)},w=function(e){var t=e.deal,r=e.categories;return n("div",{className:"gr-deal"},void 0,n("div",{className:"u-marginBottomXSmall"},void 0,React.createElement(u["default"],Object.assign({},t.book,{titleSize:"large"}),n("div",{},void 0,n(c["default"],{rating:parseFloat(t.book.avgRating),size:"medium",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),n("span",{},void 0," · "),n("span",{className:"gr-metaText"},void 0,t.book.ratingsCount.toLocaleString()," Ratings")),n(_["default"],{tags:t.tags.concat(t.genres),categories:r})),n(y["default"],{html:t.description.html,truncatedHtml:t.description.truncatedHtml,className:"gr-deal__blurb"}),n(m["default"],{dealPrice:t.dealPrice,listPrice:t.listPrice}),n(p["default"],{expirationDate:t.expirationDate,size:S.LAYOUT_SIZE.NARROW}),n(k["default"],{retailerLinks:t.retailerLinks})),null!=t.social?n(P["default"],{social:t.social}):null)},R=function(e){return e.size===S.LAYOUT_SIZE.WIDE?N(e):w(e)};R.propTypes={deal:i["default"].deal().isRequired,size:s.PropTypes.string},N.propTypes=w.propTypes=R.propTypes,r["default"]=R},{"../../modules/deals/deals_helper":11,"../book":68,"../community_rating":77,"../shared/gr_prop_types":165,"../user_content/expandable_html":188,"./deal_buy_button":79,"./deal_expiration_date":82,"./deal_friend_list":83,"./deal_price":85,"./deal_tags":87,react:"react"}],79:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("lodash"),l=e("classnames"),u=o(l),d=(0,u["default"])("gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","buttonGroup__dropdownMenuItem","u-displayBlock");r["default"]=a["default"].createClass({displayName:"DealBuyButton",getInitialState:function(){return{menuOpen:!1}},toggleMenuOpen:function(){this.setState({menuOpen:!this.state.menuOpen})},renderBuyLink:function(e){return n("a",{target:"_blank",className:d,"aria-label":"Buy this e-book on "+e.label,onClick:this.toggleMenuOpen,href:e.url},e.label,e.label)},renderAdditionalLinks:function(){var e=this,t=this.props.retailerLinks.additional;return this.state.menuOpen?n("div",{className:"buttonGroup__dropdownMenu gr-box gr-box--withShadowLarge"},void 0,t.map(function(t){return e.renderBuyLink(t)})):null},render:function(){var e=this.props.retailerLinks.preferred,t=this.props.retailerLinks.additional;return(0,i.isEmpty)(t)?n("div",{className:"u-marginTopXSmall"},void 0,n("a",{className:"gr-button",href:e.url,target:"_blank","aria-label":"Buy this e-book on "+e.label},void 0,e.label)):n("div",{},void 0,n("div",{className:"buttonGroup u-marginTopXSmall"},void 0,n("a",{className:"buttonGroup__button buttonGroup__button--first",href:e.url,target:"_blank","aria-label":"Buy this e-book on "+e.label},void 0,e.label),n("button",{className:"buttonGroup__button buttonGroup__button--last",onClick:this.toggleMenuOpen,"aria-label":"Click to show additional retailers for this e-book"},void 0,"▾"),this.renderAdditionalLinks()))}})},{"../gr_component_factory":114,classnames:"classnames",lodash:"lodash"}],80:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=e("classnames"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../book"),f=o(c),p=e("../community_rating"),h=o(p),m=e("./deal_price"),g=o(m),_=e("../user_content/expandable_html"),v=o(_),y=e("./deal_buy_button"),b=o(y),k=e("./deal_tags"),S=o(k),T=e("../share_social"),P=o(T),N={ratings:{"line-height":"150%","font-size":"14px"}},w=function(e){if(!e.sharing)return null;var t={social:{outsideModal:{facebook:!0,twitter:!0,pinterest:!0,copyLink:!0},fbOptions:e.sharing.fb,twitterOptions:e.sharing.twitter,pinterestOptions:e.sharing.pinterest}};return React.createElement(P["default"],s({className:"u-marginTopMedium"},t.social.outsideModal,{fbOptions:t.social.fbOptions,twitterOptions:t.social.twitterOptions,pinterestOptions:t.social.pinterestOptions}))},R=function(e){var t=e.deal,r=e.categories,o=e.className,s=(0,l["default"])("gr-deal",o);return n("div",{className:s},void 0,React.createElement(f["default"],Object.assign({},t.book,{bemModifiers:"xlarge"}),n("div",{className:"gr-metaText",style:N.ratings},void 0,n(h["default"],{rating:parseFloat(t.book.avgRating),size:"large",displayAvg:!0,displayAvgRatingText:!1,className:"u-inlineBlock u-marginBottomTiny u-marginTopTiny"}),n("span",{},void 0," · "),n("span",{},void 0,t.book.ratingsCount.toLocaleString()," Ratings"),n("span",{},void 0," · "),n("span",{},void 0,t.book.textReviewsCount.toLocaleString()," Reviews")),n("div",{className:"u-marginTopSmall"},void 0,n(g["default"],{dealPrice:t.dealPrice,listPrice:t.listPrice}),n(b["default"],{retailerLinks:t.retailerLinks}),n(v["default"],{html:t.description.html,className:"gr-deal__blurb"}),n(S["default"],{tags:t.tags.concat(t.genres),categories:r}),w(t))))};R.propTypes={deal:d["default"].deal().isRequired,categories:a.PropTypes.array,className:a.PropTypes.string},r["default"]=R},{"../book":68,"../community_rating":77,"../share_social":163,"../shared/gr_prop_types":165,"../user_content/expandable_html":188,"./deal_buy_button":79,"./deal_price":85,"./deal_tags":87,classnames:"classnames",react:"react"}],81:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("lodash"),i=e("../shared/gr_prop_types"),l=o(i),u=e("./deal_detail"),d=o(u),c=e("./deals_category_explorer"),f=o(c),p=e("./deals_ctas"),h=o(p),m=e("./deals_legalese"),g=o(m),_=e("../../modules/deals/deals_helper"),v=e("../../modules/deals/landing_page/filters"),y=e("../../modules/deals/landing_page/helper"),b=function(e){var t=e.deal,r=e.deals;return n("div",{className:"u-marginTopMedium u-marginBottomMedium"},void 0,n("h3",{className:"gr-h3 u-marginTopNone"},void 0,"More Deals"),n("div",{className:"u-inlineBlock"},void 0,(0,a.map)((0,a.sample)((0,v.getRelatedDeals)(t,r),4),function(e){return n("span",{className:"u-marginRightLarge"},e.book.title,n("a",{href:e.url},void 0,n("img",{src:e.book.imageUrl,alt:e.book.title})))})))};b.propTypes={deal:l["default"].deal(),deals:s.PropTypes.array};var k=function(e){var t=(0,y.prepareProps)(e),r=t.categories;return n("div",{className:"gr-deals"},void 0,n("h1",{className:"pageHeader textColor"},void 0,"Goodreads Deals"),n("div",{className:"u-marginTopSmall u-marginBottomTiny"},void 0,n("a",{href:e.activeDealsUrl},void 0,"Goodreads Deals")," > Book Detail"),n("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,n(d["default"],{deal:e.deal,categores:r,className:"u-bottomGrayBorder u-paddingBottomLarge"}),React.createElement(b,e),n(g["default"],{})),n("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,n(f["default"],{categories:r,activeDealsUrl:e.activeDealsUrl,size:_.LAYOUT_SIZE.WIDE}),n(h["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl})),n("div",{className:"u-clearBoth"}))};k.propTypes={deal:l["default"].deal(),deals:s.PropTypes.array,categories:s.PropTypes.array,subscribed:s.PropTypes.bool,aboutUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string,settingsUrl:s.PropTypes.string,signupUrl:s.PropTypes.string},r["default"]=k},{"../../modules/deals/deals_helper":11,"../../modules/deals/landing_page/filters":13,"../../modules/deals/landing_page/helper":14,
"../shared/gr_prop_types":165,"./deal_detail":80,"./deals_category_explorer":89,"./deals_ctas":92,"./deals_legalese":94,lodash:"lodash",react:"react"}],82:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../time/relative_time"),i=o(a),l=e("../../modules/deals/deals_helper"),u=function(e){return n("span",{className:"gr-deal__expirationDate"},void 0,"Expires ",n(i["default"],{time:e,longFormat:!0}))},d=function(e){return n("span",{className:"gr-deal__expirationDate"},void 0,"Exp. ",n(i["default"],{time:e}))},c=function(e){var t=e.expirationDate,r=e.size;return r===l.LAYOUT_SIZE.WIDE?u(t):d(t)};c.propTypes={expirationDate:s.PropTypes.string.isRequired,size:s.PropTypes.string},r["default"]=c},{"../../modules/deals/deals_helper":11,"../time/relative_time":180,react:"react"}],83:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../user/user_icon_list"),l=o(i),u=e("./deal_friend_text"),d=o(u);r["default"]=a["default"].createClass({displayName:"DealFriendList",propTypes:{social:React.PropTypes.object},render:function(){return n("div",{className:"gr-deal__friendList"},void 0,n(l["default"],{users:this.props.social.friends}),React.createElement(d["default"],this.props.social))}})},{"../gr_component_factory":114,"../user/user_icon_list":186,"./deal_friend_text":84}],84:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"DealFriendText",propTypes:{friends:React.PropTypes.array.isRequired,totalFriends:React.PropTypes.number.isRequired,descriptor:React.PropTypes.string.isRequired,defaultUrl:React.PropTypes.string.isRequired},getFormattedText:function(){var e="gr-hyperlink gr-hyperlink--bold",t=this.props.friends.map(function(e){return e.viewableName}),r=this.props.friends.map(function(e){return e.profileUrl});switch(this.props.totalFriends){case 1:return n("a",{href:r[0],className:e},void 0,t[0]);case 2:return n("span",{},void 0,n("a",{href:r[0],className:e},void 0,t[0])," and ",n("a",{href:r[1],className:e},void 0,t[1]));case 3:return n("span",{},void 0,n("a",{href:r[0],className:e},void 0,t[0]),", ",n("a",{href:r[1],className:e},void 0,t[1])," and ",n("a",{href:r[2],className:e},void 0,t[2]));default:return n("span",{},void 0,n("a",{href:r[0],className:e},void 0,t[0]),", ",n("a",{href:r[1],className:e},void 0,t[1])," and ",n("a",{href:this.props.defaultUrl,className:e},void 0,this.props.totalFriends-2," more friends"))}},render:function(){return n("span",{className:"gr-deal__friendText"},void 0,this.getFormattedText(),this.props.descriptor)}})},{"../gr_component_factory":114}],85:[function(e,t,r){"use strict";var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=function(e){var t=parseFloat(e);return isNaN(t)||0>=t?"FREE":"$"+e},a=function(e){var t=e.dealPrice,r=e.listPrice;return o("span",{className:"gr-deal__price"},void 0,o("span",{className:"gr-deal__price__deal u-marginRightXSmall"},void 0,s(t)),o("span",{className:"gr-deal__price__original"},void 0,o("strike",{},void 0,s(r)),"*"))};a.propTypes={dealPrice:n.PropTypes.string.isRequired,listPrice:n.PropTypes.string.isRequired},r["default"]=a},{react:"react"}],86:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.DealTag=r.TAG_CLASSES=r.TAG_TEXT=r.TAG_TYPE=void 0;var s=e("react"),a=e("classnames"),i=o(a),l=r.TAG_TYPE={WTR:"wtr",AUTHOR_FOLLOW:"author",FANTASY_AND_SCI_FI:"Fantasy & Science Fiction"},u=r.TAG_TEXT={};u[l.WTR]="You Want to Read",u[l.AUTHOR_FOLLOW]="Author You Follow",u[l.FANTASY_AND_SCI_FI]="Fantasy & Sci-Fi";var d=r.TAG_CLASSES={};d[l.WTR]="gr-deal__tag__green",d[l.AUTHOR_FOLLOW]="gr-deal__tag__brown";var c=function(e){return u[e]||e},f=r.DealTag=function(e){var t=e.text,r=e.url,o=(0,i["default"])("gr-deal__tag",d[t]);return n("div",{className:o},void 0,n("a",{href:r},void 0,c(t)))};f.propTypes={text:s.PropTypes.string.isRequired,url:s.PropTypes.string},r["default"]=f},{classnames:"classnames",react:"react"}],87:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("./deal_tag"),i=o(a),l=e("lodash"),u=function(e){var t=e.tags,r=e.categories,o=void 0===r?[]:r,s=t;return t.length>4&&(s=t.slice(0,4)),n("div",{},void 0,(0,l.map)(s,function(e){var t=(0,l.findIndex)(o,function(t){return t.headline==e});return("wtr"==e||"author"==e)&&(t=(0,l.findIndex)(o,function(e){return"Recommended for You"==e.headline})),n(i["default"],{text:e,url:t>=0?o[t].url:null},e)}))};u.propTypes={tags:s.PropTypes.array,categories:s.PropTypes.array},r["default"]=u},{"./deal_tag":86,lodash:"lodash",react:"react"}],88:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=e("react"),d=e("../modal"),c=o(d),f=function(e){function t(e){return n(this,t),s(this,Object.getPrototypeOf(t).call(this,e))}return a(t,e),l(t,[{key:"componentDidMount",value:function(){$j.post(this.props.impressionTrackingUrl)}},{key:"renderModalContent",value:function(){return i("div",{className:"dealsBlockophone"},void 0,i("div",{className:"dealsBlockophone__content"}),i("div",{className:"dealsBlockophone__description u-marginBottomSmall"},void 0,"Subscribe and never miss amazing deals on bestselling books you’ll love."),i("a",{className:"dealsBlockophone__button u-displayBlock gr-button gr-button--red gr-button--large",href:this.props.subscribeUrl},void 0,"Subscribe to daily deals"),i("a",{className:"dealsBlockophone__footerLink u-marginTopSmall u-displayBlock",href:this.props.dealsUrl},void 0,"Continue to today’s deals",i("div",{className:"dealsBlockophone__logo"})))}},{key:"render",value:function(){var e=this;return i(c["default"],{id:"dealsBlockophone",bemModifiers:"dealsBlockophone",onCloseHandler:function(){return $j.post(e.props.dismissTrackingUrl)},showByDefault:!0},void 0,this.renderModalContent())}}]),t}(u.Component);r["default"]=f,f.propTypes={subscribeUrl:u.PropTypes.string.isRequired,dealsUrl:u.PropTypes.string.isRequired,dismissTrackingUrl:u.PropTypes.string.isRequired,impressionTrackingUrl:u.PropTypes.string.isRequired}},{"../modal":141,react:"react"}],89:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("classnames"),i=o(a),l=e("lodash"),u=e("../../modules/deals/deals_helper"),d={categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,activeDealsUrl:s.PropTypes.string},c=function(e){var t=e.selectedCategory,r=e.categories,o=e.activeDealsUrl;return r=(0,l.filter)(r,function(e){return e.visible}),n("div",{className:"gr-dealsCategoryExplorer u-paddingBottomSmall"},void 0,n("h3",{className:"gr-h3 u-marginTopNone"},void 0,"Explore by Category"),n("ul",{className:"u-unstyledListItem"},void 0,n("li",{},"home",n("a",{href:o,className:(0,i["default"])("gr-hyperlink",{"gr-hyperlink--bold":!t})},void 0,"All Deals")),(0,l.map)(r,function(e){return n("li",{},e.headline,n("a",{href:e.url,className:(0,i["default"])("gr-hyperlink",{"gr-hyperlink--bold":t&&t.url===e.url})},void 0,e.headline))})))};c.propTypes=d;var f=function(e){window.location.href=e.target.value},p=function(e){var t=e.selectedCategory,r=e.categories;return r=(0,l.filter)(r,function(e){return e.visible}),n("div",{className:"gr-dealsCategoryExplorer u-paddingBottomSmall"},void 0,n("select",{defaultValue:t&&t.url||"",onChange:f},void 0,n("option",{value:"",disabled:!0},void 0,"Browse by Category"),(0,l.map)(r,function(e){return n("option",{value:e.url},e.headline,e.headline)})))};p.propTypes=d;var h=function(e){return e.size===u.LAYOUT_SIZE.WIDE?c(e):p(e)};h.propTypes={size:s.PropTypes.oneOf((0,l.values)(u.LAYOUT_SIZE))},r["default"]=h},{"../../modules/deals/deals_helper":11,classnames:"classnames",lodash:"lodash",react:"react"}],90:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("lodash"),i=e("classnames"),l=o(i),u=e("./deals_list"),d=o(u),c=function(e){return n("div",{className:"gr-metaText u-marginTopMedium u-marginBottomHuge"},void 0,"Sorry, there aren't any Deals in '",e.selectedCategory.headline,"' right now. ",n("a",{href:e.activeDealsUrl},void 0,"Check out our latest Deals."))};c.propTypes={selectedCategory:s.PropTypes.object,activeDealsUrl:s.PropTypes.string};var f=function(e){var t=void 0,r=e.signedIn,o=e.settingsUrl;return t=r?n("span",{},void 0,n("p",{},void 0,"There are no active deals on your Want to Read shelf or by Authors you follow."),n("p",{},void 0,"Tell us more about the types of Genres you like to read, so that we can improve our recommendations to you!")):n("span",{},void 0,"Create a Goodreads account to set your reading preferences and get personalized recommendations!"),n("div",{className:"u-marginTopMedium u-marginBottomHuge"},void 0,n("div",{className:"gr-metaText"},void 0,t),n("a",{className:"gr-button u-marginTopMedium",href:o},void 0,"Subscribe to Goodreads Deals"))};f.propTypes={signedIn:s.PropTypes.bool,settingsUrl:s.PropTypes.string};var p=function(e){var t=void 0;t=(0,a.isEmpty)(e.deals)?"Recommended for You"===e.selectedCategory.headline?f(e):c(e):n(d["default"],{deals:e.deals,size:e.size,categories:e.categories});var r=(0,l["default"])("u-paddingTopSmall",e.className);return n("div",{className:r},void 0,t)};p.propTypes={deals:s.PropTypes.array,size:s.PropTypes.string,categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,signedIn:s.PropTypes.bool,settingsUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string,className:s.PropTypes.string},r["default"]=p},{"./deals_list":95,classnames:"classnames",lodash:"lodash",react:"react"}],91:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("lodash"),i=e("./deals_category_explorer"),l=o(i),u=e("./deals_category_list"),d=o(u),c=e("./deals_legalese"),f=o(c),p=e("./deals_ctas"),h=o(p),m=e("../../modules/deals/deals_helper"),g=e("../../modules/deals/landing_page/helper"),_=e("./deals_list_page_headers"),v={deals:s.PropTypes.array,categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,subscribed:s.PropTypes.bool,signedIn:s.PropTypes.bool,aboutUrl:s.PropTypes.string,settingsUrl:s.PropTypes.string,signupUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string},y=function(e){var t=(0,a.flatten)(e.deals);return n("div",{},void 0,n(_.WideDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl,titleLinkUrl:e.activeDealsUrl}),n("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,n("h1",{className:"pageHeader textColor"},void 0,e.selectedCategory.headline),n(d["default"],{deals:t,size:m.LAYOUT_SIZE.WIDE,categories:e.categories,selectedCategory:e.selectedCategory,signedIn:e.signedIn,settingsUrl:e.settingsUrl,activeDealsUrl:e.activeDealsUrl,className:"u-topGrayBorder"}),(0,a.isEmpty)(t)?null:n(f["default"],{})),n("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,n("div",{className:"u-marginTopXSmall"},void 0,n(l["default"],{categories:e.categories,selectedCategory:e.selectedCategory,activeDealsUrl:e.activeDealsUrl,size:m.LAYOUT_SIZE.WIDE}),n(h["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl}))),n("div",{className:"u-clearBoth"}))};y.propTypes=v;var b=function(e){return n("div",{},void 0,n(_.NarrowDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl,titleLinkUrl:e.activeDealsUrl}),n("div",{className:"u-bottomGrayBorder u-marginTopMedium"},void 0,n(l["default"],{categories:e.categories,selectedCategory:e.selectedCategory,activeDealsUrl:e.activeDealsUrl,size:m.LAYOUT_SIZE.NARROW}),n(d["default"],{deals:(0,a.flatten)(e.deals),size:m.LAYOUT_SIZE.NARROW,categories:e.categories,selectedCategory:e.selectedCategory,signedIn:e.signedIn,settingsUrl:e.settingsUrl,activeDealsUrl:e.activeDealsUrl})),n("div",{className:"gr-dealsCtas--mobile u-paddingLeftMedium u-paddingRightMedium"},void 0,n(h["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl})),n(f["default"],{}))};b.propTypes=v;var k=function(e){return e=(0,g.prepareProps)(e),n("div",{className:"gr-deals"},void 0,n("div",{className:"visibleWide"},void 0,y(e)),n("div",{className:"visibleNarrow"},void 0,b(e)))};r["default"]=k},{"../../modules/deals/deals_helper":11,"../../modules/deals/landing_page/helper":14,"./deals_category_explorer":89,"./deals_category_list":90,"./deals_ctas":92,"./deals_legalese":94,"./deals_list_page_headers":96,lodash:"lodash",react:"react"}],92:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"DealsCtas",propTypes:{subscribed:React.PropTypes.bool,aboutUrl:React.PropTypes.string,settingsUrl:React.PropTypes.string},renderSettingsLinks:function(){return n("div",{className:"u-topGrayBorder u-paddingTopMedium u-paddingBottomMedium"},void 0,n("a",{href:this.props.aboutUrl,className:"u-displayBlock u-marginBottomSmall"},void 0,"About Goodreads Deals"),n("a",{href:this.props.settingsUrl,className:"u-displayBlock"},void 0,"Update Your Settings"))},render:function(){return n("div",{},void 0,this.props.subscribed?this.renderSettingsLinks():null)}})},{"../gr_component_factory":114}],93:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("./deals_welcome_message"),i=o(a),l=e("./deals_lists"),u=o(l),d=e("./deals_category_explorer"),c=o(d),f=e("./deals_legalese"),p=o(f),h=e("./deals_ctas"),m=o(h),g=e("../../modules/deals/deals_helper"),_=e("../../modules/deals/landing_page/helper"),v=e("./deals_list_page_headers"),y={deals:s.PropTypes.array,categories:s.PropTypes.array,selectedCategory:s.PropTypes.object,subscribed:s.PropTypes.bool,aboutUrl:s.PropTypes.string,activeDealsUrl:s.PropTypes.string,settingsUrl:s.PropTypes.string,signupUrl:s.PropTypes.string,customHeader:s.PropTypes.string},b=function(e){return n("div",{},void 0,n("div",{className:"u-bottomGrayBorder"},void 0,n(v.NarrowDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl}),React.createElement(i["default"],e),n(c["default"],{categories:e.categories,selectedCategory:e.selectedCategory,size:g.LAYOUT_SIZE.NARROW}),n(u["default"],{deals:e.deals,categories:e.categories,size:g.LAYOUT_SIZE.NARROW})),n("div",{className:"gr-dealsCtas--mobile u-paddingLeftMedium u-paddingRightMedium"},void 0,n(m["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl,signupUrl:e.signupUrl})),n(p["default"],{}))};b.propTypes=y;var k=function(e){return n("div",{},void 0,n(v.WideDealsListPageHeader,{subscribed:e.subscribed,signupUrl:e.signupUrl}),n("div",{className:"gr-deals--desktop gr-deals--desktop__content620 u-paddingLeftNone"},void 0,React.createElement(i["default"],e),n(u["default"],{deals:e.deals,categories:e.categories,size:g.LAYOUT_SIZE.WIDE}),n(p["default"],{})),n("div",{className:"gr-deals--desktop gr-deals--desktop__content300"},void 0,n(c["default"],{categories:e.categories,activeDealsUrl:e.activeDealsUrl,selectedCategory:e.selectedCategory,size:g.LAYOUT_SIZE.WIDE}),n(m["default"],{subscribed:e.subscribed,aboutUrl:e.aboutUrl,settingsUrl:e.settingsUrl})),n("div",{className:"u-clearBoth"}))};k.propTypes=y;var S=function(e){return e=(0,_.prepareProps)(e),n("div",{className:"gr-deals"},void 0,n("div",{className:"visibleWide"},void 0,k(e)),n("div",{className:"visibleNarrow"},void 0,b(e)))};r["default"]=S},{"../../modules/deals/deals_helper":11,"../../modules/deals/landing_page/helper":14,"./deals_category_explorer":89,"./deals_ctas":92,"./deals_legalese":94,"./deals_list_page_headers":96,"./deals_lists":97,"./deals_welcome_message":98,react:"react"}],94:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"DealsLegalese",render:function(){return n("div",{className:"u-textAlignCenter u-topGrayBorder u-paddingTopMedium u-paddingBottomXSmall"},void 0,n("div",{className:"u-marginRightMedium u-marginLeftMedium"},void 0,n("div",{},void 0,n("small",{},void 0,"*Regular price provided by publisher or as shown on Amazon.com.")),n("small",{},void 0,"Prices and availability were accurate at the time the deal was featured. However, they may differ from those you see when you visit the retailer websites. The end date for the deal is provided by the publisher, and is subject to change.")))}})},{"../gr_component_factory":114}],95:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=e("react"),i=e("./deal"),l=o(i),u=e("moment"),d=o(u),c=function(e){var t=e.deals,r=e.listName,o=e.size,a=e.categories,i=(0,d["default"])().utc(),u=t.filter(function(e){return i.isBefore(e.expirationDate)});return(0,s.isEmpty)(u)?n("div",{}):n("div",{className:"gr-dealsList u-paddingBottomSmall"},void 0,r?n("h3",{className:"gr-h3 gr-dealsList__listName u-marginTopNone"},r,r):null,(0,s.map)(u,function(e){return n("div",{className:"gr-dealsList__listItem"},e.uri,n("div",{className:"u-anchorTarget",id:e.uri},void 0,n(l["default"],{deal:e,size:o,categories:a})))}))};c.propTypes={deals:a.PropTypes.array.isRequired,listName:a.PropTypes.string,size:a.PropTypes.string,categories:a.PropTypes.array},r["default"]=c},{"./deal":78,lodash:"lodash",moment:"moment",react:"react"}],96:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.WideDealsListPageHeader=r.NarrowDealsListPageHeader=void 0;var s=e("react"),a=e("append-query"),i=o(a),l={subscribed:s.PropTypes.bool.isRequired,signupUrl:s.PropTypes.string.isRequired,titleLinkUrl:s.PropTypes.string},u=r.NarrowDealsListPageHeader=function(e){var t=e.subscribed,r=e.signupUrl,o=e.titleLinkUrl,s=n("a",{href:(0,i["default"])(r,{from:"dlp-m-banner"}),className:"u-marginBottomSmall u-displayBlock"},void 0,n("div",{className:"gr-deals__banner gr-deals--mobile__banner",ariaLabel:"Goodreads Deals Logo"}));return o?n("div",{},void 0,t?null:s,n("a",{href:o},void 0,"Goodreads Deals")):t?n("h1",{className:"pageHeadline u-marginTopLarge"},void 0,"Goodreads Deals"):s};u.propTypes=l;var d=r.WideDealsListPageHeader=function(e){var t=e.subscribed,r=e.signupUrl,o=e.titleLinkUrl,s=n("h1",{className:"u-marginTopLarge"},void 0,"Goodreads Deals"),a=n("a",{href:(0,i["default"])(r,{from:"dlp-d-banner"})},void 0,n("h1",{className:"gr-deals__banner gr-deals--desktop__banner",ariaLabel:"Goodreads Deals Logo"}));return o?n("div",{},void 0,t?null:a,n("a",{href:o},void 0,"Goodreads Deals")):t?s:a};d.propTypes=l},{"append-query":"append-query",react:"react"}],97:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){function e(e,t){var r=[],o=!0,n=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(l){n=!0,s=l}finally{try{!o&&i["return"]&&i["return"]()}finally{if(n)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=e("lodash"),l=e("./deals_list"),u=o(l),d=function(e){return s("div",{},void 0,(0,i.map)((0,i.zip)(e.categories,e.deals),function(t){var r=n(t,2),o=r[0],a=r[1];return s(u["default"],{listName:o.headline,deals:a,size:e.size,categories:e.categories},o.headline)}))};d.propTypes={deals:a.PropTypes.array,categories:a.PropTypes.array,size:a.PropTypes.string},r["default"]=d},{"./deals_list":95,lodash:"lodash",react:"react"}],98:[function(e,t,r){"use strict";var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=function(e){var t=e.firstTimeDealsUser,r=e.user,n=e.settingsUrl;return t?o("div",{className:"gr-infoMessageBox u-marginBottomMedium"},void 0,o("h3",{className:"gr-h3"},void 0,"Congratulations ",r.name,"!"),o("div",{},void 0,"You’re signed up for Goodreads Deals. You will now receive deals from genres you love! You can update your preferences anytime from the ",o("a",{href:n},void 0,"Settings page"),".")):o("div",{})};s.propTypes={firstTimeDealsUser:n.PropTypes.bool,user:n.PropTypes.object,settingsUrl:n.PropTypes.string};var a={},i=function(e){var t=e.readerRevenueCampaign,r=a[t]||s;return React.createElement(r,e)};i.propTypes={readerRevenueCampaign:n.PropTypes.string},r["default"]=i},{react:"react"}],99:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();Object.defineProperty(r,"__esModule",{value:!0});var u=e("react"),d=e("../shared/cookies"),c=o(d),f=function(e){function t(e){n(this,t);var r=s(this,Object.getPrototypeOf(t).call(this,e));return r.state={visible:null==c["default"].get(r.cookieName())},r.onDismiss=r.onDismiss.bind(r),r}return a(t,e),l(t,[{key:"cookieName",value:function(){return"mgphn_"+this.props.id}},{key:"onDismiss",value:function(){this.setState({visible:!1}),c["default"].set(this.cookieName(),!1)}},{key:"descriptionMarkup",value:function(){return{__html:this.props.description}}},{key:"render",value:function(){return this.state.visible?i("div",{id:"megaphone",className:"megaphone"},void 0,i("h2",{className:"megaphone__title"},void 0,this.props.title),i("div",{className:"megaphone__description",dangerouslySetInnerHTML:this.descriptionMarkup()}),i("a",{className:"megaphone__button","aria-label":"Sign up for Goodreads",href:this.props.url},void 0,this.props.buttonText),i("span",{className:"megaphone__close",onClick:this.onDismiss})):null}}]),t}(u.Component);r["default"]=f,f.propTypes={id:u.PropTypes.string.isRequired,
buttonText:u.PropTypes.string.isRequired,description:u.PropTypes.string.isRequired,title:u.PropTypes.string.isRequired,url:u.PropTypes.string.isRequired}},{"../shared/cookies":164,react:"react"}],100:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=e("./gr_component_factory"),u=o(l);r["default"]=u["default"].createClass({displayName:"DotSeparatedElements",propTypes:{elements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.oneOfType([a["default"].PropTypes.element,a["default"].PropTypes.string])).isRequired,separator:a["default"].PropTypes.element},getDefaultProps:function(){return{separator:n("span",{},void 0," · ")}},joinElementsWithSeparator:function(){var e=this,t=(0,i.compact)(this.props.elements);return(0,i.transform)(t,function(r,o,n){r.push(o),n+1!==t.length&&r.push(e.props.separator)})},render:function(){return n("span",{className:this.props.className},void 0,(0,i.map)(this.joinElementsWithSeparator(),function(e,t){return n("span",{},t,e)}))}})},{"./gr_component_factory":114,lodash:"lodash",react:"react"}],101:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"DropDownList",propTypes:{showMoreLink:a["default"].PropTypes.bool,moreLinkURL:a["default"].PropTypes.string,moreLinkText:a["default"].PropTypes.string},getDefaultProps:function(){return{showMoreLink:!1,moreLinkURL:null,moreLinkText:"…More"}},render:function(){return n("div",{},void 0,this.props.children,this.props.showMoreLink&&null!==this.props.moreLinkURL?n("a",{className:"dropDownList__listItem--moreLink",href:this.props.moreLinkURL},void 0,this.props.moreLinkText):null)}})},{"./gr_component_factory":114,react:"react"}],102:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("reflux"),d=o(u),c=e("./gr_component_factory"),f=o(c),p=e("../react_mixins/hover_intent"),h=o(p),m=e("classnames"),g=o(m),_=e("react-onclickoutside"),v=o(_),y=e("../modules/keys"),b=o(y),k=e("../react_stores/user_agent_capabilities_store"),S=o(k),T={HOVER:"hover",CLICK:"click"},P={LEFT:"left",RIGHT:"right"},N=100,w=N;r["default"]=f["default"].createClass({displayName:"Dropdown",mixins:[h["default"],v["default"],d["default"].connect(S["default"],"userAgentCapabilities")],propTypes:{alignment:a["default"].PropTypes.oneOf(l["default"].values(P)),fallbackUrl:a["default"].PropTypes.string,hoverTriggerClickUrl:a["default"].PropTypes.string,isInSiteHeader:a["default"].PropTypes.bool,onShowCallback:a["default"].PropTypes.func,tooltipText:a["default"].PropTypes.string,trigger:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]).isRequired,triggerEventType:a["default"].PropTypes.oneOf(l["default"].values(T))},statics:{TriggerEventTypes:T},getTriggerEventType:function(){return this.state.userAgentCapabilities.touch?T.CLICK:this.props.triggerEventType},getInitialState:function(){return{dropdownOpen:!1}},getDefaultProps:function(){return{triggerEventType:T.CLICK,alignment:P.LEFT}},hide:function(){this.setState({dropdownOpen:!1})},show:function(){this.setState({dropdownOpen:!0}),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){this.props.children&&e.preventDefault(),this.state.dropdownOpen?this.hide():this.show()},openList:function(e){b["default"].isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),b["default"].isArrowDown(e.keyCode)?this.show():this.toggle(e)):b["default"].isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},handleMouseEnter:function(){this.onEnterIntent(this.show,N)},handleMouseLeave:function(){this.onLeaveIntent(this.hide,w)},handleTriggerClick:function(e){return this.state.dropdownOpen&&this.props.triggerEventType===T.HOVER&&this.state.userAgentCapabilities.touch!==!0?void(this.props.hoverTriggerClickUrl||e.preventDefault()):void this.toggle(e)},triggerClasses:function(){return(0,g["default"])(this.withBemModifiers(["dropdown__trigger"]),{"dropdown__trigger--buttonReset":l["default"].isUndefined(this.props.fallbackUrl)},{"dropdown__trigger--triggerEventTypeHover":this.props.triggerEventType===T.HOVER},{"dropdown__trigger--personalNav":"true"===this.props.isInPersonalNav},{"dropdown__trigger--active":this.state.dropdownOpen},{"dropdown__trigger--personalNavActive":"true"===this.props.isInPersonalNav&&this.state.dropdownOpen},{"dropdown__trigger--activeSiteHeader":this.state.dropdownOpen&&this.props.isInSiteHeader})},renderTriggerButton:function(){return n("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,onClick:this.handleTriggerClick,onKeyDown:this.openList,title:this.props.tooltipText},void 0,this.props.trigger)},renderTriggerLink:function(){return n("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.handleTriggerClick,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,title:this.props.tooltipText},void 0,this.props.trigger)},render:function(){var e=(0,g["default"])(this.withBemModifiers("dropdown")),t=(0,g["default"])(this.withBemModifiers("dropdown__menu"),"gr-box gr-box--withShadowLarge",{"dropdown__menu--show":this.state.dropdownOpen}),r=l["default"].isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),o=n("div",{className:t,role:"menu"},void 0,this.props.children);switch(this.getTriggerEventType()){case T.HOVER:return n("div",{className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,r,o);case T.CLICK:return n("div",{className:e},void 0,r,o)}}})},{"../modules/keys":22,"../react_mixins/hover_intent":211,"../react_stores/user_agent_capabilities_store":232,"./gr_component_factory":114,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],103:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s);r["default"]=a["default"].createClass({displayName:"error_message.js",propTypes:{componentName:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{className:"gr-errorMessage"},void 0,"There was an issue rendering ",this.props.componentName)}})},{react:"react"}],104:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../../../gr_component_factory"),l=o(i),u=e("../../../../shared/gr_prop_types"),d=o(u),c=e("classnames"),f=o(c),p=e("../../../../author/author_badge"),h=o(p);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultAuthor",propTypes:{result:d["default"].searchResults.author().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"Author pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Author",a["default"].createElement(h["default"],this.props.result.object)))}})},{"../../../../author/author_badge":67,"../../../../gr_component_factory":114,"../../../../shared/gr_prop_types":165,classnames:"classnames",react:"react"}],105:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../../../gr_component_factory"),l=o(i),u=e("../../../../shared/gr_prop_types"),d=o(u),c=e("classnames"),f=o(c),p=e("../../../../author/author_badge"),h=o(p);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultBook",propTypes:{result:d["default"].searchResults.book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","gr-universalSearchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.imageUrl,alt:"Cover pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.title),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"by ",this.props.result.object.authorName,a["default"].createElement(h["default"],this.props.result.object))))}})},{"../../../../author/author_badge":67,"../../../../gr_component_factory":114,"../../../../shared/gr_prop_types":165,classnames:"classnames",react:"react"}],106:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../../../gr_component_factory"),l=o(i),u=e("../../../../shared/gr_prop_types"),d=o(u),c=e("classnames"),f=o(c);r["default"]=l["default"].createClass({displayName:"UniversalSearchResultUser",propTypes:{result:d["default"].searchResults.user().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.result)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.result.object.profileImage,alt:"User pic"}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-universalSearchResult__mainText gr-universalSearchResult__mainText--navbar u-defaultType"},void 0,this.props.result.object.name)),n("div",{className:"gr-universalSearchResult__secondaryText gr-universalSearchResult__secondaryText--navbar"},void 0,"Goodreads User"))}})},{"../../../../gr_component_factory":114,"../../../../shared/gr_prop_types":165,classnames:"classnames",react:"react"}],107:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../../../gr_component_factory"),c=o(d),f=e("reflux"),p=o(f),h=e("react-onclickoutside"),m=o(h),g=e("classnames"),_=o(g),v=e("../../../../modules/keys"),y=o(v),b=e("../../../../react_stores/experimental/search/universal_search_store_factory"),k=o(b),S=e("./universal_search_results"),T=o(S),P=e("../../../spinner"),N=o(P),w=e("../../../../react_mixins/factory_store_mixin"),R=o(w);r["default"]=c["default"].createClass({displayName:"UniversalSearch",mixins:[m["default"],p["default"].ListenerMixin,(0,R["default"])(k["default"])],propTypes:{onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:7,closeAfterResultChosen:!1}},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){this.actions.search(e.target.value,this.props.autocompleteUrl,this.props.maxResults)},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=(0,_["default"])("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-iconButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?s("span",{className:e},void 0,s(N["default"],{})):s("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,_["default"])(this.withBemModifiers("searchBox")),t=(0,_["default"])(this.withBemModifiers("searchBox__input"));return s("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,s("form",{autoComplete:"off",action:this.props.searchPath,role:"search","aria-label":"Search for books to add to your shelves"},void 0,s("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books/authors","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(T["default"],n({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../../../modules/keys":22,"../../../../react_mixins/factory_store_mixin":209,"../../../../react_stores/experimental/search/universal_search_store_factory":216,"../../../gr_component_factory":114,"../../../spinner":177,"./universal_search_results":108,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],108:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("classnames"),d=o(u),c=e("../../../drop_down_list"),f=o(c),p=e("./results/universal_search_result_book"),h=o(p),m=e("./results/universal_search_result_author"),g=o(m),_=e("./results/universal_search_result_user"),v=o(_),y=e("../../../shared/gr_prop_types"),b=o(y),k=e("../../../gr_component_factory"),S=o(k),T={author:g["default"],book:h["default"],friend:v["default"]};r["default"]=S["default"].createClass({displayName:"UniversalSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.oneOfType([b["default"].searchResults.author(),b["default"].searchResults.book(),b["default"].searchResults.user()])},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-buttonAsLink","searchResults__lastItem",this.withBemElement("gr-universalSearchResults","lastItem"));return n("button",{className:t,type:"submit"},void 0,e)},renderResult:function(e){var t=this,r=T[e.type];return n("div",{className:(0,d["default"])("gr-universalSearchResults__item",{"gr-universalSearchResults__item--active":e===this.props.activeResult}),onMouseOver:function(){t.props.mouseoverAction(e)}},e.object.id,n(r,{result:e,onChooseResult:this.props.onChooseResult}))},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("gr-universalSearchResults"),"gr-box","gr-box--withShadow");return n("div",{className:t,id:"universalSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Universal search results"},void 0,n(f["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return e.renderResult(t)}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../../../drop_down_list":101,"../../../gr_component_factory":114,"../../../shared/gr_prop_types":165,"./results/universal_search_result_author":104,"./results/universal_search_result_book":105,"./results/universal_search_result_user":106,classnames:"classnames",lodash:"lodash",react:"react"}],109:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=e("reflux"),u=o(l),d=e("../gr_component_factory"),c=o(d),f=e("../../react_stores/facebook_store"),p=o(f),h=e("../../react_actions/facebook_actions"),m=o(h),g=e("classnames"),_=o(g),v="Post to your facebook timeline";r["default"]=c["default"].createClass({mixins:[u["default"].connect(p["default"],"facebookStore")],displayName:"facebookTimelinePublishToggle",propTypes:{cogAction:a["default"].PropTypes.oneOf((0,i.values)(p["default"].COG_ACTIONS)),additionalText:a["default"].PropTypes.string},statics:{COG_ACTIONS:p["default"].COG_ACTIONS},enablePublishing:function(){m["default"].enablePublishPermission()},renderCheckbox:function(){var e=this,t=this.state.facebookStore;return n("input",{className:"facebookTimelinePublishToggle__checkBox",type:"checkbox",value:"1",checked:t.cog[this.props.cogAction],onChange:function(){m["default"].togglePublishPermission(e.props.cogAction)}})},renderFacebookIcon:function(){var e=this.state.facebookStore,t=e.cog[this.props.cogAction]?"Enabled":"Disabled";return n("img",{className:"facebookTimelinePublishToggle__icon",src:e.cog.enabled?e.images.fbIconUrl:e.images.fbIconDisabledUrl,alt:t+" Facebook timeline posting permission"})},renderPublishingEnabledState:function(){return n("label",{"aria-label":v},void 0,this.renderCheckbox(),this.renderFacebookIcon())},renderPublishingDisabledState:function(){return n("button",{className:"gr-iconButton",onClick:this.enablePublishing,"aria-label":v},void 0,this.renderFacebookIcon())},render:function(){var e=(0,_["default"])(this.withBemModifiers("facebookTimelinePublishToggle")),t=this.state.facebookStore;return t.isUserConnected?n("div",{className:e},void 0,(0,i.isEmpty)(this.props.additionalText)?null:n("span",{className:"u-marginRightTiny"},void 0,this.props.additionalText),t.cog.enabled?this.renderPublishingEnabledState():this.renderPublishingDisabledState()):null}})},{"../../react_actions/facebook_actions":34,"../../react_stores/facebook_store":217,"../gr_component_factory":114,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],110:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("./gr_component_factory"),d=o(u),c=e("reflux"),f=o(c),p=e("./genre_checkbox"),h=o(p),m=e("./../react_actions/modal_actions"),g=o(m),_=e("../react_actions/favorite_genres_form_actions"),v=o(_),y=e("../react_stores/favorite_genres_form_store"),b=o(y);r["default"]=d["default"].createClass({displayName:"FavoriteGenresForm",mixins:[f["default"].connect(b["default"],"favoriteGenresFormStore")],propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},getDefaultProps:function(){return{favoriteGenres:[]}},onSubmit:function(e){v["default"].submitSelectedGenres(),g["default"].closeModal(),e.preventDefault()},renderGenreCheckboxes:function(){var e=this;return n("div",{className:"gr-genresForm__checkBoxes"},void 0,l["default"].map(this.props.genres,function(t){return n(h["default"],{genre:t.name,isFavorited:l["default"].includes(e.state.favoriteGenresFormStore.selectedGenres,t.name)},t.name)}))},render:function(){return n("div",{className:"gr-genresForm"},void 0,n("div",{className:"gr-genresForm__title"},void 0,"Follow Your Favorite Genres"),n("div",{className:"gr-genresForm__description"},void 0,"We use your favorite genres to make better book recommendations and tailor what you see in your Updates feed."),n("form",{action:"/user/edit_fav_genres","data-remote":"true",method:"post"},void 0,this.renderGenreCheckboxes(),n("button",{type:"submit",onClick:this.onSubmit,className:"gr-button gr-button--large"},void 0,"Save")))}})},{"../react_actions/favorite_genres_form_actions":36,"../react_stores/favorite_genres_form_store":218,"./../react_actions/modal_actions":40,"./genre_checkbox":113,"./gr_component_factory":114,lodash:"lodash",react:"react",reflux:"reflux"}],111:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("classnames"),d=o(u);r["default"]=l["default"].createClass({displayName:"FlagForAbuseLink",propTypes:{flagForAbuseUrl:a["default"].PropTypes.string.isRequired},render:function(){var e=(0,d["default"])("gr-metaText","gr-hyperlink--naked","gr-hyperlink","gr-flag");return n("a",{href:this.props.flagForAbuseUrl,className:e},void 0,"Flag")}})},{"../gr_component_factory":114,classnames:"classnames",react:"react"}],112:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=e("classnames"),u=o(l),d=e("./close_button"),c=o(d),f={ERROR:"error",INFO:"info",NOTICE_DEPRECATED:"notice",SUCCESS:"success",WARNING:"warning"};r["default"]=a["default"].createClass({displayName:"FlashMessage",propTypes:{category:a["default"].PropTypes.oneOf((0,i.values)(f)),message:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{isVisible:!0}},hideMessage:function(){this.setState({isVisible:!1})},flashMessageMarkup:function(){return{__html:this.props.message}},render:function(){if((0,i.isEmpty)(this.props.message))return null;var e=(0,u["default"])("gr-flashMessage",{"gr-flashMessage--dismissed":!this.state.isVisible,"gr-flashMessage--error":this.props.category===f.ERROR,"gr-flashMessage--info":this.props.category===f.INFO,"gr-flashMessage--warning":this.props.category===f.WARNING,"gr-flashMessage--success":this.props.category===f.SUCCESS});return n("div",{className:e,role:"alert"},void 0,n(c["default"],{action:this.hideMessage,className:"gr-flashMessage__dismissButton"}),n("span",{dangerouslySetInnerHTML:this.flashMessageMarkup()}))}})},{"./close_button":72,classnames:"classnames",lodash:"lodash",react:"react"}],113:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("classnames"),d=o(u),c=e("../react_actions/favorite_genres_form_actions"),f=o(c);r["default"]=l["default"].createClass({displayName:"GenreCheckbox",propTypes:{genre:a["default"].PropTypes.string,isFavorited:a["default"].PropTypes.bool.isRequired},onCheckboxChange:function(){this.props.isFavorited?f["default"].deselectFavoriteGenre(this.props.genre):f["default"].selectFavoriteGenre(this.props.genre)},render:function(){var e=(0,d["default"])("gr-genresForm__genreLabel",{"gr-genresForm__genreLabel--selected":this.props.isFavorited});return n("label",{className:e},void 0,n("input",{name:"favorites["+this.props.genre+"]",type:"hidden",value:"false"}),a["default"].createElement("input",{name:"favorites["+this.props.genre+"]",type:"checkbox",value:"true","data-genre":this.props.genre,ref:"checkbox",defaultChecked:this.props.isFavorited,onChange:this.onCheckboxChange}),n("span",{className:"u-verticalAlignMiddle u-marginLeftTiny"},void 0,this.props.genre))}})},{"../react_actions/favorite_genres_form_actions":36,"./gr_component_factory":114,classnames:"classnames",react:"react"}],114:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=e("react"),i=o(a),l=e("../react_mixins/bem_modifiers"),u=o(l),d=e("../react_mixins/deploy_service"),c=o(d),f=e("react-addons-pure-render-mixin"),p=o(f),h=e("../react_mixins/tracking_data_attributes_mixin"),m=o(h),g=e("./error_message"),_=o(g),v=e("../modules/env_utils"),y=o(v),b=e("../modules/gr_error_reporting"),k=o(b),S=[p["default"],u["default"],c["default"],m["default"]],T={showErrorMessage:"production"===y["default"].DEVELOPMENT},P=function(e,t){var r=e.render;t=(0,s.merge)({},T,t),e.render=function(){try{return r.apply(this,arguments)}catch(o){return k["default"].notifyException(o,"Failed to render "+e.displayName),
t.showErrorMessage?n(_["default"],{componentName:e.displayName}):null}}},N=function(e){if((0,s.isEmpty)(e))throw new Error("GrError: Missing component name. Please make sure `displayName` attribute is defined while creating a React class using GrComponentFactory.createClass.")},w=function(e){var t=e.mixins||[];e.mixins=t.concat(S)},R=function(e,t){return w(e),"production"!==y["default"].TEST&&P(e,t),e};r["default"]={createClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return N(e.displayName),i["default"].createClass(R(e,t))}}},{"../modules/env_utils":19,"../modules/gr_error_reporting":21,"../react_mixins/bem_modifiers":207,"../react_mixins/deploy_service":208,"../react_mixins/tracking_data_attributes_mixin":212,"./error_message":103,lodash:"lodash",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],115:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shape_icon"),d=o(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"GroupIcon",propTypes:{group:a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!1,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.group;return n(d["default"],{imageUrl:e.iconUrl,imageAlt:e.name,linkUrl:e.url,shape:c.ICON_SHAPES.ROUND_SQUARE,size:this.props.size,includeLink:this.props.includeLink})}})},{"../../modules/shape_icon_values":24,"../gr_component_factory":114,"../shape_icon":160,react:"react"}],116:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal_trigger"),d=o(u),c=e("../modal"),f=o(c),p=e("../spinner"),h=o(p),m=e("../../modules/ajax/ajax_helper");r["default"]=l["default"].createClass({displayName:"PreviewBroadcast",propTypes:{previewBroadcastURL:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{fetching:!1}},requestPreview:function(e,t){var r=this;(0,m.httpRequest)(this.props.previewBroadcastURL,{method:"GET",data:{message:{subject:e,body:t}}}).done(function(e){r.setState({modalHTML:{__html:e},fetching:!1})}).fail(function(){r.setState({modalHTML:{__html:"<div>There was an error processing your request.</div>"},fetching:!1})})},handlePreview:function(){var e=this,t=document.getElementById("message_body").value,r=document.getElementById("message_subject").value;this.setState({fetching:!0},function(){return e.requestPreview(r,t)})},renderModal:function(){return this.state.fetching?null:n(f["default"],{id:"previewBroadcast",centered:!0,bemModifiers:"previewBroadcast"},void 0,n("div",{className:"modalMessageBox"},void 0,n("h3",{className:"modalMessageBox__headerText"},void 0,"Message Preview"),n("div",{dangerouslySetInnerHTML:this.state.modalHTML})))},renderModalTrigger:function(){return this.state.fetching?n(h["default"],{isSmall:!0}):n(d["default"],{id:"previewBroadcast"},void 0,n("button",{className:"gr-buttonAsLink previewBroadcast__linkText",onClick:this.handlePreview},void 0,"(preview)"))},render:function(){var e=this.renderModal(),t=this.renderModalTrigger();return n("div",{className:"previewBroadcast"},void 0,n("div",{className:"previewBroadcast__openPreviewContainer"},void 0,t,e))}})},{"../../modules/ajax/ajax_helper":5,"../gr_component_factory":114,"../modal":141,"../modal_trigger":142,"../spinner":177,react:"react"}],117:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../dropdown"),f=o(c),p=e("./favorite_genres_pane"),h=o(p),m=e("./featured_genres"),g=o(m),_=e("./genre_list"),v=o(_),y=e("../menu_link"),b=o(y),k=e("../../react_actions/featured_genres_actions"),S=o(k);r["default"]=d["default"].createClass({displayName:"BrowseMenu",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string.isRequired,choiceAwardsUrl:a["default"].PropTypes.string.isRequired,dealsUrl:a["default"].PropTypes.string.isRequired,editorsPicksUrl:a["default"].PropTypes.string.isRequired,favoriteGenres:a["default"].PropTypes.array,sponsoredGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string.isRequired,listUrl:a["default"].PropTypes.string.isRequired,newReleasesUrl:a["default"].PropTypes.string.isRequired,recommendationsUrl:a["default"].PropTypes.string.isRequired,blogUrl:a["default"].PropTypes.string.isRequired,signedIn:a["default"].PropTypes.bool},render:function(){var e=function(){S["default"].requestFeaturedBooks()},t=n("span",{},void 0,"Browse ▾");return n(f["default"],{trigger:t,triggerEventType:f["default"].TriggerEventTypes.HOVER,fallbackUrl:this.props.browseUrl,bemModifiers:"siteHeader",isInSiteHeader:!0,onShowCallback:e},void 0,n("div",{className:"siteHeader__browseMenuDropdown"},void 0,n("ul",{className:"siteHeader__subNav"},void 0,n(b["default"],{href:this.props.recommendationsUrl,linkText:"Recommendations",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.dealsUrl,linkText:"Deals",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.choiceAwardsUrl,linkText:"Choice Awards",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.giveawayUrl,linkText:"Giveaways",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.newReleasesUrl,linkText:"New Releases",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.listUrl,linkText:"Lists",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.editorsPicksUrl,linkText:"News & Interviews",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.browseUrl,linkText:"Explore",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.blogUrl,linkText:"Blog",linkClass:"siteHeader__subNavLink"}),n("div",{className:"siteHeader__sponsoredFillSpace"}),n(b["default"],{href:"https://www.goodreads.com/track/daily_click?pmet_click_tid=AEP_Desktop_Header_BrowseEntrypoint&tid=AEP_Desktop_Header_BrowseEntrypoint&url=https://www.goodreads.com/audible",linkText:n("div",{},void 0,n("div",{className:"siteHeader__navDivider"}),n("span",{},void 0,"Listen with Audible")),linkClass:"siteHeader__sponsoredNavLink"}),n("div",{className:"siteHeader__sponsoredLabel"},void 0,n("span",{className:"siteHeader__sponsoredIcon gr-newsfeedItem__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),n("span",{className:"featuredGenres__sponsoredLabel siteHeader__sponsoredText"},void 0,"Sponsored"))),this.renderSpotlight()))},classesWithModifier:function(e){return"siteHeader__spotlight siteHeader__spotlight--"+e},renderGenreList:function(){return n("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,n(v["default"],{genres:this.props.genres}))},renderFeaturedGenres:function(){return n("div",{className:this.classesWithModifier("browseMenu")},void 0,n(g["default"],{favoriteGenres:this.props.favoriteGenres,sponsoredGenres:this.props.sponsoredGenres,adId:this.props.adId}))},renderFavoriteGenresPane:function(){return n("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,n(h["default"],{genres:this.props.genres}))},renderSpotlight:function(){return this.props.signedIn?l["default"].isEmpty(this.props.favoriteGenres)?this.renderFavoriteGenresPane():this.renderFeaturedGenres():this.renderGenreList()}})},{"../../react_actions/featured_genres_actions":37,"../dropdown":102,"../gr_component_factory":114,"../menu_link":140,"./favorite_genres_pane":122,"./featured_genres":123,"./genre_list":126,lodash:"lodash",react:"react"}],118:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("reflux"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../dropdown"),f=o(c),p=e("../menu_link"),h=o(p),m=e("../ads/google_banner_ad"),g=o(m),_=e("../../react_stores/google_ads_store"),v=o(_),y=e("../../react_actions/google_ads_actions"),b=o(y);r["default"]=d["default"].createClass({displayName:"CommunityMenu",mixins:[l["default"].connect(v["default"],"googleAdStore")],propTypes:{communityUrl:a["default"].PropTypes.string.isRequired,featuredAskAuthorUrl:a["default"].PropTypes.string.isRequired,groupsUrl:a["default"].PropTypes.string.isRequired,discussionsUrl:a["default"].PropTypes.string.isRequired,quotesUrl:a["default"].PropTypes.string.isRequired,eventUrl:a["default"].PropTypes.string,peopleUrl:a["default"].PropTypes.string,quizzesUrl:a["default"].PropTypes.string,storiesUrl:a["default"].PropTypes.string,triviaUrl:a["default"].PropTypes.string},renderSpotlightAd:function(){if(this.isFeatureEnabled("ads_uxo_nav_spotlight")){var e=v["default"].findAd(/goodr.nav.browse.300x250/);if(e)return n("div",{className:"siteHeader__spotlight--withoutSubMenu siteHeader__spotlight--withSpotlightAd googleAd"},void 0,n("div",{className:"spotlightAd"},void 0,n("div",{className:"featuredGenres__book"},void 0,n("div",{className:"u-marginTopTiny"},void 0,n(g["default"],{adId:e.id,delayImpressionTracking:!0})))))}},renderMenuLink:function(e,t){return e?n(h["default"],{href:e,linkText:t,linkClass:"siteHeader__subNavLink"}):void 0},render:function(){var e=n("span",{},void 0,"Community ▾"),t=function(){var e=v["default"].findAd(/goodr.nav.browse.300x250/);e&&b["default"].trackImpression(e.id,e.ad.impressionCode)};return n(f["default"],{trigger:e,triggerEventType:f["default"].TriggerEventTypes.HOVER,bemModifiers:["siteHeader"],fallbackUrl:this.props.communityUrl,isInSiteHeader:!0,onShowCallback:t},void 0,n("ul",{className:"siteHeader__subNav"},void 0,this.renderMenuLink(this.props.groupsUrl,"Groups"),this.renderMenuLink(this.props.discussionsUrl,"Discussions"),this.renderMenuLink(this.props.quotesUrl,"Quotes"),this.renderMenuLink(this.props.featuredAskAuthorUrl,"Ask the Author"),this.renderMenuLink(this.props.triviaUrl,"Trivia"),this.renderMenuLink(this.props.quizzesUrl,"Quizzes"),this.renderMenuLink(this.props.storiesUrl,"Creative Writing"),this.renderMenuLink(this.props.peopleUrl,"People"),this.renderMenuLink(this.props.eventUrl,"Events")),this.renderSpotlightAd())}})},{"../../react_actions/google_ads_actions":38,"../../react_stores/google_ads_store":221,"../ads/google_banner_ad":58,"../dropdown":102,"../gr_component_factory":114,"../menu_link":140,react:"react",reflux:"reflux"}],119:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../gr_component_factory"),a=o(s),i=e("../../shared/gr_prop_types"),l=o(i),u=e("append-query"),d=o(u),c=e("../../../modules/shape_icon_values"),f=e("../../time/relative_time"),p=o(f),h=e("../../group/group_icon"),m=o(h),g=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsGroupBanner",propTypes:{group:l["default"].group()},render:function(){var e=this.props.group;return n("a",{href:(0,d["default"])(e.url,{ref:g.URLTrackingParams.DISCUSSIONS_PANE_GROUP}),"aria-label":"Visit your group "+this.props.group.name,className:"gr-hyperlink\n                          gr-hyperlink--naked\n                          gr-hyperlink--noUnderline"},void 0,n("div",{className:"gr-mediaFlexbox\n                              gr-mediaFlexbox--alignItemsCenter\n                              gr-headerDiscussions__groupBanner"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,n(m["default"],{group:e,size:c.ICON_SIZES.SMALL})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__groupTitle"},void 0,e.name),n("small",{},void 0,"Active ",n(p["default"],{time:e.lastActiveAt,longFormat:!0})))))}})},{"../../../analytics/url_tracking_params":2,"../../../modules/shape_icon_values":24,"../../gr_component_factory":114,"../../group/group_icon":115,"../../shared/gr_prop_types":165,"../../time/relative_time":180,"append-query":"append-query"}],120:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../gr_component_factory"),a=o(s),i=e("../../shared/gr_prop_types"),l=o(i),u=e("append-query"),d=o(u),c=e("moment"),f=o(c),p=e("../../time/relative_time"),h=o(p),m=e("../../dot_separated_elements"),g=o(m),_=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsTopic",propTypes:{topic:l["default"].topic()},getTitleAriaLabel:function(){var e=void 0;return e=this.props.topic.newPosts?"New comments in topic "+this.props.topic.title:"Topic "+this.props.topic.title,e+=this.props.topic.folder?" in folder "+this.props.topic.folder.name+".":".",e+=" "+(0,f["default"])(this.props.topic.updatedAt).fromNow()+".",this.props.topic.newPosts&&(e+=" "+this.props.topic.newPosts+"."),e},getTopicUrl:function(){var e=this.props.topic.newCommentsUrl?this.props.topic.newCommentsUrl:this.props.topic.url;return(0,d["default"])(e,{ref:_.URLTrackingParams.DISCUSSIONS_PANE_DISCUSSION})},renderFolder:function(){return this.props.topic.folder?n("span",{className:"gr-headerDiscussions__topicFolderTitle"},void 0,"in ",this.props.topic.folder.name):null},renderPosts:function(){return this.props.topic.newPosts?n("div",{className:"gr-smallAlert"},void 0,this.props.topic.newPosts):n("small",{},void 0,this.props.topic.totalPosts)},render:function(){var e=this.props.topic,t=[this.renderPosts(),n("small",{},void 0,n(h["default"],{time:e.updatedAt,longFormat:!0}))];return n("a",{className:"gr-headerDiscussions__topic\n                         gr-hyperlink\n                         gr-hyperlink--noUnderline",href:this.getTopicUrl(),"aria-label":this.getTitleAriaLabel()},void 0,n("span",{className:"gr-headerDiscussions__topicTitle"},void 0,e.title)," ",this.renderFolder(),n("div",{className:"gr-headerDiscussions__posts"},void 0,n(g["default"],{elements:t,separator:n("small",{className:"u-marginLeftTiny u-marginRightTiny"},void 0,"·")})))}})},{"../../../analytics/url_tracking_params":2,"../../dot_separated_elements":100,"../../gr_component_factory":114,"../../shared/gr_prop_types":165,"../../time/relative_time":180,"append-query":"append-query",moment:"moment"}],121:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("reflux"),i=o(a),l=e("lodash"),u=e("append-query"),d=o(u),c=e("../gr_component_factory"),f=o(c),p=e("../dropdown"),h=o(p),m=e("../../react_actions/discussions_pane_actions"),g=o(m),_=e("../../react_stores/group_store"),v=o(_),y=e("./discussions/group_banner"),b=o(y),k=e("./discussions/topic"),S=o(k),T=e("../spinner"),P=o(T),N=e("../shape_icon"),w=o(N),R=e("../../analytics/url_tracking_params");r["default"]=f["default"].createClass({mixins:[i["default"].connect(v["default"],"groupStore")],displayName:"DiscussionsPane",propTypes:{discussionsUrl:s.PropTypes.string.isRequired,groupsUrl:s.PropTypes.string.isRequired},getGroupState:function(){return this.state.groupStore},renderAllUnreadPostsLink:function(e){var t="All unread posts in group "+e.name;return n("a",{className:"gr-headerDiscussions__moreDiscussionsLink gr-hyperlink u-textAlignCenter","aria-label":t,href:(0,d["default"])(e.allUnreadPostsUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS})},void 0,"All unread posts")},renderDiscussionsList:function(){var e=this;return(0,l.map)(this.getGroupState().groups,function(t){return n("div",{},"discussionsGroup"+t.group.id,n(b["default"],{group:t.group}),(0,l.map)(t.topics,function(e){return n(S["default"],{topic:e},"discussionsTopic"+e.id)}),e.renderAllUnreadPostsLink(t.group))})},renderSparseState:function(){var e=this.getGroupState().sparse;return n("div",{className:"gr-headerDiscussions u-defaultType"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeading"},void 0,"Group Discussions"),n("div",{},void 0,n("div",{className:"gr-headerDiscussions__sparseBody"},void 0,n("div",{className:"gr-headerDiscussions__groupsExplanation"},void 0,"Want to connect with readers who love the same books as you? Goodreads has a group for almost any interest."),n("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,n(w["default"],{imageUrl:e.groupModeratorImageUrl,imageAlt:"Moderator of a book group"})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"I\'ve been reading more since I became involved with groups. I especially love reading challenges…"'),n("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Moderator of a book group"),n("a",{className:"gr-hyperlink",href:(0,d["default"])(e.groupsWithReadingChallengesUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES})},void 0,"See groups with reading challenges"))),n("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,n(w["default"],{className:"gr-mediaFlexbox__media",imageUrl:e.groupMemberImageUrl,imageAlt:"Member of a group"}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"When I first joined a group, I finally felt like I had friends interested in the same books as me."'),n("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Member of a group"),n("a",{className:"gr-hyperlink",href:(0,d["default"])(e.popularGroupsUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_POPULAR})},void 0,"See popular groups"))))),n("div",{className:"u-topGrayBorder gr-headerDiscussions__moreDiscussionsLink u-textAlignCenter u-marginTopSmall"},void 0,n("a",{className:"gr-hyperlink",href:(0,d["default"])(e.allGroupsUrl,{ref:R.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_ALL})},void 0,"View all groups")))},renderPaneContents:function(){var e=this.getGroupState();return e.errorMessage?n("div",{className:"gr-headerDiscussions u-paddingTopBottomXSmall u-textAlignCenter"},void 0,e.errorMessage):e.sparse?this.renderSparseState():(0,l.isEmpty)(e.groups)?n("div",{className:"gr-headerDiscussions u-paddingTopBottomXSmall u-textAlignCenter"},void 0,n(P["default"],{})):n("section",{},void 0,n("div",{className:"siteHeader__dropdownHeading"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Group Discussions"),n("a",{className:"u-displayBlock gr-hyperlink",href:(0,d["default"])(this.props.discussionsUrl,{discussion_filter:"groups",ref:R.URLTrackingParams.DISCUSSIONS_PANE_ALL_DISCUSSIONS})},void 0,"View all group discussions")),n("div",{className:"gr-headerDiscussions gr-box gr-box--forceScrollBar"},void 0,this.renderDiscussionsList()))},render:function(){var e=n("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--discussions","aria-label":"My group discussions"});return n(h["default"],{trigger:e,triggerEventType:h["default"].TriggerEventTypes.CLICK,fallbackUrl:this.getGroupState().sparse?this.props.groupsUrl:(0,d["default"])(this.props.discussionsUrl,{discussion_filter:"groups"}),tooltipText:"My group discussions",bemModifiers:"discussions",isInPersonalNav:"true",onShowCallback:g["default"].openPane},void 0,this.renderPaneContents())}})},{"../../analytics/url_tracking_params":2,"../../react_actions/discussions_pane_actions":32,"../../react_stores/group_store":222,"../dropdown":102,"../gr_component_factory":114,"../shape_icon":160,"../spinner":177,"./discussions/group_banner":119,"./discussions/topic":120,"append-query":"append-query",lodash:"lodash",react:"react",reflux:"reflux"}],122:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal_trigger"),d=o(u);r["default"]=l["default"].createClass({displayName:"FavoriteGenresPane",propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},render:function(){return n("div",{className:"favoriteGenresPane"},void 0,n("div",{className:"favoriteGenresPane__title"},void 0,"What do you like to read?"),n("div",{className:"favoriteGenresPane__description"},void 0,"Choose your favorite genres to get personalized book recommendations."),n("div",{className:"favoriteGenresPane__buttonContainer"},void 0,n(d["default"],{id:"favGenres"},void 0,n("button",{className:"gr-button gr-button--dark"},void 0,"Choose Favorite Genres"))),n("a",{href:"/genres",className:"favoriteGenresPane__browseGenres"},void 0,"Browse Genres"))}})},{"../gr_component_factory":114,"../modal_trigger":142,react:"react"}],123:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=o(a),l=e("reflux"),u=o(l),d=e("../gr_component_factory"),c=o(d),f=e("./featured_genres_book"),p=o(f),h=e("./featured_genres_list"),m=o(h),g=e("../spinner"),_=o(g),v=e("../../react_stores/featured_genres_store"),y=o(v),b=e("../../react_stores/user_agent_capabilities_store"),k=o(b),S=e("../../react_stores/google_ads_store"),T=o(S),P=e("../ads/google_native_nav_ad"),N=o(P),w=e("../ads/google_native_nav_creative"),R=o(w),x=e("./../tab_content"),A=o(x),C=/goodr.nav.browse.400x300/;r["default"]=c["default"].createClass({displayName:"FeaturedGenres",propTypes:{sponsoredGenres:React.PropTypes.array,adId:React.PropTypes.string},getDefaultProps:function(){return{sponsoredGenres:[]}},mixins:[u["default"].connect(y["default"],"featuredGenres"),u["default"].connect(k["default"],"userAgentCapabilities"),u["default"].connect(T["default"],"googleAdStore")],renderBooks:function(){if(this.state.userAgentCapabilities.touch===!0){var e=this.state.featuredGenres.featuredGenreBookInfo[0];return s("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,s(p["default"],{book:e.book,genre:e.genre,alwaysShown:!0}))}return i["default"].map(this.state.featuredGenres.featuredGenreBookInfo,function(e){return s("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,s(p["default"],{book:e.book,genre:e.genre}))})},renderSponsoredSpotlight:function(e){var t=this;if(e){var r=function(){var e={enableTracking:!0,adId:t.props.adId};return{v:i["default"].map(t.props.sponsoredGenres,function(r){var o=s(R["default"],{adId:t.props.adId,genre:r.name,trackingOptions:e});return s("div",{className:"featuredGenres__genreSpotlight"},r.name,s(A["default"],{group:"featuredGenres",name:"featuredGenre-"+r.name},void 0,o))})}}();if("object"===("undefined"==typeof r?"undefined":n(r)))return r.v}},render:function(){var e=T["default"].findAd(C);return this.state.featuredGenres.featuredGenreBookInfo?e&&this.state.googleAdStore.nativeAds[this.props.adId]&&!this.state.googleAdStore.nativeAds[this.props.adId].hasCreative?s("div",{className:"featuredGenres featuredGenres--sparse"},void 0,s(_["default"],{}),s(N["default"],{adId:this.props.adId})):s("div",{className:"featuredGenres"},void 0,s("span",{className:"featuredGenres__genreList"},void 0,s(m["default"],{genres:i["default"].pluck(this.state.featuredGenres.featuredGenreBookInfo,"genre"),sponsoredGenres:this.props.sponsoredGenres,showSponsoredGenres:this.state.googleAdStore.nativeAds[this.props.adId]&&!this.state.googleAdStore.nativeAds[this.props.adId].empty})),this.renderSponsoredSpotlight(e),this.renderBooks()):this.state.featuredGenres.errorMessage?s("span",{},void 0,this.state.featuredGenres.errorMessage):s("div",{className:"featuredGenres featuredGenres--sparse"},void 0,s(_["default"],{}))}})},{"../../react_stores/featured_genres_store":220,"../../react_stores/google_ads_store":221,"../../react_stores/user_agent_capabilities_store":232,"../ads/google_native_nav_ad":61,"../ads/google_native_nav_creative":62,"../gr_component_factory":114,"../spinner":177,"./../tab_content":179,"./featured_genres_book":124,"./featured_genres_list":125,lodash:"lodash",reflux:"reflux"}],124:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../shared/gr_prop_types"),c=o(d),f=e("./../book"),p=o(f),h=e("./../community_rating"),m=o(h),g=e("./../tab_content"),_=o(g),v=e("./../user_content/truncated_html"),y=o(v),b=e("../want_to_read/want_to_read_button"),k=o(b),S=e("lodash"),T=e("../../analytics/origins");r["default"]=u["default"].createClass({displayName:"FeaturedGenresBook",propTypes:{alwaysShown:i["default"].PropTypes.bool,genre:i["default"].PropTypes.shape({name:i["default"].PropTypes.string.isRequired,url:i["default"].PropTypes.string.isRequired}).isRequired,book:c["default"].book().isRequired},renderBookDescription:function(){return(0,S.isUndefined)(this.props.book.description)?null:s("div",{className:"featuredGenres__bookDescription"},void 0,i["default"].createElement(y["default"],this.props.book.description))},renderBook:function(){var e=this.props.genre;return s("div",{className:"featuredGenres__book"},void 0,s("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Among Most Read This Week in "+e.name),s("div",{className:"u-marginTopSmall"},void 0,i["default"].createElement(p["default"],n({},this.props.book,{key:this.props.book.bookId,size:f.VALID_BOOK_SIZES.LARGE}),s(m["default"],{rating:parseFloat(this.props.book.avgRating),displayAvg:!0}),s("div",{className:"featuredGenres__bookWantToReadButton"},void 0,s(k["default"],{bookTitle:this.props.book.title,uniqueId:(0,S.random)(1e6).toString(),bookId:this.props.book.bookId,origin:T.ShelvedBookOrigin.BROWSE_SPOTLIGHT,showMenu:!1})),this.renderBookDescription())),s("a",{href:e.url,className:"u-defaultType gr-hyperlink"},void 0,"More in "+e.name))},render:function(){return this.props.alwaysShown===!0?this.renderBook():s(_["default"],{group:"featuredGenres",name:"featuredGenre-"+this.props.genre.name},void 0,this.renderBook())}})},{"../../analytics/origins":1,"../gr_component_factory":114,"../shared/gr_prop_types":165,"../want_to_read/want_to_read_button":194,"./../book":68,"./../community_rating":77,"./../tab_content":179,"./../user_content/truncated_html":192,lodash:"lodash",react:"react"}],125:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,
props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("classnames"),a=o(s),i=e("reflux"),l=o(i),u=e("react"),d=o(u),c=e("lodash"),f=e("../dropdown"),p=o(f),h=e("../gr_component_factory"),m=o(h),g=e("./../tab"),_=o(g),v=e("../../react_stores/user_agent_capabilities_store"),y=o(v),b=8,k=1;r["default"]=m["default"].createClass({displayName:"FeaturedGenresList",mixins:[l["default"].connect(y["default"],"userAgentCapabilities")],propTypes:{adId:d["default"].PropTypes.string,genres:d["default"].PropTypes.array.isRequired,sponsoredGenres:d["default"].PropTypes.array,showSponsoredGenres:d["default"].PropTypes.bool},onClick:function(e){e.preventDefault()},allGenresLink:function(){return n("li",{role:"menuitem",className:"genreList__genre"},"allGenres",n("a",{href:"/genres",className:"siteHeader__subNavLink"},void 0,"All Genres"))},renderGenreLink:function(e,t){var r=(0,a["default"])(["genreList__genreLink","gr-hyperlink","gr-hyperlink--naked"]),o=n("a",{href:e.url,className:r},void 0,e.name);return this.state.userAgentCapabilities.touch===!0?o:n(_["default"],{group:"featuredGenres",name:"featuredGenre-"+e.name,triggerEventType:p["default"].TriggerEventTypes.HOVER,initiallySelected:t},void 0,o)},renderSponsoredGenresList:function(){var e=this;return this.props.showSponsoredGenres?n("div",{className:"featuredGenres__list genreList genreList--featuredSidebar"},void 0,n("div",{className:"siteHeader__heading siteHeader__title"},void 0,n("span",{className:"featuredGenres__listTitle"},void 0,"Featured Genres")),n("ul",{},void 0,(0,c.map)((0,c.take)(this.props.sponsoredGenres,k),function(t){return n("li",{role:"menuitem",className:"genreList__genre"},t.name,e.renderGenreLink(t,!0))}))):null},renderFavoritesList:function(){var e=this,t=(0,c.random)(0,this.props.genres.length-1),r=this.props.showSponsoredGenres?b-2:b;return n("div",{className:"featuredGenres__list genreList genreList--sidebar"},void 0,n("div",{className:"siteHeader__title siteHeader__heading"},void 0,n("span",{className:"featuredGenres__listTitle"},void 0,"Favorite Genres")),n("ul",{},void 0,(0,c.map)((0,c.take)(this.props.genres,r),function(r,o){return n("li",{role:"menuitem",className:"genreList__genre"},r.name,e.renderGenreLink(r,e.props.showSponsoredGenres?!1:o===t))}),this.allGenresLink()))},render:function(){return n("div",{},void 0,this.renderSponsoredGenresList(),this.renderFavoritesList())}})},{"../../react_stores/user_agent_capabilities_store":232,"../dropdown":102,"../gr_component_factory":114,"./../tab":178,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],126:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s),i=e("../gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"GenreList",renderMoreGenresLink:function(){return n("li",{role:"menuitem",className:"genreList__genre"},void 0,n("a",{href:"/genres",className:"genreList__genreLink gr-hyperlink gr-hyperlink--naked"},void 0,"More Genres"))},render:function(){for(var e=this,t=10,r=[],o=this.props.genres.slice(0);r.length*t<this.props.genres.length;)r.push(o.splice(0,t));var s=r.length;return n("div",{className:"genreListContainer"},void 0,n("div",{className:"siteHeader__heading siteHeader__title"},void 0,"Genres"),a["default"].map(r,function(t,r){return n("ul",{className:"genreList"},"genreList"+r,a["default"].map(t,function(e){return n("li",{role:"menuitem",className:"genreList__genre"},e.name,n("a",{href:e.url,className:"genreList__genreLink gr-hyperlink gr-hyperlink--naked"},void 0,e.name))}),s===r+1?e.renderMoreGenresLink():null)}))}})},{"../gr_component_factory":114,lodash:"lodash"}],127:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../search/book_search"),c=o(d),f=e("../experimental/search/universal/universal_search"),p=o(f),h=e("../favorite_genres_form"),m=o(h),g=e("../modal"),_=o(g),v=e("./personal_nav"),y=o(v),b=e("./primary_nav_menus"),k=o(b),S=e("./header_logo"),T=o(S),P=e("../../analytics/url_tracking_params"),N=e("../../modules/env_utils"),w=o(N);r["default"]=u["default"].createClass({displayName:"Header",propTypes:{adId:i["default"].PropTypes.string,autocomleteUrl:i["default"].PropTypes.string,browseUrl:i["default"].PropTypes.string,choiceAwardsUrl:i["default"].PropTypes.string,communityUrl:i["default"].PropTypes.string,editorsPicksUrl:i["default"].PropTypes.string,eventUrl:i["default"].PropTypes.string,discussionsUrl:i["default"].PropTypes.string,favoriteGenres:i["default"].PropTypes.array,sponsoredGenres:i["default"].PropTypes.array,friendIconUrl:i["default"].PropTypes.string,genres:i["default"].PropTypes.array.isRequired,giveawayUrl:i["default"].PropTypes.string,groupsUrl:i["default"].PropTypes.string,featuredAskAuthorUrl:i["default"].PropTypes.string,helpUrl:i["default"].PropTypes.string,listUrl:i["default"].PropTypes.string,messageIconUrl:i["default"].PropTypes.string,myBooksUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myGroupsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,myRecsUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,newReleasesUrl:i["default"].PropTypes.string,notificationIconUrl:i["default"].PropTypes.string,peopleUrl:i["default"].PropTypes.string,preferences:i["default"].PropTypes.object,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,quizzesUrl:i["default"].PropTypes.string,quotesUrl:i["default"].PropTypes.string,recommendationsUrl:i["default"].PropTypes.string,signedIn:i["default"].PropTypes.bool,searchPath:i["default"].PropTypes.string,signInUrl:i["default"].PropTypes.string,signUpUrl:i["default"].PropTypes.string,storiesUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number,triviaUrl:i["default"].PropTypes.string,logoUrl:i["default"].PropTypes.string,signInWithReturnUrl:i["default"].PropTypes.bool},render:function(){return s("div",{},void 0,s("header",{className:"siteHeader__contents"},void 0,i["default"].createElement(T["default"],this.props),i["default"].createElement(k["default"],this.props),this.renderSearchForm(),this.props.signedIn?this.renderPersonalNav():this.renderLoginLinks(),this.renderModals()))},renderPersonalNav:function(){return i["default"].createElement(y["default"],this.props)},getSignInUrl:function(){var e=w["default"].getCurrentPath();return this.props.signInUrl+"?returnurl="+e},signIn:function(e){e.preventDefault(),w["default"].setLocationUrl(this.getSignInUrl())},renderLoginLinks:function(){var e={};return this.props.signInWithReturnUrl&&(e.onClick=this.signIn),s("ul",{className:"siteHeader__personal"},void 0,s("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,i["default"].createElement("a",n({href:this.props.signInUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},e),"Sign In")),s("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,s("a",{href:this.props.signUpUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},void 0,"Join")))},onSearchSelection:function(e){var t=null;t=this.isFeatureEnabled("universal_search")?e.destination+"?"+P.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+P.URLTrackingParams.FROM_SEARCH_PARAM:e.bookUrl+"?"+P.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+P.URLTrackingParams.FROM_SEARCH_PARAM,w["default"].setLocationUrl(t)},renderSearchForm:function(){return this.isFeatureEnabled("universal_search")?s(p["default"],{bemModifiers:"navbar",searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection}):s(c["default"],{bemModifiers:"navbar",searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection})},renderModals:function(){return this.props.signedIn?s(_["default"],{id:"favGenres"},void 0,s(m["default"],{favoriteGenres:this.props.favoriteGenres,genres:this.props.genres})):null}})},{"../../analytics/url_tracking_params":2,"../../modules/env_utils":19,"../experimental/search/universal/universal_search":107,"../favorite_genres_form":110,"../gr_component_factory":114,"../modal":141,"../search/book_search":157,"./header_logo":128,"./personal_nav":132,"./primary_nav_menus":133,react:"react"}],128:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"HeaderLogo",render:function(){return n("a",{href:this.props.logoActionUrl,className:this.isFeatureEnabled("logo_doodle")?"siteHeader__logo siteHeader__logo--doodle":"siteHeader__logo","aria-label":this.props.logoAltText,title:this.props.logoAltText})}})},{"../gr_component_factory":114}],129:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("../gr_component_factory"),i=o(a),l=e("reflux"),u=o(l),d=e("./header"),c=o(d),f=e("../../react_stores/current_user_store"),p=o(f),h=e("../../react_stores/favorite_genres_store"),m=o(h);r["default"]=i["default"].createClass({displayName:"HeaderStoreConnector",mixins:[u["default"].connect(p["default"],"currentUser"),u["default"].connect(m["default"],"favoriteGenres")],render:function(){var e=this.state.currentUser.currentUser,t=!s["default"].isNull(e),r={adId:this.state.favoriteGenres.adId,signedIn:t,genres:this.state.favoriteGenres.allGenres,favoriteGenres:this.state.favoriteGenres.favoriteGenres,sponsoredGenres:this.state.favoriteGenres.sponsoredGenres};return t&&s["default"].merge(r,e),s["default"].merge(r,this.props),React.createElement(c["default"],r)}})},{"../../react_stores/current_user_store":215,"../../react_stores/favorite_genres_store":219,"../gr_component_factory":114,"./header":127,lodash:"lodash",reflux:"reflux"}],130:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("lodash"),l=e("../../modules/shared/image_registry"),u=e("../../modules/to_sentence"),d=o(u),c=e("../user/user_icon"),f=o(c),p=e("../time/relative_time"),h=o(p),m=e("../shape_icon"),g=o(m);r["default"]=a["default"].createClass({displayName:"Notification",mixins:[d["default"]],propTypes:{notification:React.PropTypes.object.isRequired},userLink:function(e){return n("a",{href:e.profileUrl,className:"u-defaultType"},e.profileUrl,n("b",{},void 0,e.viewableName))},userLinks:function _(e){var t=this,_=(0,i.map)(e.actors,function(e){return t.userLink(e)});return e.moreActors?this.sentenceJoin(_):this.toSentence(_)},renderActorIcon:function(e){return e.actor?n(f["default"],{user:e.actor}):n(g["default"],{imageUrl:(0,l.getImages)().notificationFromGRIcon||"",imageAlt:"Goodreads Notification"})},renderNewNotificationFlag:function(e){return e.viewed?void 0:n("small",{className:"gr-smallAlert u-marginRightTiny"},void 0,"New")},renderHistoryMessage:function(e){return e.historyMessage?n("small",{className:"gr-notification__historyMessage"},void 0,e.historyMessage):void 0},render:function(){var e=this.props.notification;return e.error?null:n("div",{className:"gr-mediaBox gr-notification"},void 0,n("div",{className:"gr-mediaBox__media u-marginRightMedium"},void 0,this.renderActorIcon(e)),n("div",{className:"gr-mediaBox__desc u-defaultType"},void 0,this.userLinks(e),!e.actor||e.moreActors?"":e.directlyAddressed?", ":" ",e.body+" ",e.resource?n("a",{className:"gr-hyperlink",href:e.resource.url},void 0,e.resource.text):null,n("div",{},void 0,this.renderNewNotificationFlag(e),n("small",{},void 0,n(h["default"],{time:e.createdAt,longFormat:!0}))),n("div",{},void 0,this.renderHistoryMessage(e))))}})},{"../../modules/shared/image_registry":25,"../../modules/to_sentence":27,"../gr_component_factory":114,"../shape_icon":160,"../time/relative_time":180,"../user/user_icon":185,lodash:"lodash"}],131:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("reflux"),f=o(c),p=e("../spinner"),h=o(p),m=e("../dropdown"),g=o(m),_=e("../../react_stores/notifications_store"),v=o(_),y=e("../../react_actions/notifications_actions"),b=o(y),k=e("./notification"),S=o(k);r["default"]=d["default"].createClass({displayName:"Notifications",mixins:[f["default"].connect(v["default"],"notificationsStore")],propTypes:{notificationIconUrl:a["default"].PropTypes.string.isRequired},getStoreState:function(){return this.state.notificationsStore},generateKey:function(e){return e.actor?""+e.actor.profileUrl+e.createdAt:e.resource?""+e.resource.url+e.createdAt:""+e.body+e.createdAt},notificationsCountString:function(){var e=this.getStoreState();return e.unreadCount+(e.unreadCountMore?"+":"")},renderNotificationList:function(){var e=this,t=this.getStoreState(),r=t.notifications;return t.errorOccurred?n("div",{className:"gr-notifications gr-notifications--sparse"},void 0,n("span",{},void 0,"An error occurred loading your notifications")):l["default"].isUndefined(r)?n("div",{className:"gr-notifications gr-notifications--sparse"},void 0,n(h["default"],{})):l["default"].isEmpty(r)?n("div",{className:"gr-notifications gr-notifications--sparse"},void 0,n("span",{},void 0,"No notifications")):n("section",{},void 0,n("a",{className:"u-displayBlock gr-hyperlink gr-hyperlink--noUnderline",href:"/notifications"},void 0,n("div",{className:"siteHeader__dropdownHeading"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Notifications"),n("span",{},void 0,"View all notifications"))),n("div",{className:"gr-notifications gr-box gr-box--forceScrollBar"},void 0,l["default"].map(r,function(t){return n(S["default"],{notification:t},e.generateKey(t))})))},render:function(){var e=this.getStoreState(),t=n("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--notifications","aria-label":"Notifications"},void 0,e.unreadCount>0?n("span",{className:"headerPersonalNav__flag"},void 0,this.notificationsCountString()):null);return n("div",{},void 0,n(g["default"],{trigger:t,triggerEventType:g["default"].TriggerEventTypes.CLICK,hoverTriggerClickUrl:this.props.notificationIconUrl,fallbackUrl:this.props.notificationIconUrl,tooltipText:"Notifications",onShowCallback:b["default"].requestNotifications,bemModifiers:"notifications",isInPersonalNav:"true"},void 0,this.renderNotificationList()))}})},{"../../react_actions/notifications_actions":42,"../../react_stores/notifications_store":225,"../dropdown":102,"../gr_component_factory":114,"../spinner":177,"./notification":130,lodash:"lodash",react:"react",reflux:"reflux"}],132:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../gr_component_factory"),c=o(d),f=e("../dropdown"),p=o(f),h=e("./notifications"),m=o(h),g=e("./profile_menu"),_=o(g),v=e("../user/user_icon"),y=o(v),b=e("./discussions_pane"),k=o(b);r["default"]=c["default"].createClass({displayName:"PersonalNav",propTypes:{author:i["default"].PropTypes.shape({id:i["default"].PropTypes.number,editProfileUrl:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,dashboardUrl:i["default"].PropTypes.string}),commentsUrl:i["default"].PropTypes.string,discussionsUrl:i["default"].PropTypes.string,editFavGenresUrl:i["default"].PropTypes.string,groupInvitesCount:i["default"].PropTypes.number,groupsUrl:i["default"].PropTypes.string,messageIconUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,pendingRecsCount:i["default"].PropTypes.number,preferences:i["default"].PropTypes.object,profileEditUrl:i["default"].PropTypes.string,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,signOutUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number},render:function(){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl},t=s("span",{className:"headerPersonalNav"},void 0,s("span",{className:"headerPersonalNav__icon"},void 0,s(y["default"],{user:e,includeLink:!1}))),r=s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--inbox","aria-label":"Inbox"},void 0,this.props.tempUnreadMessageCount>0?s("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempUnreadMessageCount):null),o=s("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--friendRequests","aria-label":"Friend Requests"},void 0,this.props.tempFriendRequestCount>0?s("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempFriendRequestCount):null),a=0===u["default"].size(this.props.author)?this.props.profileUrl:this.props.author.profileUrl;return s("ul",{className:"siteHeader__personal"},void 0,s("li",{},void 0,s(m["default"],{notificationIconUrl:this.props.notificationIconUrl,preferences:this.props.preferences})),this.isFeatureEnabled("nav_bar_discussions_pane")?s("li",{},void 0,s(k["default"],{groupsUrl:this.props.groupsUrl,discussionsUrl:this.props.discussionsUrl})):null,s("li",{},void 0,s("a",{href:this.props.messageIconUrl,title:"Messages",className:"headerPersonalNav"},void 0,r)),s("li",{},void 0,s("a",{href:this.props.friendIconUrl,title:"Friends",className:"headerPersonalNav"},void 0,o)),s("li",{},void 0,s(p["default"],{trigger:t,triggerEventType:p["default"].TriggerEventTypes.CLICK,hoverTriggerClickUrl:a,fallbackUrl:a,bemModifiers:"profileMenu",isInPersonalNav:"true"},void 0,i["default"].createElement(_["default"],n({},this.props,{profileUrl:a})))))}})},{"../dropdown":102,"../gr_component_factory":114,"../user/user_icon":185,"./discussions_pane":121,"./notifications":131,"./profile_menu":134,lodash:"lodash",react:"react"}],133:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./community_menu"),d=o(u),c=e("./browse_menu"),f=o(c);r["default"]=l["default"].createClass({displayName:"PrimaryNavMenus",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string,choiceAwardsUrl:a["default"].PropTypes.string,communityUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editorsPicksUrl:a["default"].PropTypes.string,eventUrl:a["default"].PropTypes.string,favoriteGenres:a["default"].PropTypes.array,sponsoredGenres:a["default"].PropTypes.array,featuredAskAuthorUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string,groupsUrl:a["default"].PropTypes.string,homeUrl:a["default"].PropTypes.string,listUrl:a["default"].PropTypes.string,myBooksUrl:a["default"].PropTypes.string,newReleasesUrl:a["default"].PropTypes.string,peopleUrl:a["default"].PropTypes.string,quizzesUrl:a["default"].PropTypes.string,quotesUrl:a["default"].PropTypes.string,recommendationsUrl:a["default"].PropTypes.string,signedIn:a["default"].PropTypes.bool,storiesUrl:a["default"].PropTypes.string,triviaUrl:a["default"].PropTypes.string},render:function(){return n("nav",{className:"primaryNav"},void 0,n("ul",{role:"menu"},void 0,n("li",{className:"siteHeader__topLevelItem"},void 0,n("a",{href:this.props.homeUrl,className:"siteHeader__topLevelLink"},void 0,"Home")),n("li",{className:"siteHeader__topLevelItem"},void 0,n("a",{href:this.props.myBooksUrl,className:"siteHeader__topLevelLink"},void 0,"My Books")),n("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(f["default"],this.props)),n("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(d["default"],this.props))))}})},{"../gr_component_factory":114,"./browse_menu":117,"./community_menu":118,react:"react"}],134:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../menu_link"),f=o(c);r["default"]=d["default"].createClass({displayName:"ProfileMenu",propTypes:{author:a["default"].PropTypes.shape({id:a["default"].PropTypes.number,editProfileUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,dashboardUrl:a["default"].PropTypes.string}),commentsUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editFavGenresUrl:a["default"].PropTypes.string,groupInvitesCount:a["default"].PropTypes.number,helpUrl:a["default"].PropTypes.string,myFriendsUrl:a["default"].PropTypes.string,myGroupsUrl:a["default"].PropTypes.string,myQuotesUrl:a["default"].PropTypes.string,myReadingChallengeUrl:a["default"].PropTypes.string,myRecsUrl:a["default"].PropTypes.string,name:a["default"].PropTypes.string,pendingRecsCount:a["default"].PropTypes.number,profileEditUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,readingNotesUrl:a["default"].PropTypes.string,signOutUrl:a["default"].PropTypes.string},isAuthor:function(){return!l["default"].isUndefined(this.props.author)},groupInvitesMessage:function(){var e=this.props.groupInvitesCount;return 0===e?"No invitations":1===e?"1 invitation":e+" invitations"},renderGroupInvites:function(){return this.props.groupInvitesCount>0?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.groupInvitesMessage()):void 0},renderPendingRecs:function(){return this.props.pendingRecsCount>0?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.props.pendingRecsCount+" new"):void 0},renderAuthorDashboardLink:function(){return this.isAuthor()?n(f["default"],{href:this.props.author.dashboardUrl,linkText:"Author Dashboard",linkClass:"siteHeader__subNavLink"}):void 0},renderProfileName:function(){var e=this.props.name;return e.length>23&&(e=e.substring(0,22)+"…"),n("span",{className:"siteHeader__subNavLink gr-h3 gr-h3--noMargin"},void 0," ",e," ")},render:function(){var e=this.isAuthor()?this.props.author.editProfileUrl:this.props.profileEditUrl;return n("ul",{className:"siteHeader__subNav siteHeader__subNav--profile gr-box gr-box--withShadowLarge"},void 0,this.renderProfileName(),n(f["default"],{},void 0,n("a",{href:this.props.profileUrl,className:"siteHeader__subNavLink"},void 0,"Profile")),this.renderAuthorDashboardLink(),n(f["default"],{href:this.props.myFriendsUrl,linkText:"Friends",linkClass:"siteHeader__subNavLink"}),n(f["default"],{},void 0,n("a",{href:this.props.myGroupsUrl,className:"siteHeader__subNavLink"},void 0,"Groups",this.renderGroupInvites())),n(f["default"],{href:this.props.discussionsUrl,linkText:"Discussions",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.commentsUrl,linkText:"Comments",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.myReadingChallengeUrl,linkText:"Reading Challenge",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.readingNotesUrl,linkText:"Kindle Notes & Highlights",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.myQuotesUrl,linkText:"Quotes",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.editFavGenresUrl,linkText:"Favorite genres",linkClass:"siteHeader__subNavLink"}),n(f["default"],{},void 0,n("a",{href:this.props.myRecsUrl,className:"siteHeader__subNavLink"},void 0,"Friends’ recommendations",this.renderPendingRecs())),n(f["default"],{href:e,linkText:"Account settings",linkClass:"siteHeader__subNavLink u-topGrayBorder"}),n(f["default"],{href:this.props.helpUrl,linkText:"Help",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.signOutUrl,linkText:"Sign out",linkClass:"siteHeader__subNavLink",method:"POST"}))}})},{"../gr_component_factory":114,"../menu_link":140,lodash:"lodash",react:"react"}],135:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.JobsListComponent=void 0;var a=e("./gr_component_factory"),i=o(a),l=e("react"),u=e("../modules/env_utils"),d=o(u),c=e("lodash"),f=e("react-router/lib/Router"),p=o(f),h=e("react-router/lib/RouterContext"),m=o(h),g=e("react-router/lib/Route"),_=o(g),v=e("react-router/lib/Link"),y=o(v),b=e("react-router/lib/browserHistory"),k=o(b),S=e("react-router/lib/match"),T=o(S),P="/jobs",N=r.JobsListComponent=i["default"].createClass({displayName:"JobsList",getJobMarkup:function(e){return{__html:e}},renderLocation:function(e){return e.city+", "+e.state+", "+e.country_code},renderJob:function(e){return s("div",{},void 0,s("h2",{},void 0,e.title),s("p",{className:"jobMetadata"},void 0,s("b",{},void 0,e.job_category+" | "+this.renderLocation(e))),s("p",{dangerouslySetInnerHTML:this.getJobMarkup(e.description)}),s("div",{className:"jobsHeader "},void 0,"Basic Qualifications:"),s("div",{className:"jobBasicQualifications",dangerouslySetInnerHTML:this.getJobMarkup(e.basic_qualifications)}),s("div",{className:"jobsHeader"},void 0,"Preferred Qualifications:"),s("div",{className:"jobPreferredQualifications",dangerouslySetInnerHTML:this.getJobMarkup(e.preferred_qualifications)}),this.renderFooter(e.id_icims))},renderFooter:function(e){return s("div",{},void 0,s("div",{id:"jobsFooter"},void 0,s("div",{id:"legalNotice"},void 0,"Qualified applicants with criminal histories will be considered in a manner consistent with all applicable local, state and federal laws, including the San Francisco Fair Chance Ordinance.")),s("a",{className:"gr-button",href:"https://us-amazon.icims.com/jobs/"+e+"/job?mode=apply"},void 0,"Apply now"),s(y["default"],{to:P},void 0,s("button",{className:"gr-buttonAsLink allJobsButton"},void 0,"Back to all jobs")))},renderJobLink:function(e){var t=this.props.route.jobs[e];return t?s("li",{id:e},e,s("div",{className:"right"},void 0,this.renderLocation(t)),s("div",{className:"left"},void 0,s(y["default"],{to:P+"?id="+e},void 0,s("button",{className:"gr-buttonAsLink jobLink"},void 0,t.title))),s("div",{className:"clearFix"})):null},render:function(){var e=this,t=this.props.route.jobs[this.props.location.query.id];return t?this.renderJob(t):s("div",{},void 0,s("h2",{},void 0,"Our Jobs"),(0,c.map)(this.props.route.categories,function(t,r){return s("div",{},r,s("div",{className:"jobsHeader"},void 0,r),s("div",{className:"aboutDividerDark indentedBox"}),s("ul",{},void 0,(0,c.map)(t,function(t){return e.renderJobLink(t)})))}),s("section",{className:"big_margin"},void 0,s("b",{},void 0,"To all recruitment agencies: "),"Goodreads does not accept agency resumes. Please do not forward resumes to Goodreads employees or any other company location. Goodreads is not responsible for any fees related to unsolicited resumes.",s("div",{className:"big_margin"},void 0,s("a",{href:"https://en-amazon.icims.com/jobs/dashboard"},void 0,"Check on an application you've submitted"))))}}),w=function(e){
var t=React.createElement(_["default"],n({path:P+"(?id=*)",component:N},e));if(d["default"].domUnavailable()){var r=void 0,o=P;return e.selectedId&&(o+="?id="+e.selectedId),(0,T["default"])({routes:t,location:o},function(e,t,o){r=o}),React.createElement(m["default"],r)}return s(p["default"],{history:k["default"]},void 0,t)};w.propTypes={selectedId:l.PropTypes.string,categories:l.PropTypes.object.isRequired,jobs:l.PropTypes.object.isRequired},r["default"]=w},{"../modules/env_utils":19,"./gr_component_factory":114,lodash:"lodash",react:"react","react-router/lib/Link":241,"react-router/lib/Route":245,"react-router/lib/Router":247,"react-router/lib/RouterContext":248,"react-router/lib/browserHistory":251,"react-router/lib/match":259}],136:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_mixins/gr_reflux"),d=e("../../react_actions/like_actions"),c=o(d),f=e("../../react_stores/like_store"),p=o(f),h=e("../spinner"),m=o(h),g=e("classnames"),_=o(g);r["default"]=l["default"].createClass({displayName:"LikeButton",mixins:[(0,u.connectToLazyStore)(p["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,showAsLink:a["default"].PropTypes.bool},getDefaultProps:function(){return{showAsLink:!0}},componentDidUpdate:function(){this.likeFocused&&!this.state.showLoadingSpinner&&(this.refs.likeButton.focus(),this.likeFocused=!1)},buttonClicked:function(){this.state.isLiked?c["default"].unLike(this.props.resourceKey):c["default"].like(this.props.resourceKey)},render:function(){var e=this,t=this.state.isLiked?"Unlike":"Like",r=(0,_["default"])({"gr-buttonAsLink":this.props.showAsLink},{"gr-button gr-button--small":!this.props.showAsLink});return n("span",{"aria-live":"polite"},void 0,this.state.showLoadingSpinner?n(m["default"],{}):a["default"].createElement("button",{"aria-label":t+" "+this.props.resourceLabel,ref:"likeButton",className:r,onClick:this.buttonClicked,onFocus:function(){e.likeFocused=!0}},t))}})},{"../../react_actions/like_actions":39,"../../react_mixins/gr_reflux":210,"../../react_stores/like_store":223,"../gr_component_factory":114,"../spinner":177,classnames:"classnames",react:"react"}],137:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_stores/like_store"),d=o(u),c=e("../../react_mixins/gr_reflux");r["default"]=l["default"].createClass({displayName:"LikeCount",mixins:[(0,c.connectToLazyStore)(d["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getPluralLike:function(e){return 1===e?"like":"likes"},render:function(){return this.state.likeCount>0?n("span",{},void 0,n("a",{className:"gr-hyperlink--quiet",href:this.state.likersListUrl},void 0,this.state.likeCount," ",this.getPluralLike(this.state.likeCount))," · "):null}})},{"../../react_mixins/gr_reflux":210,"../../react_stores/like_store":223,"../gr_component_factory":114,react:"react"}],138:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("reflux"),f=o(c),p=e("../../react_stores/like_store"),h=o(p);r["default"]=d["default"].createClass({displayName:"LikeInformation",mixins:[f["default"].connectFilter(h["default"],"likeStore",function(e){return e[this.props.resourceKey]})],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getNameLink:function(){var e=this.state.likeStore.likedBy,t=l["default"].isUndefined(e.friends)?e.others[0]:e.friends[0];return n("a",{href:t.profile_url,className:"gr-hyperlink gr-hyperlink--bold likeInformation__name"},void 0,t.name)},getPluralPerson:function(e){return e>1?"people":"person"},getYouLikeMessage:function(){return n("span",{className:"likeInformation__name"},void 0,"You")},getYouAndAnotherPersonLikeMessage:function(){return n("span",{},void 0,this.getYouLikeMessage()," and ",this.getNameLink())},getYouAndManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-2;return n("span",{},void 0,this.getYouLikeMessage(),", ",this.getNameLink(),","," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getSomeoneLikeMessage:function(){return n("span",{},void 0,this.getNameLink())},getManyPeopleLikeMessage:function(){var e=this.state.likeStore,t=e.likeCount-1;return n("span",{},void 0,this.getNameLink()," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:e.likersListUrl},void 0,t," other ",this.getPluralPerson(t)))},getLikeMessage:function(){var e=this.state.likeStore;if(e.isLiked)switch(e.likeCount){case 1:return this.getYouLikeMessage();case 2:return this.getYouAndAnotherPersonLikeMessage();default:return this.getYouAndManyPeopleLikeMessage()}else switch(e.likeCount){case 1:return this.getSomeoneLikeMessage();default:return this.getManyPeopleLikeMessage()}},render:function(){var e=this.state.likeStore;return!e.isLiked&&l["default"].isEmpty(e.likedBy)?null:n("div",{className:"likeInformation u-defaultType"},void 0,this.getLikeMessage()," liked this")}})},{"../../react_stores/like_store":223,"../gr_component_factory":114,lodash:"lodash",react:"react",reflux:"reflux"}],139:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./like_count"),d=o(u),c=e("./like_button"),f=o(c);r["default"]=l["default"].createClass({displayName:"LikeSimpleFooter",propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired,showAsLink:a["default"].PropTypes.bool},render:function(){return n("span",{},void 0,n(d["default"],{resourceKey:this.props.resourceKey}),this.props.isLikeable?n(f["default"],{resourceKey:this.props.resourceKey,resourceLabel:this.props.resourceLabel,showAsLink:this.props.showAsLink}):null)}})},{"../gr_component_factory":114,"./like_button":136,"./like_count":137,react:"react"}],140:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"MenuLink",propTypes:{href:a["default"].PropTypes.string,linkText:a["default"].PropTypes.any,linkClass:a["default"].PropTypes.string,method:a["default"].PropTypes.oneOf(["POST","PUT","DELETE"])},render:function(){return n("li",{role:"menuitem",className:"menuLink"},void 0,this.props.children?n("span",{},void 0,this.props.children):n("a",{href:this.props.href,className:this.props.linkClass,"data-method":this.props.method},void 0,this.props.linkText))}})},{"./gr_component_factory":114,react:"react"}],141:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("classnames"),f=o(c),p=e("../react_stores/modal_store"),h=o(p),m=e("../react_actions/modal_actions"),g=o(m),_=e("./close_button"),v=o(_),y=e("../modules/keys"),b=o(y),k=e("lodash");r["default"]=l["default"].createClass({displayName:"Modal",mixins:[d["default"].connect(h["default"],"modalStore")],propTypes:{id:a["default"].PropTypes.string.isRequired,centered:a["default"].PropTypes.bool,showByDefault:a["default"].PropTypes.bool,onCloseHandler:a["default"].PropTypes.func},getDefaultProps:function(){return{centered:!1,showByDefault:!1}},componentDidMount:function(){this.props.showByDefault&&g["default"].openModal(this.props.id)},hide:function(){g["default"].closeModal(),this.props.onCloseHandler&&(0,k.isFunction)(this.props.onCloseHandler)&&this.props.onCloseHandler()},isActive:function(){return this.state.modalStore.currentActiveModal===this.props.id},hideOnOverlayClick:function(e){e.target.className.indexOf("modal--overlay")>-1&&this.hide()},hideOnEscape:function(e){b["default"].isDefaultCloserKey(e.keyCode)&&this.hide()},render:function(){var e=(0,f["default"])("modal","modal--overlay",{"modal--show":this.isActive(),"modal--centered":this.isActive()&&this.props.centered});return a["default"].createElement("div",{className:e,ref:"modalContent",tabIndex:"0",onClick:this.hideOnOverlayClick,onKeyDown:this.hideOnEscape},n("div",{className:this.withBemModifiers("modal__content")},void 0,n("div",{className:"modal__close"},void 0,n(v["default"],{action:this.hide})),this.props.children))}})},{"../modules/keys":22,"../react_actions/modal_actions":40,"../react_stores/modal_store":224,"./close_button":72,"./gr_component_factory":114,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],142:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("../react_actions/modal_actions"),d=o(u);r["default"]=l["default"].createClass({displayName:"ModalTrigger",propTypes:{id:a["default"].PropTypes.string.isRequired,clickHandler:a["default"].PropTypes.func},openModal:function(){this.props.clickHandler&&this.props.clickHandler(),d["default"].openModal(this.props.id)},render:function(){return n("a",{className:this.withBemModifiers("modalTrigger"),onClick:this.openModal},void 0,this.props.children)}})},{"../react_actions/modal_actions":40,"./gr_component_factory":114,react:"react"}],143:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../gr_component_factory"),l=o(i),u=e("../../dot_separated_elements"),d=o(u),c=e("reflux"),f=o(c),p=e("../../../react_stores/user_agent_capabilities_store"),h=o(p),m=e("lodash"),g=e("../../preview_book/preview_book"),_=o(g),v=e("../../click_tracking_wrapper"),y=o(v),b=e("../../../modules/ads/click_tracking_helper");r["default"]=l["default"].createClass({displayName:"NewsfeedItemFooterActions",mixins:[f["default"].connect(h["default"],"userAgentCapabilities")],propTypes:{elements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.element),isSponsored:a["default"].PropTypes.bool,sponsoredBy:a["default"].PropTypes.string,sponsoredUrl:a["default"].PropTypes.string,footerClasses:a["default"].PropTypes.string},filteredElements:function(){var e=this;return(0,m.select)(this.props.elements,function(t){return t.type==_["default"]?(0,g.shouldDisplayPreviewBookButton)(t.props.book,e.state.userAgentCapabilities):!0})},renderSponsoredFooter:function(){var e=this.props.footerClasses||"gr-newsfeedItem__sponsoredFooterActions",t=this.props.sponsoredBy?"Sponsored by ":"Sponsored",r=this.filteredElements(),o=r.length>0?n("span",{className:"gr-newsfeedItem__dotSeparatedElements"},void 0,n(d["default"],{elements:r})):null,s=n("div",{className:e},void 0,o,n("span",{className:"gr-newsfeedItem__sponsoredBadgeIcon"}),n("span",{className:"gr-newsfeedItem__sponsoredLabel"},void 0,t),n("a",{target:"_blank",href:this.props.sponsoredUrl,className:"gr-hyperlink"},void 0,this.props.sponsoredBy));return n(y["default"],{trackingOptions:b.TRACKED_CLASSES.sponsored_footer_actions,children:s})},renderFooter:function(){return n("div",{className:"gr-newsfeedItem__footerActions"},void 0,n(d["default"],{elements:this.filteredElements()}))},render:function(){return this.props.isSponsored?this.renderSponsoredFooter():this.renderFooter()}})},{"../../../modules/ads/click_tracking_helper":3,"../../../react_stores/user_agent_capabilities_store":232,"../../click_tracking_wrapper":71,"../../dot_separated_elements":100,"../../gr_component_factory":114,"../../preview_book/preview_book":146,lodash:"lodash",react:"react",reflux:"reflux"}],144:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("./gr_component_factory"),d=o(u),c=e("./pagination_single_page_link"),f=o(c),p=e("./shared/gr_prop_types"),h=o(p);r["default"]=d["default"].createClass({displayName:"PaginationLinks",propTypes:{totalSize:h["default"].naturalNumber.isRequired,currentPageNumber:a["default"].PropTypes.number.isRequired,className:a["default"].PropTypes.string,perPage:h["default"].naturalNumber.isRequired,changePageAction:a["default"].PropTypes.func.isRequired},maxPageNumber:function(){return Math.ceil(this.props.totalSize/this.props.perPage)},renderPageLinks:function(){var e=this,t=this.maxPageNumber();return 1!==t?l["default"].times(t,function(t){return n(f["default"],{pageNumber:t+1,currentPageNumber:e.props.currentPageNumber,changePageAction:e.props.changePageAction},t+1)}):void 0},renderPrevLink:function(){return 1===this.maxPageNumber()?null:n("button",{className:"gr-paginationLinks__previousLink gr-buttonAsLink gr-buttonAsLink--black",onClick:this.moveToPrevPage,disabled:1===this.props.currentPageNumber},void 0,"← Previous")},renderNextLink:function(){return 1===this.maxPageNumber()?null:n("button",{className:"gr-paginationLinks__nextLink gr-buttonAsLink gr-buttonAsLink--black",onClick:this.moveToNextPage,disabled:this.props.currentPageNumber===this.maxPageNumber()},void 0,"Next →")},moveToNextPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber+1)},moveToPrevPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber-1)},render:function(){return n("div",{className:"gr-paginationLinks "+(this.props.className||"")},void 0,this.renderPrevLink(),this.renderPageLinks(),this.renderNextLink())}})},{"./gr_component_factory":114,"./pagination_single_page_link":145,"./shared/gr_prop_types":165,lodash:"lodash",react:"react"}],145:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"PaginationSinglePageLink",propTypes:{pageNumber:a["default"].PropTypes.number,currentPageNumber:a["default"].PropTypes.number,changePageAction:a["default"].PropTypes.func.isRequired},render:function(){return this.props.pageNumber===this.props.currentPageNumber?n("span",{className:"gr-paginationLinks__pageNumLink\n                         gr-paginationLinks__pageNumLink--selected"},void 0,this.props.pageNumber):n("button",{className:"gr-buttonAsLink\n                           gr-buttonAsLink--black\n                           gr-paginationLinks__pageNumLink",onClick:this.jumpToPage},void 0,this.props.pageNumber)},jumpToPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.pageNumber)}})},{"./gr_component_factory":114,react:"react"}],146:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.shouldDisplayPreviewBookButton=void 0;var s=e("reflux"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../modal"),f=o(c),p=e("../modal_trigger"),h=o(p),m=e("../../react_stores/modal_store"),g=o(m),_=e("../../react_actions/newsfeed_actions"),v=o(_),y=e("./report_wrong_book_button"),b=o(y),k=e("./report_wrong_book_form"),S=o(k),T=e("./wrong_book_report_acknowledgment"),P=o(T),N=e("../../react_stores/user_agent_capabilities_store"),w=o(N),R=e("../../modules/ads/click_tracking_helper"),x=r.shouldDisplayPreviewBookButton=function(e,t){return t&&t.touch===!0?!1:!!e.kcrPreviewUrl};r["default"]=l["default"].createClass({displayName:"PreviewBook",mixins:[a["default"].connect(g["default"],"modalStore"),a["default"].connect(w["default"],"userAgentCapabilities")],propTypes:{book:d["default"].book().isRequired},getDefaultProps:function(){return{trackingOptions:R.TRACKED_CLASSES.preview_book}},getInitialState:function(){return{previewViewed:!1,uniqueId:Math.random(1e6)}},getReportWrongBookModalId:function(){return"report-"+this.props.book.kcrPreviewUrl+this.state.uniqueId},getPreviewModalId:function(){return this.props.book.kcrPreviewUrl+this.state.uniqueId},getAcknowledgmentModalId:function(){return"acknowledge-"+this.props.book.kcrPreviewUrl+this.state.uniqueId},openBookPreview:function(){v["default"].previewBook(),this.setState({previewViewed:!0})},render:function(){var e=null,t=null,r=null,o=this.getPreviewModalId(),s=this.getReportWrongBookModalId(),a=this.getAcknowledgmentModalId();return this.state.modalStore.currentActiveModal===o&&(e=n("div",{className:"previewBook__container"},void 0,n("div",{className:"previewBook__topBanner"},void 0,n("div",{className:"previewBook__headerText"},void 0,"Preview - ",n("cite",{},void 0,this.props.book.title)),n(b["default"],{book:this.props.book,modalId:s})),n("iframe",{className:"previewBook__kcrPreview",src:this.props.book.kcrPreviewUrl}))),this.state.previewViewed&&(t=n(S["default"],{book:this.props.book,modalId:s,acknowledgmentModalId:a}),r=n(P["default"],{modalId:a})),x(this.props.book,this.state.userAgentCapabilities)?n("span",{className:"previewBook"},void 0,n(h["default"],{id:o},void 0,n("button",{"aria-label":"Preview "+this.props.book.title,className:"gr-buttonAsLink\n                             previewBook__openPreview",onClick:this.openBookPreview},void 0,"Preview Book")),t,r,n(f["default"],{id:o,bemModifiers:"preview"},void 0,e)):null}})},{"../../modules/ads/click_tracking_helper":3,"../../react_actions/newsfeed_actions":41,"../../react_stores/modal_store":224,"../../react_stores/user_agent_capabilities_store":232,"../gr_component_factory":114,"../modal":141,"../modal_trigger":142,"../shared/gr_prop_types":165,"./report_wrong_book_button":147,"./report_wrong_book_form":148,"./wrong_book_report_acknowledgment":149,reflux:"reflux"}],147:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../modal_trigger"),f=o(c);r["default"]=l["default"].createClass({displayName:"ReportWrongBookButton",propTypes:{book:d["default"].book().isRequired,modalId:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{className:"previewBook__reportWrongBookButtonContainer"},void 0,n(f["default"],{id:this.props.modalId},void 0,n("button",{"aria-label":"This is not the right book.",className:"gr-buttonAsLink\n                               previewBook__reportWrongBookButton"},void 0,"Not the book you’re looking for?")))}})},{"../gr_component_factory":114,"../modal_trigger":142,"../shared/gr_prop_types":165,react:"react"}],148:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../modal"),f=o(c),p=e("../../react_actions/modal_actions"),h=o(p),m=e("lodash"),g=o(m),_={wrongBook:"It’s the wrong book",wrongEdition:"It’s the wrong edition",other:"Other"};r["default"]=l["default"].createClass({displayName:"ReportWrongBookForm",propTypes:{book:d["default"].book().isRequired,modalId:a["default"].PropTypes.string.isRequired,acknowledgmentModalId:a["default"].PropTypes.string.isRequired},getAuthorString:function(){return"by "+this.props.book.authorName},showReportAcknowledgement:function(){h["default"].openModal(this.props.acknowledgmentModalId)},closeModal:function(e){e.preventDefault(),h["default"].closeModal()},renderWrongBookForm:function(){var e=[];return g["default"].forEach(_,function(t,r){e.push(n("option",{value:r},r,t))}),n("form",{className:"previewBook__reportWrongBookForm",action:"/kindle_book_mapping_flags","data-remote":"true",method:"post"},void 0,"We’d love your help. Let us know what’s wrong with this preview of ",n("cite",{},void 0,this.props.book.title),this.props.book.authorName?this.getAuthorString():"",".",n("br",{}),n("input",{type:"hidden",name:"kindle_book_mapping_flag[book_id]",value:this.props.book.bookId},void 0),n("div",{className:"gr-formInputContainer"},void 0,n("label",{className:"gr-label",htmlFor:"kindle_book_mapping_flag_reason"},void 0,"Problem"),n("select",{name:"kindle_book_mapping_flag[reason]",id:"kindle_book_mapping_flag_reason"},void 0,e)),n("div",{className:"gr-formInputContainer"},void 0,n("label",{className:"gr-label",htmlFor:"kindle_book_mapping_flag_other_reason"},void 0,"Details (if other)"),n("input",{name:"kindle_book_mapping_flag[other_reason]",id:"kindle_book_mapping_flag_other_reason"})),n("button",{className:"gr-button gr-button--modalPrimaryLeft",type:"submit",onClick:this.showReportAcknowledgement},void 0,"Report Problem"),n("button",{className:"gr-buttonAsLink",onClick:this.closeModal,type:"button"},void 0,"Cancel"))},render:function(){return n(f["default"],{id:this.props.modalId},void 0,n("h2",{},void 0,"See a Problem?"),this.renderWrongBookForm())}})},{"../../react_actions/modal_actions":40,"../gr_component_factory":114,"../modal":141,"../shared/gr_prop_types":165,lodash:"lodash",react:"react"}],149:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal"),d=o(u),c=e("../../react_actions/modal_actions"),f=o(c);r["default"]=l["default"].createClass({displayName:"WrongBookReportAcknowledgment",propTypes:{modalId:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{className:"previewBook__wrongBookReportAcknowledgment"},void 0,n(d["default"],{id:this.props.modalId},void 0,"Thanks for telling us about the problem.",n("div",{},void 0,n("button",{className:"gr-button",onClick:f["default"].closeModal},void 0,"Close"))))}})},{"../../react_actions/modal_actions":40,"../gr_component_factory":114,"../modal":141,react:"react"}],150:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../shared/gr_prop_types"),i=o(a),l=e("../../modules/reading_notes/reading_notes_helper"),u=function(e){return n("div",{className:"annotatedBookItem"},void 0,n("a",{className:"annotatedBookItem__knhLink",href:e.readingNotesUrl},void 0,n("div",{className:"annotatedBookItem__mobileColumn"},void 0,n("img",{src:e.imageUrl}),n("div",{className:"annotatedBookItem__bookInfo"},void 0,n("div",{className:"annotatedBookItem__bookInfo__bookTitle"},void 0,e.title),n("div",{className:"annotatedBookItem__bookInfo__bookAuthor"},void 0,"By ",e.authorName),c(e)))))},d=function(e){return n("div",{className:"annotatedBookItem"},void 0,n("a",{className:"annotatedBookItem__knhLink",href:e.readingNotesUrl},void 0,n("div",{className:"annotatedBookItem__imageColumn"},void 0,n("img",{src:e.imageUrl})),n("div",{className:"annotatedBookItem__mainColumn"},void 0,n("div",{className:"annotatedBookItem__bookInfo"},void 0,n("div",{className:"annotatedBookItem__bookInfo__bookTitle"},void 0,e.title),n("div",{className:"annotatedBookItem__bookInfo__bookAuthor"},void 0,"By ",e.authorName),c(e)))))},c=function(e){return e.noSharedAnnotations?n("div",{},void 0,n("div",{className:"annotatedBookItem__bookInfo__knhCta annotatedBookItem__bookInfo__knhCta--noneVisible"},void 0,e.knhCta)):n("div",{},void 0,n("div",{className:"annotatedBookItem__bookInfo__knhCta"},void 0,e.knhCta))},f=function(e){var t=e.annotatedBookData,r=e.size;return r===l.LAYOUT_SIZE.WIDE?d(t):u(t)};f.propTypes={annotatedBookData:i["default"].readingNotesAnnotatedBookItem().isRequired,size:s.PropTypes.string.isRequired},r["default"]=f},{"../../modules/reading_notes/reading_notes_helper":23,"../shared/gr_prop_types":165,react:"react"}],151:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../shared/gr_prop_types"),i=o(a),l=e("../../modules/reading_notes/reading_notes_helper"),u=e("./reading_notes_header"),d=o(u),c=e("./annotated_books_page"),f=o(c),p=function(e,t){return n("div",{},void 0,n(d["default"],{user:e.user,headline:e.headline}),n(f["default"],{user:e.user,ownerHasLinkedAmazonAccount:e.ownerHasLinkedAmazonAccount,createLinking:e.createLinking,updateLinking:e.updateLinking,learnMore:e.learnMore,contactUs:e.contactUs,size:t}))},h=function(e){return n("div",{className:"gr-annotatedBooksPage"},void 0,n("div",{className:"gr-annotatedBooksPage--wide"},void 0,p(e,l.LAYOUT_SIZE.WIDE)),n("div",{className:"gr-annotatedBooksPage--narrow"
},void 0,p(e,l.LAYOUT_SIZE.NARROW)))};h.propTypes={user:i["default"].user().isRequired,ownerHasLinkedAmazonAccount:s.PropTypes.bool.isRequired,headline:s.PropTypes.string.isRequired,createLinking:s.PropTypes.string,updateLinking:s.PropTypes.string,learnMore:s.PropTypes.string,contactUs:s.PropTypes.string},r["default"]=h},{"../../modules/reading_notes/reading_notes_helper":23,"../shared/gr_prop_types":165,"./annotated_books_page":153,"./reading_notes_header":154,react:"react"}],152:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=e("lodash"),u=e("./annotated_book_item"),d=o(u);r["default"]=a["default"].createClass({displayName:"AnnotatedBooksList",propTypes:{annotatedBooksCollection:i.PropTypes.array.isRequired,size:i.PropTypes.string.isRequired},render:function(){var e=this;return n("div",{className:"annotatedBooksList"},void 0,(0,l.map)(this.props.annotatedBooksCollection,function(t){return n(d["default"],{annotatedBookData:t,size:e.props.size},t.asin)}))}})},{"../gr_component_factory":114,"./annotated_book_item":150,lodash:"lodash",react:"react"}],153:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=e("../shared/gr_prop_types"),u=o(l),d=e("reflux"),c=o(d),f=e("lodash"),p=e("../../modules/reading_notes/reading_notes_helper"),h=e("./annotated_books_list"),m=o(h),g=e("../flash_message"),_=o(g),v=e("../../react_actions/reading_notes/annotated_books_actions"),y=o(v),b=e("../../react_stores/reading_notes/annotated_books_store"),k=o(b),S=e("../spinner"),T=o(S);r["default"]=a["default"].createClass({displayName:"AnnotatedBooksPage",mixins:[c["default"].connect(k["default"],"annotatedBooksStore")],propTypes:{user:u["default"].user().isRequired,ownerHasLinkedAmazonAccount:i.PropTypes.bool.isRequired,createLinking:i.PropTypes.string,updateLinking:i.PropTypes.string,learnMore:i.PropTypes.string,contactUs:i.PropTypes.string,size:i.PropTypes.string.isRequired},createLinkHandler:function(){window.open(this.props.createLinking,"","width=900, height=540")},loadAnnotatedBooksHandler:function(){y["default"].loadAnnotatedBooks(this.props.user.id)},componentWillMount:function(){this.props.ownerHasLinkedAmazonAccount&&y["default"].loadAnnotatedBooks(this.props.user.id)},render:function(){var e=this.state.annotatedBooksStore,t=void 0;return t=this.props.ownerHasLinkedAmazonAccount?(0,f.isEmpty)(e.annotatedBooksCollection)?e.showSpinner?this.renderLoadingView():this.renderEmptyOwnerView():this.renderCollection():this.renderUnlinkedView(),n("div",{className:"annotatedBooksPage"},void 0,e.showError?n(_["default"],{category:"error",message:p.BOOK_LOAD_ERROR_MSG}):null,t)},renderLoadingView:function(){return n("div",{className:"annotatedBooksPage__loading"},void 0,n(T["default"],{}))},renderUnlinkedView:function(){return n("div",{className:"annotatedBooksPage__unlinked"},void 0,n("div",{className:"annotatedBooksPage__unlinked__gkLogo"}),n("p",{className:"annotatedBooksPage__unlinked__description"},void 0,"Link your Goodreads and Amazon accounts to access your Kindle notes and highlights on Goodreads."),n("p",{className:"annotatedBooksPage__unlinked__learnMore"},void 0,n("a",{href:this.props.learnMore},void 0,"Learn More about Kindle Notes & Highlights")),n("div",{className:"annotatedBooksPage__unlinked__linkBtn"},void 0,n("button",{className:"gr-button gr-button--dark gr-button--fullWidth",onClick:this.createLinkHandler},void 0,"Connect your accounts")))},renderEmptyOwnerView:function(){return n("div",{className:"annotatedBooksPage__emptyOwner"},void 0,n("div",{className:"annotatedBooksPage__emptyOwner__description"},void 0,"It looks like you don’t have any Kindle ebooks with notes or highlights.",n("a",{className:"annotatedBooksPage__emptyOwner__description__link",href:this.props.learnMore},void 0,"Learn More"),"about Kindle Notes & Highlights and",n("a",{className:"annotatedBooksPage__emptyOwner__description__link",href:this.props.contactUs},void 0,"contact us"),"if you have any questions."),n("div",{className:"annotatedBooksPage__emptyOwner__content"},void 0,n("div",{className:"annotatedBooksPage__emptyOwner__gkLogo"}),n("p",{className:"annotatedBooksPage__emptyOwner__status"},void 0,"Your Goodreads account is connected to your Amazon account."),n("div",{className:"annotatedBooksPage__emptyOwner__updateLink"},void 0,n("a",{href:this.props.updateLinking},void 0,"Update account linking"))))},renderCollection:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection"},void 0,n("div",{className:"annotatedBooksPage__collection__description"},void 0,n("span",{},void 0,"Below are all of the books in your Kindle Library with highlights, starting with the most recently updated.")),n(m["default"],{annotatedBooksCollection:e.annotatedBooksCollection,size:this.props.size}),this.renderLoadMore())},renderLoadMore:function(){var e=this.state.annotatedBooksStore;return n("div",{className:"annotatedBooksPage__collection__loadMoreContainer"},void 0,e.showSpinner?n(T["default"],{}):e.nextToken?n("button",{className:"annotatedBooksPage__collection__loadMoreButton gr-button gr-button--dark",onClick:this.loadAnnotatedBooksHandler},void 0,"Load More"):null)}})},{"../../modules/reading_notes/reading_notes_helper":23,"../../react_actions/reading_notes/annotated_books_actions":43,"../../react_stores/reading_notes/annotated_books_store":226,"../flash_message":112,"../gr_component_factory":114,"../shared/gr_prop_types":165,"../spinner":177,"./annotated_books_list":152,lodash:"lodash",react:"react",reflux:"reflux"}],154:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("react"),l=e("../shared/gr_prop_types"),u=o(l),d=e("../../modules/shape_icon_values"),c=e("../user/user_icon"),f=o(c);r["default"]=a["default"].createClass({displayName:"ReadingNotesHeader",propTypes:{user:u["default"].user().isRequired,headline:i.PropTypes.string.isRequired},render:function(){return n("div",{className:"readingNotesHeader"},void 0,n("div",{className:"readingNotesHeader__userIcon"},void 0,n(f["default"],{user:this.props.user,size:d.ICON_SIZES.LARGE})),n("span",{className:"readingNotesHeader__headline"},void 0,this.props.headline))}})},{"../../modules/shape_icon_values":24,"../gr_component_factory":114,"../shared/gr_prop_types":165,"../user/user_icon":185,react:"react"}],155:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.MESSAGE=void 0;var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal"),d=o(u),c=e("../../react_components/want_to_read/want_to_read_button"),f=o(c),p=r.MESSAGE="To make your notes and highlights visible, first add this book to one of your shelves.";r["default"]=l["default"].createClass({displayName:"ReadingNotesShelvingModal",propTypes:{book:a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired}).isRequired},renderModalContent:function(){return n("div",{className:"gr-mediaFlexbox"},void 0,n("img",{className:"gr-mediaFlexbox__media u-marginRightMedium",src:this.props.book.imageUrl,alt:this.props.book.title}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("h3",{className:"gr-h3 gr-h3--noTopMargin gr-h3--serif"},void 0,"Add your book"),n("div",{className:"readingNotesShelvingModal__text"},void 0,p),n(f["default"],{bookId:this.props.book.id,bookTitle:this.props.book.title,uniqueId:"readingNotesShelvingModalWTR"})))},render:function(){return n(d["default"],{id:"readingNotesShelvingModal",bemModifiers:"readingNotesShelving"},void 0,this.renderModalContent())}})},{"../../react_components/want_to_read/want_to_read_button":194,"../gr_component_factory":114,"../modal":141,react:"react"}],156:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../modal_trigger"),d=o(u),c=e("../../react_stores/shelvings_store"),f=o(c),p=e("../../react_mixins/gr_reflux");r["default"]=l["default"].createClass({displayName:"ReadingNotesShelvingModalTrigger",propTypes:{bookId:a["default"].PropTypes.string.isRequired,innerHtml:a["default"].PropTypes.string.isRequired},mixins:[(0,p.connectToLazyStore)(f["default"],"bookId",{stateKey:"shelvings"})],renderInnerHtml:function(){return n("span",{dangerouslySetInnerHTML:{__html:this.props.innerHtml}})},render:function(){return null===this.state.shelvings.exclusiveShelfName?n(d["default"],{id:"readingNotesShelvingModal",bemModifiers:"readingNotesShelving"},void 0,n("div",{className:"readingNotesShelvingModalTrigger__unclickableInnerHtml"},void 0,this.renderInnerHtml())):this.renderInnerHtml()}})},{"../../react_mixins/gr_reflux":210,"../../react_stores/shelvings_store":229,"../gr_component_factory":114,"../modal_trigger":142,react:"react"}],157:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("lodash"),u=o(l),d=e("../gr_component_factory"),c=o(d),f=e("reflux"),p=o(f),h=e("react-onclickoutside"),m=o(h),g=e("classnames"),_=o(g),v=e("../../modules/keys"),y=o(v),b=e("../../react_stores/book_search_store_factory"),k=o(b),S=e("./book_search_results"),T=o(S),P=e("../spinner"),N=o(P),w=e("../../react_mixins/factory_store_mixin"),R=o(w),x=300;r["default"]=c["default"].createClass({displayName:"BookSearch",mixins:[m["default"],p["default"].ListenerMixin,(0,R["default"])(k["default"])],propTypes:{onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,shelfName:i["default"].PropTypes.string,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:5,closeAfterResultChosen:!1}},componentDidMount:function(){var e=this;this.delayedSearch=u["default"].debounce(function(t){e.actions.search(t.target.value,e.props.autocompleteUrl)},x)},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){u["default"].isEmpty(e.target.value)?this.hide():(e.persist(),this.delayedSearch(e))},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=(0,_["default"])("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-iconButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?s("span",{className:e},void 0,s(N["default"],{})):s("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,_["default"])(this.withBemModifiers("searchBox")),t=(0,_["default"])(this.withBemModifiers("searchBox__input"));return s("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,s("form",{autoComplete:"off",action:this.props.searchPath,role:"search","aria-label":"Search for books to add to your shelves"},void 0,s("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(T["default"],n({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../modules/keys":22,"../../react_mixins/factory_store_mixin":209,"../../react_stores/book_search_store_factory":213,"../gr_component_factory":114,"../spinner":177,"./book_search_results":159,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],158:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("classnames"),f=o(c),p=e("../author/author_badge"),h=o(p);r["default"]=l["default"].createClass({displayName:"BookSearchResult",propTypes:{book:d["default"].book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.book)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.book.imageUrl,alt:""}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-book__title gr-book__title--navbar u-defaultType"},void 0,this.props.book.title),n("div",{className:"gr-book__author gr-book__author--navbar"},void 0,"by ",this.props.book.author.name,a["default"].createElement(h["default"],this.props.book.author))))}})},{"../author/author_badge":67,"../gr_component_factory":114,"../shared/gr_prop_types":165,classnames:"classnames",react:"react"}],159:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("classnames"),d=o(u),c=e("../drop_down_list"),f=o(c),p=e("./book_search_result"),h=o(p),m=e("../gr_component_factory"),g=o(m);r["default"]=g["default"].createClass({displayName:"BookSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.shape({title:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired})},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-buttonAsLink","searchResults__lastItem",this.withBemElement("searchResults","lastItem"));return n("button",{className:t,type:"submit"},void 0,e)},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("searchResults"),"gr-box","gr-box--withShadow");return n("div",{className:t,id:"bookSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Book search results"},void 0,n(f["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return n("div",{className:(0,d["default"])("searchResults__item",{"searchResults__item--active":t===e.props.activeResult}),onMouseOver:function(){e.props.mouseoverAction(t.bookId)}},t.bookId,n(h["default"],{book:t,onChooseResult:e.props.onChooseResult}))}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../drop_down_list":101,"../gr_component_factory":114,"./book_search_result":158,classnames:"classnames",lodash:"lodash",react:"react"}],160:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("./gr_component_factory"),u=o(l),d=e("classnames"),c=o(d),f=e("../modules/shape_icon_values"),p=e("lodash");r["default"]=u["default"].createClass({displayName:"ShapeIcon",propTypes:{imageUrl:i["default"].PropTypes.string.isRequired,imageAlt:i["default"].PropTypes.string.isRequired,includeLink:i["default"].PropTypes.bool,linkUrl:i["default"].PropTypes.string,size:i["default"].PropTypes.oneOf((0,p.values)(f.ICON_SIZES)),shape:i["default"].PropTypes.oneOf((0,p.values)(f.ICON_SHAPES)),border:i["default"].PropTypes.bool},getShapeClass:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=this.props.shape+"Icon";return e&&(t+="--"+e),t},getDefaultProps:function(){return{includeLink:!1,size:f.ICON_SIZES.SMALL,shape:f.ICON_SHAPES.CIRCLE,border:!1}},render:function(){var e,t=(0,c["default"])(this.props.className,(e={},n(e,""+this.getShapeClass(),!0),n(e,""+this.getShapeClass("medium"),this.props.size===f.ICON_SIZES.MEDIUM),n(e,""+this.getShapeClass("large"),this.props.size===f.ICON_SIZES.LARGE),n(e,""+this.getShapeClass("border"),this.props.border),e));return this.props.includeLink&&this.props.linkUrl?s("a",{href:this.props.linkUrl},void 0,s("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})):s("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})}})},{"../modules/shape_icon_values":24,"./gr_component_factory":114,classnames:"classnames",lodash:"lodash",react:"react"}],161:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"ShareButton",propTypes:{textLabel:a["default"].PropTypes.string},getDefaultProps:function(){return{textLabel:"Share"}},render:function(){return n("button",{className:"gr-shareButton",type:"button"},void 0,n("span",{className:"gr-shareButton__innerWrapper"},void 0,n("span",{className:"gr-shareButton__icon"}),n("span",{className:"gr-shareButton__textLabel"},void 0,this.props.textLabel)))}})},{"./gr_component_factory":114,react:"react"}],162:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=o(a),l=e("./gr_component_factory"),u=o(l),d=e("reflux"),c=o(d),f=e("./modal_trigger"),p=o(f),h=e("./share_button"),m=o(h),g=e("./modal"),_=o(g),v=e("./share_social"),y=o(v),b=e("./user_content/string_counter"),k=o(b),S=e("../react_stores/share_dialog_store"),T=o(S),P=e("../react_actions/share_dialog_actions"),N=o(P),w=e("classnames"),R=o(w),x=e("../modules/env_utils"),A=o(x),C=e("./flash_message"),M=o(C),E=e("./sharing/previews/share_dialog_book_preview"),L=o(E),I=e("./sharing/previews/share_dialog_topic_preview"),U=o(I);r["default"]=u["default"].createClass({displayName:"ShareDialog",mixins:[c["default"].connect(T["default"],"sharingDialog")],propTypes:{signedIn:i["default"].PropTypes.bool,signInUrl:i["default"].PropTypes.string,social:i["default"].PropTypes.shape({inModal:i["default"].PropTypes.shape({facebook:i["default"].PropTypes.bool.isRequired,twitter:i["default"].PropTypes.bool.isRequired,pinterest:i["default"].PropTypes.bool.isRequired,copyLink:i["default"].PropTypes.bool.isRequired}).isRequired,outsideModal:i["default"].PropTypes.shape({facebook:i["default"].PropTypes.bool.isRequired,twitter:i["default"].PropTypes.bool.isRequired,pinterest:i["default"].PropTypes.bool.isRequired,copyLink:i["default"].PropTypes.bool.isRequired}).isRequired,fbOptions:i["default"].PropTypes.object,twitterOptions:i["default"].PropTypes.object,pinterestOptions:i["default"].PropTypes.object}).isRequired,sharingData:i["default"].PropTypes.shape({resourceTypeFriendlyText:i["default"].PropTypes.string.isRequired,resourceId:i["default"].PropTypes.number.isRequired,sharerUserId:i["default"].PropTypes.number}).isRequired,includePreview:i["default"].PropTypes.bool,previewData:i["default"].PropTypes.object},getDefaultProps:function(){return{includePreview:!1}},getInitialState:function(){return{uniqueId:Math.random(1e6)}},getResourceTypeIdentifier:function(){return this.props.sharingData.resourceTypeFriendlyText.replace(/\s/g,"").toLowerCase()},getShareModalId:function(){return"share-"+this.getResourceTypeIdentifier()+"-modal"+this.state.uniqueId},socialExists:function(e){return this.props.social[e].facebook||this.props.social[e].twitter||this.props.social[e].pinterest||this.props.social[e].copyLink},renderPreview:function(){if(!this.props.includePreview)return null;var e=void 0,t=this.props.sharingData.resourceTypeFriendlyText;switch(t){case"book":e=i["default"].createElement(L["default"],this.props.previewData);break;case"discussion":e=i["default"].createElement(U["default"],this.props.previewData)}return e?e:void 0},renderSocialInModal:function(e){if(this.socialExists("inModal")){var t=e+" share on:";return s("div",{className:"shareModal__socialContainer"},void 0,s("div",{className:"shareModal__socialPrompt"},void 0,t),i["default"].createElement(y["default"],n({},this.props.social.inModal,{bemModifiers:"modal",fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_sharingModal"})))}return null},renderCharacterCounter:function(){var e=this.state.sharingDialog.sharingTextInputValue||"";return s(k["default"],{counterType:"character",maxLength:S.MAXIMUM_SHARING_TEXT_LENGTH,warnLength:S.WARNING_SHARING_TEXT_LENGTH,text:e})},handleShare:function(){var e=this.props.sharingData,t=this.state.sharingDialog.sharingTextInputValue;N["default"].submitShare(e,t)},renderSharePrompt:function(){var e=(0,R["default"])("shareModal__bottomContainer",{"shareModal__bottomContainer--noSocial":!this.socialExists("inModal"),"shareModal__bottomContainer--social":this.socialExists("inModal")});return s("span",{className:"shareModal"},void 0,s("h2",{className:"gr-h3 gr-h3--serif shareModal__heading"},void 0,"Share this ",this.props.sharingData.resourceTypeFriendlyText," on Goodreads"),this.renderShareError(),s("textarea",{"aria-label":"Share text",placeholder:"Say something about this "+this.props.sharingData.resourceTypeFriendlyText+"...",value:this.state.sharingDialog.sharingTextInputValue,onChange:function(e){N["default"].updateSharingTextInputValue(e.target.value)},className:"gr-textInput shareModal__textInput"}),this.renderCharacterCounter(),this.renderPreview(),s("button",{className:"gr-button gr-button--Large shareModal__button",onClick:this.handleShare,type:"button",disabled:this.state.sharingDialog.shareModalButtonDisabled},void 0,"Share"),s("div",{className:e},void 0,this.renderSocialInModal("Or")))},renderShareSuccess:function(){return s("span",{className:"shareModal"},void 0,s("h2",{className:"gr-h3 gr-h3--serif shareModal__heading"},void 0,"Shared!"),s("h3",{className:"gr-hyperlink shareModal__link"},void 0,s("a",{href:this.state.sharingDialog.sharingUrl,"aria-label":"Link to "+this.state.sharingDialog.sharingDisplayName},void 0,"View post")),s("div",{className:"shareModal__bottomContainer shareModal__bottomContainer--shared"},void 0,this.renderSocialInModal("Also")))},renderShareError:function(){if(this.state.sharingDialog.error){var e=this.props.sharingData.resourceTypeFriendlyText,t=this.state.sharingDialog.errorText||"Something went wrong, and your "+e+" wasn't shared. Please try again later.";return s(M["default"],{category:"error",message:t})}return null},renderModalContent:function(){return this.state.sharingDialog.shared?this.renderShareSuccess():this.renderSharePrompt()},renderSocialOutsideModal:function(){return this.socialExists("outsideModal")?i["default"].createElement(y["default"],n({},this.props.social.outsideModal,{fbOptions:this.props.social.fbOptions,twitterOptions:this.props.social.twitterOptions,pinterestOptions:this.props.social.pinterestOptions,metricName:this.getResourceTypeIdentifier()+"_shareModuleBar",bemModifiers:"shareBar"})):null},shouldRedirect:function(){return this.props.signInUrl&&!this.props.signedIn},handleClick:function(){this.shouldRedirect()?this.redirectToSignIn():N["default"].openShareModal(this.getResourceTypeIdentifier())},getSignInUrl:function(){var e=A["default"].getCurrentPath();return this.props.signInUrl+"?returnurl="+e},redirectToSignIn:function(){A["default"].setLocationUrl(this.getSignInUrl())},renderModal:function(){return this.shouldRedirect()?null:s(_["default"],{id:this.getShareModalId(),bemModifiers:"share"},void 0,this.renderModalContent())},render:function(){return s("div",{},void 0,this.renderModal(),s("div",{className:"shareModuleBar"},void 0,s(p["default"],{id:this.getShareModalId(),clickHandler:this.handleClick,bemModifiers:"shareModule"},void 0,s(m["default"],{})),this.renderSocialOutsideModal()))}})},{"../modules/env_utils":19,"../react_actions/share_dialog_actions":45,"../react_stores/share_dialog_store":227,"./flash_message":112,"./gr_component_factory":114,"./modal":141,"./modal_trigger":142,"./share_button":161,"./share_social":163,"./sharing/previews/share_dialog_book_preview":169,"./sharing/previews/share_dialog_topic_preview":171,"./user_content/string_counter":191,classnames:"classnames",react:"react",reflux:"reflux"}],163:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("./sharing/facebook_share"),d=o(u),c=e("./sharing/twitter_share"),f=o(c),p=e("./sharing/pinterest_share"),h=o(p),m=e("classnames"),g=o(m);r["default"]=l["default"].createClass({displayName:"ShareSocial",propTypes:{facebook:a["default"].PropTypes.bool,twitter:a["default"].PropTypes.bool,pinterest:a["default"].PropTypes.bool,copyLink:a["default"].PropTypes.bool,fbOptions:a["default"].PropTypes.object,twitterOptions:a["default"].PropTypes.object,
pinterestOptions:a["default"].PropTypes.object,metricName:a["default"].PropTypes.string},getDefaultProps:function(){return{facebook:!1,twitter:!1,pinterest:!1,copyLink:!1,metricName:""}},renderSocialPlatform:function(e){if(!this.props[e])return null;var t="SocialSharing_"+this.props.metricName+"_"+e;switch(e){case"facebook":return n(d["default"],{options:this.props.fbOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"twitter":return n(f["default"],{options:this.props.twitterOptions,metricName:t,bemModifiers:this.props.bemModifiers});case"pinterest":return n(h["default"],{options:this.props.pinterestOptions,metricName:t,bemModifiers:this.props.bemModifiers})}},render:function(){var e=(0,g["default"])(this.withBemModifiers("shareSocialButtons"),this.props.className);return n("div",{className:e},void 0,this.renderSocialPlatform("facebook"),this.renderSocialPlatform("twitter"),this.renderSocialPlatform("pinterest"))}})},{"./gr_component_factory":114,"./sharing/facebook_share":167,"./sharing/pinterest_share":168,"./sharing/twitter_share":172,classnames:"classnames",react:"react"}],164:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={get:function(e){var t=null,r=window.$j;return r&&r.each(document.cookie.split("; "),function(r,o){var n=o.split("=");n[0]===e&&(t=n[1])}),t},set:function(e,t,r){r=r||365;var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3);var n="; expires="+o.toGMTString();document.cookie=e+"="+encodeURIComponent(t)+n+"; path=/"}}},{}],165:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){function t(t,r,o,n){return n||(n="<<anonymous>>"),l["default"].isNull(r[o])||l["default"].isUndefined(r[o])?t?new Error("Required property `"+o+"` was not specified in "+("`"+n+"`.")):null:e(r,o,n)}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=function(e,t,r){var o=e[t],n=l["default"].isString(o)?new Date(o):o;return!l["default"].isDate(n)||l["default"].isNaN(n.getTime())?new Error("Property '"+t+"' must be a Date. "+r+" was supplied: '"+o+"'."):void 0},d=function(e,t,r){var o=e[t];return 0>=o?new Error("Property '"+t+"' must be > 0. "+r+" was supplied: '"+o+"'."):void 0},c=function(e,t){return l["default"].merge({},e,t)},f=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string,informalName:a["default"].PropTypes.string};return a["default"].PropTypes.shape(c(t,e))},p=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={bookId:a["default"].PropTypes.string,workId:a["default"].PropTypes.string,bookUrl:a["default"].PropTypes.string,authorName:a["default"].PropTypes.string,title:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,numPages:a["default"].PropTypes.number};return a["default"].PropTypes.shape(c(t,e))},h=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=_();return a["default"].PropTypes.shape(c(t,e))},m=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string.isRequired})},g=function(){return{html:a["default"].PropTypes.string.isRequired,truncatedHtml:a["default"].PropTypes.string}},_=function(){return{html:a["default"].PropTypes.string,fullContentUrl:a["default"].PropTypes.string,fullContentText:a["default"].PropTypes.string,truncated:a["default"].PropTypes.bool.isRequired,className:a["default"].PropTypes.string,bookDescriptionTargetingData:a["default"].PropTypes.object}},v=function(){return a["default"].PropTypes.shape({user:f().isRequired,friendUser:f().isRequired,isMyFriend:a["default"].PropTypes.bool.isRequired,addFriendUrl:a["default"].PropTypes.string,compareBooksUrl:a["default"].PropTypes.string,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:p()})},y=function(){return a["default"].PropTypes.shape({user:f().isRequired,followingUser:f().isRequired,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:p()})},b=function(){return a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string})},k=function(){return a["default"].PropTypes.shape({canComment:a["default"].PropTypes.bool.isRequired,commentable:a["default"].PropTypes.bool.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:b(),subjectUrl:a["default"].PropTypes.string})},S=function(){return a["default"].PropTypes.shape({key:a["default"].PropTypes.string.isRequired,label:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired})},T=function(){return a["default"].PropTypes.shape({author:m().isRequred,title:a["default"].PropTypes.string,url:a["default"].PropTypes.string})},P=function(){return a["default"].PropTypes.shape({title:a["default"].PropTypes.string,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,typeDisplayName:a["default"].PropTypes.string})},N=function(){return a["default"].PropTypes.shape({title:a["default"].PropTypes.string,body:a["default"].PropTypes.object,url:a["default"].PropTypes.string,authorImageUrl:a["default"].PropTypes.string,author:a["default"].PropTypes.string,bookImageUrl:a["default"].PropTypes.string,bookTitle:a["default"].PropTypes.string,typeDisplayName:a["default"].PropTypes.string})},w=function(){return a["default"].PropTypes.shape({user:f().isRequired,author:m().isRequred,userAuthorFollowingsUrl:a["default"].PropTypes.string})},R=function(){return a["default"].PropTypes.shape({author:m().isRequired,message:a["default"].PropTypes.string,url:a["default"].PropTypes.string.isRequired})},x=function(){return a["default"].PropTypes.shape({author:m().isRequired,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,quotesAuthorUrl:a["default"].PropTypes.string.isRequired})},A=function(){return a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,id:a["default"].PropTypes.number.isRequired,lastActiveAt:n(u)})},C=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,title:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,totalPosts:a["default"].PropTypes.string.isRequired,newPosts:a["default"].PropTypes.string,newCommentsUrl:a["default"].PropTypes.string,updatedAt:n(u),folder:a["default"].PropTypes.shape({name:a["default"].PropTypes.string,url:a["default"].PropTypes.string})})},M={user:f().isRequired,pollName:a["default"].PropTypes.string.isRequired,answer:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,isGroupPoll:a["default"].PropTypes.bool.isRequired,isChoicePoll:a["default"].PropTypes.bool.isRequired,groupName:a["default"].PropTypes.string,groupUrl:a["default"].PropTypes.string},E=function(){return a["default"].PropTypes.shape(M)},L=function(){return a["default"].PropTypes.shape(c(M,{choiceYear:a["default"].PropTypes.number.isRequired,choiceUrl:a["default"].PropTypes.string.isRequired,badgeUrl:a["default"].PropTypes.string.isRequired,votedBook:p().isRequired}))},I=function(){return{category:a["default"].PropTypes.number.isRequired,questionText:a["default"].PropTypes.string.isRequired,isSpoiler:a["default"].PropTypes.bool.isRequired,questionUrl:a["default"].PropTypes.string.isRequired,user:f().isRequired,authorQuestionsUrl:a["default"].PropTypes.string,book:p()}},U=function(){return{user:f().isRequired,answerText:a["default"].PropTypes.shape(_()),isSpoiler:a["default"].PropTypes.bool.isRequired,communityQuestion:a["default"].PropTypes.shape(I()).isRequired}},O=function(){return a["default"].PropTypes.shape({book:p(),customText:a["default"].PropTypes.object,helpLink:a["default"].PropTypes.string,defaultIcon:a["default"].PropTypes.string,numAdditionalFriends:a["default"].PropTypes.number,friendActionText:a["default"].PropTypes.string,firstFriend:f(),customTextReview:a["default"].PropTypes.object,similarBook:p(),similarBookShelf:a["default"].PropTypes.string,similarBookShelfUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array})},D=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={actor:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string}),actors:a["default"].PropTypes.array,createdAt:a["default"].PropTypes.string,body:a["default"].PropTypes.string,resource:a["default"].PropTypes.shape({text:a["default"].PropTypes.string,url:a["default"].PropTypes.string}),viewed:a["default"].PropTypes["boolean"],moreActors:a["default"].PropTypes["boolean"]};return a["default"].PropTypes.shape(c(t,e))},j=a["default"].PropTypes.shape({label:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired}),B=function(){return a["default"].PropTypes.shape({uri:a["default"].PropTypes.string,book:p(),description:a["default"].PropTypes.shape(g()),dealPrice:a["default"].PropTypes.string,listPrice:a["default"].PropTypes.string,expirationDate:a["default"].PropTypes.string,genres:a["default"].PropTypes.array,tags:a["default"].PropTypes.array,retailerLinks:a["default"].PropTypes.shape({preferred:j.isRequired,additional:a["default"].PropTypes.arrayOf(j)})})},q=function(e){return a["default"].PropTypes.shape({destination:a["default"].PropTypes.string.isRequired,type:a["default"].PropTypes.string.isRequired,object:e})},F=function(){return q(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string}))},H=function(){return q(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,authorName:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,title:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string}))},G=function(){return q(a["default"].PropTypes.shape({id:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string}))},$=function(){return a["default"].PropTypes.shape({asin:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,authorName:a["default"].PropTypes.string.isRequired,sharedCount:a["default"].PropTypes.number.isRequired,highlightCount:a["default"].PropTypes.number,noteCount:a["default"].PropTypes.number,readingNotesUrl:a["default"].PropTypes.string.isRequired,knhCta:a["default"].PropTypes.string.isRequired,noSharedAnnotations:a["default"].PropTypes.bool.isRequired})},W=function(){return a["default"].PropTypes.shape({title:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,id:a["default"].PropTypes.number.isRequired,year:a["default"].PropTypes.number.isRequired,type:a["default"].PropTypes.string.isRequired,maxGoal:a["default"].PropTypes.number.isRequired,isFinished:a["default"].PropTypes.bool,images:a["default"].PropTypes.shape({badge:a["default"].PropTypes.string.isRequired,completed:a["default"].PropTypes.string.isRequired})})};r["default"]={user:f,author:m,blogNewsfeedResource:P,interviewNewsfeedResource:N,book:p,bookDescription:h,quote:x,commentSubject:b,comment:k,like:S,group:A,topic:C,authorBlogPostNewsfeedResource:T,authorFollowNewsfeedResource:w,authorQaSettingNewsfeedResource:R,communityQuestion:I,communityAnswer:U,friendNewsfeedResource:v,userFollowingNewsfeedResource:y,pollVoteNewsfeedResource:E,expandableHtml:g,truncatedHtml:_,choicePollVoteNewsfeedResource:L,date:n(u),naturalNumber:n(d),creative:O,notification:D,deal:B,searchResults:{book:H,author:F,user:G},readingNotesAnnotatedBookItem:$,readingChallenge:W}},{lodash:"lodash",react:"react"}],166:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("react-dom"),i=o(a),l=e("lodash"),u=o(l),d=e("../user_content/spoiler"),c=o(d);r["default"]={replaceSpoilerHTMLWithReactComponents:function(e,t){var r=t||window.$j,o=r(".jsShowSpoiler",e);u["default"].each(o,function(e){var t=r(e),o=t.next(".spoilerContainer");if(o){var n=o.text().replace("(hide spoiler)",""),a=s["default"].createElement(c["default"],{html:n}),l=r("<span></span>");t.replaceWith(l),i["default"].render(a,r(l)[0])}})}}},{"../user_content/spoiler":190,lodash:"lodash",react:"react","react-dom":"react-dom"}],167:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./../gr_component_factory"),l=o(i),u=e("../../modules/ajax/ajax_helper");r["default"]=l["default"].createClass({displayName:"FacebookShare",propTypes:{options:a["default"].PropTypes.shape({name:a["default"].PropTypes.string,link:a["default"].PropTypes.string,description:a["default"].PropTypes.string,caption:a["default"].PropTypes.string,picture:a["default"].PropTypes.string,properties:a["default"].PropTypes.object,action_link_text:a["default"].PropTypes.string,resource_type:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string},onFacebookButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),$grfb.feedDialog(this.props.options)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--facebook","aria-label":"Share to Facebook",type:"button",onClick:function(){return e.onFacebookButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"./../gr_component_factory":114,react:"react"}],168:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./../gr_component_factory"),l=o(i),u=e("../../modules/ajax/ajax_helper"),d=e("../../modules/child_window_helper"),c=o(d);r["default"]=l["default"].createClass({displayName:"PinterestShare",propTypes:{options:a["default"].PropTypes.shape({desription:a["default"].PropTypes.string,url:a["default"].PropTypes.string,media:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string,windowSpecs:a["default"].PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:700,height:800}}},onPinterestButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),c["default"].openSocialShareWindow("https://pinterest.com/pin/create/link/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--pinterest","aria-label":"Share to Pinterest",type:"button",onClick:function(){return e.onPinterestButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"../../modules/child_window_helper":8,"./../gr_component_factory":114,react:"react"}],169:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a),l=e("./share_dialog_preview"),u=o(l),d=e("../../community_rating"),c=o(d),f=e("../../author/author_badge"),p=o(f);r["default"]=i["default"].createClass({displayName:"ShareDialogBookPreview",propTypes:{author:s.PropTypes.shape({name:s.PropTypes.string.isRequired,isGoodreadsAuthor:s.PropTypes.bool.isRequired}).isRequired,rating:s.PropTypes.string.isRequired,title:s.PropTypes.string.isRequired,imageUrl:s.PropTypes.string.isRequired,ratingsCount:s.PropTypes.number.isRequired,textReviewsCount:s.PropTypes.number.isRequired},renderAuthorText:function(){return n("div",{},void 0,"by ",this.props.author.name,n(p["default"],{isGoodreadsAuthor:this.props.author.isGoodreadsAuthor}))},render:function(){return n(u["default"],{primaryText:this.props.title,secondaryText:this.renderAuthorText(),imageUrl:this.props.imageUrl},void 0,n("div",{className:"u-marginTopXSmall"},void 0,n(c["default"],{rating:parseFloat(this.props.rating),displayAvg:!0,displayAvgRatingText:!1,ratingsCount:this.props.ratingsCount,size:c["default"].ICON_SIZES.MEDIUM,textReviewsCount:this.props.textReviewsCount})))}})},{"../../author/author_badge":67,"../../community_rating":77,"../../gr_component_factory":114,"./share_dialog_preview":170,react:"react"}],170:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../../gr_component_factory"),i=o(a);r["default"]=i["default"].createClass({displayName:"ShareDialogPreview",propTypes:{imageUrl:s.PropTypes.string.isRequired,primaryText:s.PropTypes.string.isRequired,secondaryText:s.PropTypes.oneOfType([s.PropTypes.element,s.PropTypes.string])},renderSecondaryText:function(){return this.props.secondaryText?n("div",{className:"sharePreview__secondaryText"},void 0,this.props.secondaryText):null},render:function(){return n("div",{className:"gr-mediaFlexbox shareModal__previewContainer"},void 0,n("img",{className:"gr-mediaFlexbox__media sharePreview__image",src:this.props.imageUrl,alt:this.props.primaryText}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-h3 gr-h3--serif gr-h3--noMargin"},void 0,this.props.primaryText),this.renderSecondaryText(),n("div",{className:"u-marginTopXSmall"},void 0,this.props.children)))}})},{"../../gr_component_factory":114,react:"react"}],171:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./share_dialog_preview"),a=o(s),i=e("react"),l=e("../../gr_component_factory"),u=o(l),d=e("../../user_content/truncated_html"),c=o(d);r["default"]=u["default"].createClass({displayName:"ShareDialogTopicPreview",propTypes:{topicTitle:i.PropTypes.string.isRequired,groupTitle:i.PropTypes.string.isRequired,imageUrl:i.PropTypes.string.isRequired,description:i.PropTypes.string},render:function(){var e=this.props.groupTitle+" - Discussion";return n(a["default"],{primaryText:this.props.topicTitle,secondaryText:e,imageUrl:this.props.imageUrl},void 0,n("div",{className:"sharePreview__description"},void 0,n(c["default"],{html:this.props.description,truncated:!1})))}})},{"../../gr_component_factory":114,"../../user_content/truncated_html":192,"./share_dialog_preview":170,react:"react"}],172:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./../gr_component_factory"),l=o(i),u=e("../../modules/ajax/ajax_helper"),d=e("../../modules/child_window_helper"),c=o(d);r["default"]=l["default"].createClass({displayName:"TwitterShare",propTypes:{options:a["default"].PropTypes.shape({text:a["default"].PropTypes.string,url:a["default"].PropTypes.string,via:a["default"].PropTypes.string}).isRequired,metricName:a["default"].PropTypes.string,windowSpecs:a["default"].PropTypes.object},getDefaultProps:function(){return{windowSpecs:{left:400,top:200,width:600,height:500}}},onTwitterButtonClick:function(){this.props.metricName&&(0,u.httpPost)("/track/track_click",{data:{feature:this.props.metricName}}),c["default"].openSocialShareWindow("https://twitter.com/intent/tweet/",this.props.options,this.props.windowSpecs)},render:function(){var e=this;return n("button",{className:this.withBemModifiers("shareSocialButtons__button")+" shareSocialButtons__button--twitter","aria-label":"Share to Twitter",type:"button",onClick:function(){return e.onTwitterButtonClick()}})}})},{"../../modules/ajax/ajax_helper":5,"../../modules/child_window_helper":8,"./../gr_component_factory":114,react:"react"}],173:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("lodash"),l=o(i),u=e("classnames"),d=o(u);r["default"]=a["default"].createClass({displayName:"ChoiceSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,description:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string,totalVotes:React.PropTypes.number.isRequired},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!l["default"].isEmpty(this.props.targetUrl)},renderAnnouncementTitle:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__title";return e?n("a",{className:(0,d["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:t},void 0,this.props.announcementText)},render:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl},void 0,n("img",{src:this.props.imageUrl,alt:this.props.imageAlt})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,this.renderAnnouncementTitle(),n("div",{className:"siteAnnouncement__description"},void 0,this.props.description),n("div",{className:"siteAnnouncement__choiceVoteCount"},void 0,this.props.totalVotes.toLocaleString()," votes")))}})},{"../gr_component_factory":114,classnames:"classnames",lodash:"lodash"}],174:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shape_icon"),l=o(i),u=e("../../modules/shape_icon_values"),d=e("lodash"),c=o(d),f=e("classnames"),p=o(f);r["default"]=a["default"].createClass({displayName:"SimpleSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!c["default"].isEmpty(this.props.targetUrl)},renderIcon:function(){return n(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Site Announcement",border:!0})},renderAnnouncementText:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__simpleText";return e?n("a",{className:(0,p["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:t},void 0,this.props.announcementText)},renderSecondaryLinkSection:function(){return this.hasTargetUrl()?n("span",{className:"siteAnnouncement__simpleSecondaryLinkSection"},void 0,n("a",{className:"gr-button gr-button--quiet","aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,"Read more")):null},render:function(){return n("div",{className:"siteAnnouncement\n                      siteAnnouncement--simple\n                      gr-mediaFlexbox\n                      gr-mediaFlexbox--alignItemsCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,this.renderIcon()),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__simpleBody"},void 0,n("h5",{className:"gr-h5 gr-h5--noMargin siteAnnouncement__simpleHeader"},void 0,"Goodreads news"),this.renderAnnouncementText()),this.renderSecondaryLinkSection())}})},{"../../modules/shape_icon_values":24,"../gr_component_factory":114,"../shape_icon":160,classnames:"classnames",lodash:"lodash"}],175:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../gr_component_factory"),i=o(a),l=e("./simple_site_announcement"),u=o(l);r["default"]=i["default"].createClass({displayName:"SiteAnnouncement",propTypes:{title:s.PropTypes.string.isRequired,targetUrl:s.PropTypes.string,displayData:s.PropTypes.shape({description:s.PropTypes.string,mastheadUrl:s.PropTypes.string,imageUrl:s.PropTypes.string}).isRequired},shouldRenderLargeAnnouncement:function(){var e=this.props.displayData;return e&&e.description&&e.mastheadUrl},renderLargeAnnouncement:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl,"aria-label":this.props.title},void 0,n("img",{src:this.props.displayData.mastheadUrl,alt:this.props.title})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,n("a",{className:"siteAnnouncement__title gr-hyperlink",href:this.props.targetUrl},void 0,this.props.title),n("div",{className:"siteAnnouncement__description"},void 0,this.props.displayData.description)))},render:function(){return this.shouldRenderLargeAnnouncement()?this.renderLargeAnnouncement():n(u["default"],{imageUrl:this.props.displayData.imageUrl,announcementText:this.props.title,targetUrl:this.props.targetUrl})}})},{"../gr_component_factory":114,"./simple_site_announcement":174,react:"react"}],176:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shape_icon"),l=o(i),u=e("../../modules/shape_icon_values");r["default"]=a["default"].createClass({displayName:"WelcomeAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired},renderIcon:function(){return n(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Welcome to Goodreads",border:!0})},render:function(){return n("div",{className:"siteAnnouncement siteAnnouncement--welcome"},void 0,n("div",{className:"siteAnnouncement__welcomeIcon"},void 0,this.renderIcon()),n("div",{className:"siteAnnouncement__welcomeBody"},void 0,n("h5",{className:"siteAnnouncement__announcementText"},void 0,"Welcome to Goodreads"),n("span",{},void 0,"Meet your favorite book, find your reading community, and manage your reading life.")))}})},{"../../modules/shape_icon_values":24,"../gr_component_factory":114,"../shape_icon":160}],177:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("./gr_component_factory"),a=o(s),i=e("classnames"),l=o(i);r["default"]=a["default"].createClass({displayName:"Spinner",propTypes:{isSmall:React.PropTypes.bool},getDefaultProps:function(){return{isSmall:!1}},render:function(){var e=(0,l["default"])("spinnerContainer",this.props.className),t=this.props.isSmall?"small":null;
return n("div",{className:e},void 0,n("div",{className:this.withBemModifiers("spinner",t)},void 0,n("div",{className:this.withBemModifiers("spinner__mask",t)},void 0,n("div",{className:this.withBemModifiers("spinner__maskedCircle",t)}))),n("div",{className:"spinnerFallbackText"},void 0,"Loading…"))}})},{"./gr_component_factory":114,classnames:"classnames"}],178:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("./gr_component_factory"),i=o(a),l=e("../react_actions/tab_actions"),u=o(l),d={CLICK:"click",HOVER:"hover"};r["default"]=i["default"].createClass({displayName:"Tab",propTypes:{group:s["default"].PropTypes.string.isRequired,name:s["default"].PropTypes.string.isRequired,initiallySelected:s["default"].PropTypes.bool,triggerEventType:s["default"].PropTypes.string},getDefaultProps:function(){return{initiallySelected:!1,triggerEventType:d.CLICK}},componentDidMount:function(){this.props.initiallySelected&&this.selectTab()},selectTab:function(){u["default"].selectTab(this.props.name,this.props.group)},render:function(){var e={};switch(this.props.triggerEventType){case d.CLICK:e.onClick=this.selectTab;break;case d.HOVER:e.onMouseOver=this.selectTab}return s["default"].createElement("span",e,this.props.children)}})},{"../react_actions/tab_actions":47,"./gr_component_factory":114,react:"react"}],179:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("../react_stores/tabs_store"),f=o(c);r["default"]=l["default"].createClass({displayName:"TabContent",mixins:[d["default"].connect(f["default"],"tabsStore")],propTypes:{group:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired},isActive:function(){return this.props.name===this.state.tabsStore[this.props.group]},render:function(){return n("div",{},void 0,this.isActive()?this.props.children:null)}})},{"../react_stores/tabs_store":230,"./gr_component_factory":114,react:"react",reflux:"reflux"}],180:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("moment"),f=o(c),p=e("../../modules/date_utils");r["default"]=l["default"].createClass({displayName:"RelativeTime",propTypes:{time:d["default"].date.isRequired,longFormat:a["default"].PropTypes.bool},getDefaultProps:function(){return{longFormat:!1}},getRelativeTime:function(){return this.props.longFormat?(0,f["default"])(new Date(this.props.time)).fromNow():(0,p.fromNow)(this.props.time)},render:function(){return n("time",{dateTime:this.props.time,"aria-label":(0,f["default"])(new Date(this.props.time)).fromNow()},void 0,this.getRelativeTime())}})},{"../../modules/date_utils":10,"../gr_component_factory":114,"../shared/gr_prop_types":165,moment:"moment",react:"react"}],181:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("./gr_component_factory"),l=o(i),u=e("./spinner"),d=o(u),c=e("classnames"),f=o(c);r["default"]=l["default"].createClass({displayName:"ToggleSwitch",propTypes:{switchId:a["default"].PropTypes.string.isRequired,changeHandler:a["default"].PropTypes.func.isRequired,isChecked:a["default"].PropTypes.bool,isDisabled:a["default"].PropTypes.bool,isWaiting:a["default"].PropTypes.bool,labelText:a["default"].PropTypes.string},getDefaultProps:function(){return{isChecked:!1,isDisabled:!1,isWaiting:!1,labelText:""}},render:function(){if(this.props.isWaiting)return n(d["default"],{});var e=(0,f["default"])("toggleSwitch",{"toggleSwitch--disabled":this.props.isDisabled});return n("div",{className:e},void 0,n("label",{className:"toggleSwitch__container"},void 0,n("input",{type:"checkbox",className:"toggleSwitch__checkbox u-visuallyHidden",id:this.props.switchId,checked:this.props.isChecked,onChange:this.props.changeHandler,disabled:this.props.isDisabled,"aria-label":this.props.labelText}),n("div",{className:"toggleSwitch__label"},void 0,n("span",{className:"toggleSwitch__labelInner","aria-hidden":!0}),n("span",{className:"toggleSwitch__labelSwitch"}))))}})},{"./gr_component_factory":114,"./spinner":177,classnames:"classnames",react:"react"}],182:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=e("classnames"),u=o(l),d=e("../../gr_component_factory"),c=o(d),f=c["default"].createClass({displayName:"MenuListGroup",propTypes:{className:a["default"].PropTypes.string},render:function(){var e=(0,u["default"])(this.withBemModifiers("gr-menuListGroup"),this.props.className),t=(0,u["default"])(this.withBemModifiers("gr-menuListGroup__listItem"));return n("ul",{className:e},void 0,(0,i.map)(a["default"].Children.toArray(this.props.children),function(e,r){return n("li",{className:t},r,e)}))}});r["default"]=f},{"../../gr_component_factory":114,classnames:"classnames",lodash:"lodash",react:"react"}],183:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../../gr_component_factory"),l=o(i),u=l["default"].createClass({displayName:"MenuListItem",propTypes:{primaryText:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),secondaryText:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),actionLabel:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]),icon:a["default"].PropTypes.element},getDefaultProps:function(){return{bemModifiers:"default"}},getIcon:function(){return this.props.icon?this.props.icon:void 0},render:function(){return n("div",{className:"gr-actionMenuItem"},void 0,this.getIcon(),n("div",{className:"gr-actionMenuItem__label"},void 0,n("div",{className:this.withBemModifiers("gr-actionMenuItem__primaryText")},void 0,this.props.primaryText),n("div",{className:this.withBemModifiers("gr-actionMenuItem__secondaryText")},void 0,this.props.secondaryText)),n("div",{className:this.withBemModifiers("gr-actionMenuItem__action")},void 0,this.props.actionLabel))}});r["default"]=u},{"../../gr_component_factory":114,react:"react"}],184:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../gr_component_factory"),a=o(s),i=e("../../../react_stores/user/preferences/user_preferences_store"),l=o(i),u=e("../../toggle_switch"),d=o(u),c=e("../mobile/menu_list_group"),f=o(c),p=e("../mobile/menu_list_item"),h=o(p),m=e("lodash"),g=o(m),_=e("reflux"),v=o(_),y=e("../../../react_actions/user/preferences/user_preferences_actions"),b=o(y);r["default"]=a["default"].createClass({displayName:"UserPreferencesDeals",mixins:[v["default"].connect(l["default"],"userPreferencesStore")],propTypes:{dealsOptions:React.PropTypes.object.isRequired,enableFeatureExcludeShelves:React.PropTypes.bool},getDefaultProps:function(){return{enableFeatureExcludeShelves:!1}},togglePreference:function(e,t,r,o){var n=this.state.userPreferencesStore,s=g["default"].merge({},n.preferences.deals),a=s[e],l=e==i.DEAL_PREF_TYPES.EXCLUDE_SHELVES?!o.target.checked:o.target.checked;l?(g["default"].includes(a,t)||(g["default"].isEmpty(a)?a=[t]:a.push(t)),s[e]=a):g["default"].pull(a,t),b["default"].updatePreferences(s,i.PREF_TYPES.DEALS,r)},toggleEventsSubscription:function(e,t){var r=this.state.userPreferencesStore,o=g["default"].merge({},r.preferences.deals);o[i.DEAL_PREF_TYPES.EVENTS]=t.target.checked,b["default"].updatePreferences(o,i.PREF_TYPES.DEALS,e)},toggleWTRDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.WTR,e,t)},toggleAuthorsDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.AUTHOR,e,t)},toggleGenresDealType:function(e,t){this.togglePreference(i.DEAL_PREF_TYPES.DEAL_TYPES,i.DEAL_TYPES.GENRE,e,t)},toggleGenre:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.GENRE_URIS,e,t,r)},toggleExcludeShelves:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.EXCLUDE_SHELVES,e,t,r)},toggleRetailer:function(e,t,r){this.togglePreference(i.DEAL_PREF_TYPES.RETAILERS,e,t,r)},isDisabled:function(e){return g["default"].include(this.state.userPreferencesStore.status.deals.disabledPreferences,e)},isWaiting:function(e){return g["default"].contains(this.state.userPreferencesStore.status.deals.waiting,e)},buildGenres:function(e){var t=this,r=g["default"].map(e,function(e){var r=g["default"].includes(t.state.userPreferencesStore.preferences.deals.deal_genre_uris,e.uri),o=e.name.text,s="genre-"+g["default"].last(e.uri.split(".")),a=n(d["default"],{isChecked:r,changeHandler:function(r){t.toggleGenre(e.uri,s,r)},isDisabled:t.isDisabled(i.DEAL_PREF_TYPES.GENRE_URIS),labelText:o,switchId:s});return n(h["default"],{primaryText:o,actionLabel:a},e.uri)});return g["default"].isEmpty(r)||r.push(n(h["default"],{secondaryText:"More genres coming soon!"},"genre-moreGenresSoon")),n(f["default"],{className:"u-noTopPadding u-noBottomPadding"},"genre-toggles",r)},buildEventsSubscription:function(){var e=this,t=this.state.userPreferencesStore.preferences.deals.subscribed_to_events_emails,r="events",o=n(d["default"],{isChecked:t,changeHandler:function(t){e.toggleEventsSubscription(r,t)},labelText:"Toggle events",switchId:r});return n(h["default"],{primaryText:"Deals Events",secondaryText:"Email me deals on top-rated ebooks",actionLabel:o},r)},buildRetailers:function(e){var t=this,r=this.state.userPreferencesStore,o=g["default"].map(e,function(e){var o=g["default"].includes(r.preferences.deals.retailers,e.id),s=e.title,a="retailer-"+e.id,l=n(d["default"],{isChecked:o,changeHandler:function(r){t.toggleRetailer(e.id,a,r)},isDisabled:t.isDisabled(i.DEAL_PREF_TYPES.RETAILERS),labelText:s,switchId:a});return n(h["default"],{primaryText:s,actionLabel:l},e.id)});return g["default"].isEmpty(o)?null:[n(h["default"],{primaryText:"Retailers",secondaryText:"Send me deals from the following retailers:"},"retailers"),n(f["default"],{className:"u-noTopPadding u-noBottomPadding"},"retailers-group",o)]},buildExcludeShelves:function(e){var t=this,r=this.state.userPreferencesStore;return this.props.enableFeatureExcludeShelves?g["default"].map(e,function(e){var o=!g["default"].includes(r.preferences.deals.exclude_shelves,e.id),s=e.title,a="shelf-"+e.id,l=n(d["default"],{isChecked:o,changeHandler:function(r){t.toggleExcludeShelves(e.id,a,r)},isDisabled:t.isDisabled(i.DEAL_PREF_TYPES.EXCLUDE_SHELVES),labelText:s,switchId:a});return n(h["default"],{primaryText:s,secondaryText:e.blurb,actionLabel:l},e.id)}):void 0},buildDealTypes:function(e){var t=this,r=this.state.userPreferencesStore;return g["default"].map(e,function(e){var o=void 0,s=void 0,a=void 0;if(e.id===i.DEAL_TYPES.GENRE){var l=g["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.GENRE);o=e.title,a="dealType-"+i.DEAL_TYPES.GENRE,s=n(d["default"],{isChecked:l,changeHandler:function(e){t.toggleGenresDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.GENRE),labelText:o,switchId:a})}else if(e.id===i.DEAL_TYPES.WTR){var l=g["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.WTR);o=e.title,a="dealType-"+i.DEAL_TYPES.WTR,s=n(d["default"],{isChecked:l,changeHandler:function(e){t.toggleWTRDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.WTR),labelText:o,switchId:a})}else if(e.id===i.DEAL_TYPES.AUTHOR){var l=g["default"].includes(r.preferences.deals.deal_types,i.DEAL_TYPES.AUTHOR);o=e.title,a="dealType-"+i.DEAL_TYPES.AUTHOR,s=n(d["default"],{isChecked:l,changeHandler:function(e){t.toggleAuthorsDealType(a,e)},isDisabled:t.isDisabled(i.DEAL_TYPES.AUTHOR),labelText:o,switchId:a})}return n(h["default"],{primaryText:o,secondaryText:e.blurb,actionLabel:s},e.id)})},render:function(){return n("div",{className:"accountSettingsPage__section"},void 0,n(f["default"],{},void 0,this.buildDealTypes(this.props.dealsOptions.types),this.buildGenres(this.props.dealsOptions.genres),this.buildEventsSubscription(),this.buildExcludeShelves(this.props.dealsOptions.shelves),this.buildRetailers(this.props.dealsOptions.retailers)))}})},{"../../../react_actions/user/preferences/user_preferences_actions":48,"../../../react_stores/user/preferences/user_preferences_store":231,"../../gr_component_factory":114,"../../toggle_switch":181,"../mobile/menu_list_group":182,"../mobile/menu_list_item":183,lodash:"lodash",reflux:"reflux"}],185:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shape_icon"),d=o(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"UserIcon",propTypes:{user:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.user;return a["default"].createElement(d["default"],n({imageUrl:e.profileImage,imageAlt:e.viewableName,linkUrl:e.profileUrl,border:!0},this.props))}})},{"../../modules/shape_icon_values":24,"../gr_component_factory":114,"../shape_icon":160,react:"react"}],186:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./user_icon"),d=o(u),c={SMALL:"small",MEDIUM:"medium",LARGE:"large"};r["default"]=l["default"].createClass({displayName:"UserIconList",propTypes:{users:a["default"].PropTypes.array.isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.SMALL,c.MEDIUM,c.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:c.SMALL}},render:function(){var e=this,t=[];return this.props.users.forEach(function(r){t.push(n(d["default"],{user:r,size:e.props.size,includeLink:e.props.includeLink},r.profileImage))}),n("div",{},void 0,t)}})},{"../gr_component_factory":114,"./user_icon":185,react:"react"}],187:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("classnames"),l=o(i),u=e("../gr_component_factory"),d=o(u),c=e("../shared/gr_prop_types"),f=o(c),p=e("../click_tracking_wrapper"),h=o(p),m=e("../../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserProfileLink",propTypes:{user:f["default"].user().isRequired,className:a["default"].PropTypes.string},userName:function(){return{__html:this.props.user.viewableName}},render:function(){var e=(0,l["default"])("gr-hyperlink","gr-hyperlink--bold","gr-user__profileLink",this.props.className),t=n("a",{className:e,href:this.props.user.profileUrl,dangerouslySetInnerHTML:this.userName()});return this.props.user.profileUrl?n(h["default"],{children:t,trackingOptions:m.TRACKED_CLASSES.user_profile}):n("b",{},void 0,this.props.user.viewableName)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":71,"../gr_component_factory":114,"../shared/gr_prop_types":165,classnames:"classnames",react:"react"}],188:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../shared/gr_prop_types"),d=o(u),c=e("../shared/gr_spoiler_handler"),f=o(c),p=e("classnames"),h=o(p);r["default"]=l["default"].createClass({displayName:"ExpandableHtml",propTypes:d["default"].expandableHtml(),getInitialState:function(){return{expanded:!1}},collapse:function(){this.setState({expanded:!1})},expand:function(){this.setState({expanded:!0})},expandable:function(){return!a["default"].isEmpty(this.props.truncatedHtml)},visibleHtml:function(){return this.expandable()&&this.state.expanded!==!0?this.props.truncatedHtml:this.props.html},renderToggleButton:function(){if(!this.expandable())return null;var e=this.state.expanded?this.collapse:this.expand,t=this.state.expanded?"Less":"More",r=(0,h["default"])("gr-buttonAsLink","u-marginLeftTiny");return n("button",{className:r,onClick:e},void 0,t)},componentDidMount:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},componentDidUpdate:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){if(a["default"].isEmpty(this.props.html))return null;var e=(0,h["default"])("expandableHtml",this.props.className);return React.createElement("div",{className:e,ref:"rootNode"},n("span",{dangerouslySetInnerHTML:{__html:this.visibleHtml()}}),this.renderToggleButton())}})},{"../gr_component_factory":114,"../shared/gr_prop_types":165,"../shared/gr_spoiler_handler":166,classnames:"classnames",lodash:"lodash"}],189:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s);r["default"]=a["default"].createClass({displayName:"HiddenHtml",propTypes:{unhideText:React.PropTypes.string},getDefaultProps:function(){return{unhideText:"unhide"}},getInitialState:function(){return{expanded:!1}},expand:function(){this.setState({expanded:!0})},renderUnhideButton:function(){return n("button",{className:"gr-buttonAsLink",onClick:this.expand},void 0,this.props.unhideText)},renderContent:function(){return this.state.expanded?this.props.children:n("span",{},void 0,this.renderUnhideButton())},render:function(){return n("div",{},void 0,this.renderContent())}})},{"../gr_component_factory":114}],190:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i);r["default"]=l["default"].createClass({displayName:"Spoiler",propTypes:{html:a["default"].PropTypes.string,spoilerWarning:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element])},componentWillMount:function(){if(null===this.props.html&&null===this.props.children)throw new Error("props.children and props.html cannot both be null")},getDefaultProps:function(){return{html:null,spoilerWarning:null}},getInitialState:function(){return{showSpoiler:!1}},onClickShowSpoiler:function(){this.setState({showSpoiler:!0})},onClickHideSpoiler:function(){this.setState({showSpoiler:!1})},getSpoilerHtml:function(){return{__html:this.props.html}},renderSpoiler:function(){return this.props.html?n("span",{className:"spoiler__text u-marginRightTiny",dangerouslySetInnerHTML:this.getSpoilerHtml()}):this.props.children},render:function(){return n("span",{},void 0,this.state.showSpoiler?n("span",{className:"spoiler__textContainer"},void 0,this.renderSpoiler(),n("button",{className:"gr-buttonAsLink",onClick:this.onClickHideSpoiler},void 0,"(hide spoiler)")):n("span",{},void 0,this.props.spoilerWarning,n("button",{className:"gr-buttonAsLink",onClick:this.onClickShowSpoiler},void 0,"(view spoiler)")))}})},{"../gr_component_factory":114,react:"react"}],191:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=e("../gr_component_factory"),i=o(a),l=e("../../modules/string_helper"),u=e("pluralize"),d=o(u);r["default"]=i["default"].createClass({displayName:"StringCounter",propTypes:{counterType:s.PropTypes.oneOf(["character","word"]).isRequired,maxLength:s.PropTypes.number.isRequired,text:s.PropTypes.string.isRequired,warnLength:s.PropTypes.number},renderWarning:function(e){var t=void 0;return 0>e&&(t="gr-smallAlert"),n("span",{className:t,role:"alert"},void 0,e," ",(0,d["default"])(this.props.counterType,e)," left")},countType:function(){return"character"===this.props.counterType?(0,l.astralLength)(this.props.text):"word"===this.props.counterType?(0,l.countWords)(this.props.text):null},render:function(){var e=this.countType(this.props.text),t=this.props.maxLength-e,r=this.props.warnLength?t<=this.props.warnLength:!0;return r?n("div",{},void 0,this.renderWarning(t)):null}})},{"../../modules/string_helper":26,"../gr_component_factory":114,pluralize:"pluralize",react:"react"}],192:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("../gr_component_factory"),a=o(s),i=e("../shared/gr_prop_types"),l=o(i),u=e("../shared/gr_spoiler_handler"),d=o(u),c=e("../click_tracking_wrapper"),f=o(c),p=e("../../modules/ads/click_tracking_helper");r["default"]=a["default"].createClass({displayName:"TruncatedHtml",propTypes:l["default"].truncatedHtml(),getDefaultProps:function(){return{fullContentText:"More",bookDescriptionTargetingData:p.TRACKED_CLASSES.full_content_link}},componentDidMount:function(){d["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){var e=n("a",{className:"u-marginLeftTiny fullContentLink",href:this.props.fullContentUrl},void 0,this.props.fullContentText);return React.createElement("div",{ref:"rootNode",className:this.props.className},n("span",{dangerouslySetInnerHTML:{__html:this.props.html}}),this.props.truncated?n(f["default"],{children:e,trackingOptions:this.props.bookDescriptionTargetingData}):null)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":71,"../gr_component_factory":114,"../shared/gr_prop_types":165,"../shared/gr_spoiler_handler":166}],193:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("lodash"),l=o(i),u=e("./gr_component_factory"),d=o(u),c=e("classnames"),f=o(c),p=e("../react_actions/shelvings_actions"),h=o(p),m=e("../react_stores/shelvings_store"),g=o(m),_=e("./click_tracking_wrapper"),v=o(_),y=e("../react_mixins/gr_reflux"),b=e("../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserRating",mixins:[(0,y.connectToLazyStore)(g["default"],"bookId")],propTypes:{bookId:a["default"].PropTypes.string,bookTitle:a["default"].PropTypes.string,starsTrackingOptions:a["default"].PropTypes.object},getDefaultProps:function(){return{starsTrackingOptions:b.TRACKED_CLASSES.user_rating_star}},setHoverRating:function(e){this.setState({hoverRating:e})},removeHoverRating:function(){this.setState({hoverRating:null})},isShelved:function(){return null!==this.state.exclusiveShelfName},updateRating:function(e,t){t.preventDefault(),this.isShelved()?h["default"].rateBook(this.state.book.bookId,e,this.state.book.title):h["default"].rateBook(this.props.bookId,e,this.props.bookTitle),this.refs.ratingContainer.focus()},starLabel:function k(e){var k=void 0;return k=null!==this.state.exclusiveShelfName&&this.state.rating>0?"Change rating from "+this.state.rating+" to "+e+" ":"Rate "+e+" ",k+=1==e?"star":"stars"},renderStar:function(e){var t=e+1,r=null!==this.state.exclusiveShelfName?this.state.rating:0,o=this.state.hoverRating?this.state.hoverRating:r,s=(0,f["default"])({userRating__star:!0,"userRating__star--selected":o>=t}),a=n("button",{className:s,title:this.starLabel(t),onClick:this.updateRating.bind(this,t),onMouseEnter:this.setHoverRating.bind(this,t)});return n(v["default"],{children:a,trackingOptions:this.props.starsTrackingOptions},t)},renderTextLabel:function(){return n("small",{className:"userRating__label"},void 0,null!==this.state.exclusiveShelfName&&this.state.rating>0?"My rating:":"Rate it:")},render:function(){return n("div",{className:"userRating"},void 0,this.renderTextLabel(),a["default"].createElement("div",{className:"userRating__starsWrapper",tabIndex:"0",ref:"ratingContainer",role:"group",onMouseLeave:this.removeHoverRating},l["default"].times(5,function(e){return this.renderStar(e)},this)))}})},{"../modules/ads/click_tracking_helper":3,"../react_actions/shelvings_actions":46,"../react_mixins/gr_reflux":210,"../react_stores/shelvings_store":229,"./click_tracking_wrapper":71,"./gr_component_factory":114,classnames:"classnames",lodash:"lodash",react:"react"}],194:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("reflux"),d=o(u),c=e("../../react_mixins/gr_reflux"),f=e("../../modules/ads/click_tracking_helper"),p=e("classnames"),h=o(p),m=e("../../react_stores/shelvings_store"),g=o(m),_=e("../../react_stores/user_shelves_store"),v=o(_),y=e("../../react_stores/user_agent_capabilities_store"),b=o(y),k=e("../../react_actions/shelvings_actions"),S=o(k),T=e("../dropdown"),P=o(T),N=e("../want_to_read/want_to_read_menu"),w=o(N),R=e("../user_rating"),x=o(R),A="Saving…";
r["default"]=l["default"].createClass({displayName:"WantToReadButton",propTypes:{bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,showStars:a["default"].PropTypes.bool,showMenu:a["default"].PropTypes.bool,origin:a["default"].PropTypes.string,trackingOptions:a["default"].PropTypes.object,starsTrackingOptions:a["default"].PropTypes.object},mixins:[(0,c.connectToLazyStore)(g["default"],"bookId",{stateKey:"shelvings"}),d["default"].connect(v["default"],"userShelves"),d["default"].connect(b["default"],"userAgentCapabilities")],getDefaultProps:function(){return{showStars:!1,showMenu:!0,trackingOptions:f.TRACKED_CLASSES.want_to_read_button}},shelveBook:function(){S["default"].shelveBook(this.props.bookId,v["default"].defaultShelves().WANT_TO_READ,this.props.origin)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&S["default"].unshelveBook(this.state.shelvings.book.bookId)},focusButton:function(e){e&&this.restoreFocusOnUpdate&&!this.state.isShelvingInProgress&&(this.forgetFocus(),e.focus())},rememberFocus:function(){this.restoreFocusOnUpdate=!0},forgetFocus:function(){this.restoreFocusOnUpdate=!1},checkmarkClass:function(){var e="wantToReadButton__checkIcon--",t=v["default"].defaultShelves(),r=(0,h["default"])({toRead:this.state.shelvings.exclusiveShelfName==t.WANT_TO_READ.name,currentlyReading:this.state.shelvings.exclusiveShelfName==t.CURRENTLY_READING.name,read:this.state.shelvings.exclusiveShelfName==t.READ.name,other:!this.unshelved()});return e+r},unshelved:function(){return null===this.state.shelvings.exclusiveShelfName},renderWantToReadLeftUnshelved:function(){var e=this.state.shelvings.isShelvingInProgress?A:"Want to Read",t=(0,h["default"])("wantToReadButton__leftUnshelvedButton",{"wantToReadButton__leftUnshelvedButton--noOutline":this.state.shelvings.isShelvingInProgress}),r="Add "+this.props.bookTitle+" to your want to read shelf";return a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,className:t,onClick:this.shelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus},e)},renderWantToReadLeftShelved:function(){var e=(0,h["default"])("wantToReadButton__leftShelvedButton"),t=(0,h["default"])({wantToReadButton__checkIcon:!this.state.shelvings.isShelvingInProgress},this.checkmarkClass()),r="Remove "+this.state.shelvings.book.title+" from my shelves",o=this.state.shelvings.isShelvingInProgress?A:this.state.shelvings.exclusiveShelfDisplayName;return this.state.userAgentCapabilities.touch?a["default"].createElement("button",{"aria-label":r,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,ref:this.focusButton,className:e},n("span",{className:t+" u-inlineBlock"}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o)):n("span",{},void 0,a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,className:e+" "+t}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,o))},renderWantToReadRight:function(){var e=this.unshelved()?this.props.bookId:this.state.shelvings.book.bookId,t=this.unshelved()?this.props.bookTitle:this.state.shelvings.book.title;return this.props.showMenu?n(P["default"],{trigger:this.renderWantToReadRightButtonContents(),triggerEventType:P["default"].TriggerEventTypes.HOVER,bemModifiers:"wantToReadMenu"},void 0,n(w["default"],{uniqueId:this.props.uniqueId,bookId:e,bookTitle:t,userShelves:this.state.userShelves,shelvings:this.state.shelvings})):null},renderWantToReadRightButtonContents:function(){return n("div",{className:"wantToReadButton__right"},void 0,n("span",{className:"u-visuallyHidden"},void 0,"Shelving menu"))},render:function(){var e="",t=(0,h["default"])("wantToReadButton__left",{"wantToReadButton__left--standalone":!this.props.showMenu},{wantToReadButton__leftUnshelved:this.unshelved()},{wantToReadButton__leftShelved:!this.unshelved()});return e=this.unshelved()?this.renderWantToReadLeftUnshelved():this.renderWantToReadLeftShelved(),n("div",{},void 0,n("div",{className:"wantToReadButton"},void 0,n("div",{className:t},void 0,e),this.renderWantToReadRight()),this.props.showStars?n(x["default"],{bookId:this.props.bookId,starsTrackingOptions:this.props.starsTrackingOptions}):null)}})},{"../../modules/ads/click_tracking_helper":3,"../../react_actions/shelvings_actions":46,"../../react_mixins/gr_reflux":210,"../../react_stores/shelvings_store":229,"../../react_stores/user_agent_capabilities_store":232,"../../react_stores/user_shelves_store":234,"../dropdown":102,"../gr_component_factory":114,"../user_rating":193,"../want_to_read/want_to_read_menu":195,classnames:"classnames",react:"react",reflux:"reflux"}],195:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=o(a),l=e("../gr_component_factory"),u=o(l),d=e("../../react_mixins/gr_reflux"),c=e("../../react_stores/want_to_read_menu_store"),f=o(c),p=e("./want_to_read_menu_filter"),h=o(p),m=e("../../react_actions/shelvings_actions"),g=o(m),_=e("./want_to_read_menu_shelf_creator"),v=o(_),y=7;r["default"]=u["default"].createClass({displayName:"WantToReadMenu",mixins:[(0,d.connectToLazyStore)(f["default"],"uniqueId")],propTypes:{bookId:React.PropTypes.string.isRequired,bookTitle:React.PropTypes.string.isRequired,uniqueId:React.PropTypes.string.isRequired,userShelves:React.PropTypes.object.isRequired,shelvings:React.PropTypes.object.isRequired},shelveBook:function(e){g["default"].shelveBook(this.props.bookId,e)},toggleNonExclusiveShelving:function(e){g["default"].toggleNonExclusiveShelving(this.props.bookId,e,!1,this.props.bookTitle)},renderFilter:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves),t=e.length>=y;return t?s(h["default"],{bookId:this.props.bookId,uniqueId:this.props.uniqueId,shelvings:this.props.shelvings,wantToReadMenu:this.state}):void 0},renderEmptyMessage:function(){var e=this.state.displayableExclusiveShelves,t=this.state.displayableNonExclusiveShelves,r=t.concat(e).length;return 0===r?s("li",{className:"wantToReadMenu__genericItem"},void 0,"No Matching Shelves"):void 0},renderExclusiveShelves:function(){var e=this,t=this.state.displayableExclusiveShelves;return null!==this.props.shelvings.exclusiveShelfName&&(t=i["default"].reject(t,function(t){return t.name===e.props.shelvings.exclusiveShelfName})),i["default"].map(t,function(t){var r=t.displayName,o="Shelve "+e.props.bookTitle+" as "+r;return s("li",{className:"wantToReadMenu__shelfItem"},r,s("button",{className:"wantToReadMenu__exclusiveShelf","aria-label":o,onClick:function(){e.shelveBook(t)}},void 0,r))})},renderNonExclusiveShelves:function(){var e=this,t=this.state.displayableNonExclusiveShelves;return i["default"].map(t,function(t){var r=!1;null!==e.props.shelvings.exclusiveShelfName&&i["default"].includes(e.props.shelvings.nonExclusiveShelfNames,t.name)&&(r=!0);var o=t.displayName,n="Shelve "+e.props.bookTitle+" as "+o;return s("li",{className:"wantToReadMenu__shelfItem"},o,s("label",{className:"wantToReadMenu__nonExclusiveShelf"},void 0,s("input",{className:"wantToReadMenu__shelfCheckbox",checked:r,type:"checkbox",name:"shelf["+t.name+"]","aria-label":n,onChange:function(){e.toggleNonExclusiveShelving(t)}}),o))})},renderAddNewShelfButton:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves).concat(this.props.userShelves.defaultShelves),t=i["default"].map(e,function(e){return e.name}),r=!i["default"].includes(t,this.state.shelfNameFilter);return s("li",{className:"wantToReadMenu__newShelfButtonContainer"},void 0,React.createElement(v["default"],n({shelfNameFilter:this.state.shelfNameFilter,userCanAddShelf:r,uniqueId:this.props.uniqueId,bookId:this.props.bookId,bookTitle:this.props.bookTitle},this.state)))},render:function(){return s("div",{},void 0,s("div",{className:"wantToReadMenu__scrollableContainer"},void 0,this.renderFilter(),this.renderEmptyMessage(),this.renderExclusiveShelves(),this.renderNonExclusiveShelves()),this.renderAddNewShelfButton())}})},{"../../react_actions/shelvings_actions":46,"../../react_mixins/gr_reflux":210,"../../react_stores/want_to_read_menu_store":235,"../gr_component_factory":114,"./want_to_read_menu_filter":196,"./want_to_read_menu_shelf_creator":197,lodash:"lodash"}],196:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_actions/want_to_read_menu_actions"),d=o(u);r["default"]=l["default"].createClass({displayName:"WantToReadMenuFilter",propTypes:{bookId:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,shelvings:a["default"].PropTypes.object.isRequired,wantToReadMenu:a["default"].PropTypes.object.isRequired},handleKeyPress:function(e){var t=null;null!==this.props.shelvings.exclusiveShelfName&&(t=this.props.shelvings.exclusiveShelfName),d["default"].updateShelfNameFilter(e.target.value,this.props.uniqueId,t)},render:function(){return n("form",{className:"wantToReadMenuFilter"},void 0,n("input",{className:"gr-textInput\n                               gr-textInput--small\n                               gr-textInput--fullWidth\n                               wantToReadMenuFilter--textInput",type:"text",placeholder:"Filter Shelves","aria-label":"Filter Shelf Names",value:this.props.wantToReadMenu.shelfNameFilter,onChange:this.handleKeyPress}))}})},{"../../react_actions/want_to_read_menu_actions":52,"../gr_component_factory":114,react:"react"}],197:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("../../react_actions/want_to_read_menu_actions"),d=o(u),c=e("../../react_actions/shelvings_actions"),f=o(c),p=e("../facebook/timeline_publish_toggle"),h=o(p),m=e("lodash"),g=o(m);r["default"]=l["default"].createClass({displayName:"WantToReadMenuShelfCreator",propTypes:{userCanAddShelf:a["default"].PropTypes.bool.isRequired,shelfNameFilter:a["default"].PropTypes.string,uniqueId:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{unsavedShelfName:""}},openAddShelfTextbox:function(){d["default"].openAddShelfTextbox(this.props.uniqueId)},checkIfCommentIsEmpty:function(e){this.setState({unsavedShelfName:e.target.value})},shelveAsNewShelfName:function(e,t){t.preventDefault(),d["default"].updateShelfNameFilter("",this.props.uniqueId),f["default"].toggleNonExclusiveShelving(this.props.bookId,{name:e},!0,this.props.bookTitle)},render:function(){var e=this;return""!==this.props.shelfNameFilter&&this.props.userCanAddShelf?n("span",{className:"wantToReadShelfCreator"},void 0,n("button",{className:"wantToReadShelfCreator__addNamedShelfButton","aria-label":"Add new "+this.props.shelfNameFilter+" shelf",onClick:function(t){e.shelveAsNewShelfName(e.props.shelfNameFilter,t)}},void 0,"Add new “",n("span",{className:"wantToReadShelfCreator__addShelfButtonShelfName"},void 0,this.props.shelfNameFilter),"” shelf")):this.props.showAddShelfTextbox?n("form",{className:"wantToReadShelfCreator",onSubmit:function(t){e.shelveAsNewShelfName(e.state.unsavedShelfName,t)}},void 0,n("input",{className:"gr-textInput\n                                  gr-textInput--small\n                                  wantToReadShelfCreator__textInput",type:"text",placeholder:"New Shelf Name","aria-label":"Add new shelf name",onChange:this.checkIfCommentIsEmpty}),n("input",{type:"submit",className:"gr-button\n                                  gr-button--small\n                                  wantToReadShelfCreator__addShelfButton",disabled:g["default"].isEmpty(g["default"].trim(this.state.unsavedShelfName)),value:"Add"})):this.props.userCanAddShelf?n("span",{className:"wantToReadShelfCreator"},void 0,n("button",{className:"wantToReadShelfCreator__showAddShelfTextboxButton","aria-label":"Add new shelf",onClick:this.openAddShelfTextbox},void 0,"Add New Shelf"),n(h["default"],{cogAction:h["default"].COG_ACTIONS.READ,bemModifiers:"wtrMenu"})):null}})},{"../../react_actions/shelvings_actions":46,"../../react_actions/want_to_read_menu_actions":52,"../facebook/timeline_publish_toggle":109,"../gr_component_factory":114,lodash:"lodash",react:"react"}],198:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,o,n){var s=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&s)for(var i in s)void 0===r[i]&&(r[i]=s[i]);else r||(r=s||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var s=e("react"),a=o(s),i=e("../gr_component_factory"),l=o(i),u=e("./want_to_read_button"),d=o(u),c=e("../user_rating"),f=o(c),p=e("lodash");r["default"]=l["default"].createClass({displayName:"WantToReadWithStars",propTypes:{bookId:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{},void 0,n(d["default"],{bookId:this.props.bookId,uniqueId:(0,p.random)(1e6).toString(),bookTitle:this.props.bookTitle}),n(f["default"],{bookId:this.props.bookId,bookTitle:this.props.bookTitle}))}})},{"../gr_component_factory":114,"../user_rating":193,"./want_to_read_button":194,lodash:"lodash",react:"react"}],199:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DealsStores=r.DealsComponents=void 0;var n=e("../react_components/user/preferences/user_preferences_deals"),s=o(n),a=e("../react_stores/user/preferences/user_preferences_store"),i=o(a),l=e("../react_components/deals/deals_landing_page"),u=o(l),d=e("../react_components/deals/deals_category_page"),c=o(d),f=e("../react_components/deals/deal_expiration_date"),p=o(f),h=e("../react_components/deals/deal_detail_page"),m=o(h),g=e("../react_components/deals/megaphone"),_=o(g),v=e("../react_components/deals/deals_blockophone"),y=o(v);r.DealsComponents={UserPreferencesDeals:s["default"],DealsLandingPage:u["default"],DealsCategoryPage:c["default"],DealDetailPage:m["default"],Megaphone:_["default"],DealsBlockophone:y["default"],DealExpirationDate:p["default"]},r.DealsStores={UserPreferencesStore:i["default"]}},{"../react_components/deals/deal_detail_page":81,"../react_components/deals/deal_expiration_date":82,"../react_components/deals/deals_blockophone":88,"../react_components/deals/deals_category_page":91,"../react_components/deals/deals_landing_page":93,"../react_components/deals/megaphone":99,"../react_components/user/preferences/user_preferences_deals":184,"../react_stores/user/preferences/user_preferences_store":231}],200:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationsStores=r.ConversationsComponents=void 0;var n=e("../../react_stores/like_store"),s=o(n),a=e("../../react_stores/comments_store"),i=o(a),l=e("../../react_components/comment/comment_form"),u=o(l),d=e("../../react_components/comment/comments"),c=o(d),f=e("../../react_components/like/like_button"),p=o(f),h=e("../../react_components/like/like_information"),m=o(h);r.ConversationsComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:m["default"]},r.ConversationsStores={CommentsStore:i["default"],LikeStore:s["default"]}},{"../../react_components/comment/comment_form":74,"../../react_components/comment/comments":75,"../../react_components/like/like_button":136,"../../react_components/like/like_information":138,"../../react_stores/comments_store":214,"../../react_stores/like_store":223}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentStores=r.ExperimentComponents=void 0;var o=e("./conversations"),n=e("./old_homepage"),s=e("./review_show"),a=e("lodash");r.ExperimentComponents=(0,a.merge)({},o.ConversationsComponents,n.OldHomepageComponents,s.ReviewShowComponents),r.ExperimentStores=(0,a.merge)({},o.ConversationsStores,n.OldHomepageStores,s.ReviewShowStores)},{"./conversations":200,"./old_homepage":202,"./review_show":203,lodash:"lodash"}],202:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.OldHomepageStores=r.OldHomepageComponents=void 0;var n=e("../../react_stores/like_store"),s=o(n),a=e("../../react_stores/comments_store"),i=o(a),l=e("../../react_components/comment/comment_form"),u=o(l),d=e("../../react_components/comment/comments"),c=o(d),f=e("../../react_components/like/like_button"),p=o(f),h=e("../../react_components/like/like_information"),m=o(h),g=e("../../react_components/like/like_simple_footer"),_=o(g);r.OldHomepageComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:m["default"],LikeSimpleFooter:_["default"]},r.OldHomepageStores={CommentsStore:i["default"],LikeStore:s["default"]}},{"../../react_components/comment/comment_form":74,"../../react_components/comment/comments":75,"../../react_components/like/like_button":136,"../../react_components/like/like_information":138,"../../react_components/like/like_simple_footer":139,"../../react_stores/comments_store":214,"../../react_stores/like_store":223}],203:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReviewShowStores=r.ReviewShowComponents=void 0;var n=e("../../react_stores/like_store"),s=o(n),a=e("../../react_components/like/like_simple_footer"),i=o(a);r.ReviewShowComponents={LikeSimpleFooter:i["default"]},r.ReviewShowStores={LikeStore:s["default"]}},{"../../react_components/like/like_simple_footer":139,"../../react_stores/like_store":223}],204:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReadingNotesStores=r.ReadingNotesComponents=void 0;var n=e("../react_components/reading_notes/annotated_books_landing_page"),s=o(n),a=e("../react_components/comment/comment_form"),i=o(a),l=e("../react_components/comment/comments"),u=o(l),d=e("../react_components/like/like_button"),c=o(d),f=e("../react_components/like/like_information"),p=o(f),h=e("../react_components/reading_notes/reading_notes_header"),m=o(h),g=e("../react_components/reading_notes/reading_notes_shelving_modal"),_=o(g),v=e("../react_components/reading_notes/reading_notes_shelving_modal_trigger"),y=o(v),b=e("../react_components/want_to_read/want_to_read_button"),k=o(b),S=e("../react_components/want_to_read/want_to_read_with_stars"),T=o(S),P=e("../react_stores/reading_notes/annotated_books_store"),N=o(P),w=e("../react_stores/comments_store"),R=o(w),x=e("../react_stores/like_store"),A=o(x),C=e("../react_stores/shelvings_store"),M=o(C),E=e("../react_stores/user_shelves_store"),L=o(E),I=e("../react_stores/user_agent_capabilities_store"),U=o(I);r.ReadingNotesComponents={AnnotatedBooksLandingPage:s["default"],CommentForm:i["default"],Comments:u["default"],LikeButton:c["default"],LikeInformation:p["default"],ReadingNotesHeader:m["default"],ReadingNotesShelvingModal:_["default"],ReadingNotesShelvingModalTrigger:y["default"],WantToReadButton:k["default"],WantToReadWithStars:T["default"]},r.ReadingNotesStores={AnnotatedBooksStore:N["default"],CommentsStore:R["default"],LikeStore:A["default"],ShelvingsStore:M["default"],UserShelvesStore:L["default"],UserAgentCapabilitiesStore:U["default"]}},{"../react_components/comment/comment_form":74,"../react_components/comment/comments":75,"../react_components/like/like_button":136,"../react_components/like/like_information":138,"../react_components/reading_notes/annotated_books_landing_page":151,"../react_components/reading_notes/reading_notes_header":154,"../react_components/reading_notes/reading_notes_shelving_modal":155,"../react_components/reading_notes/reading_notes_shelving_modal_trigger":156,"../react_components/want_to_read/want_to_read_button":194,"../react_components/want_to_read/want_to_read_with_stars":198,"../react_stores/comments_store":214,"../react_stores/like_store":223,"../react_stores/reading_notes/annotated_books_store":226,"../react_stores/shelvings_store":229,"../react_stores/user_agent_capabilities_store":232,"../react_stores/user_shelves_store":234}],205:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var n=e("array.prototype.find"),s=o(n);s["default"].shim()},{"array.prototype.find":"array.prototype.find"}],206:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderComponents=r.HeaderStores=void 0;var n=e("../react_stores/favorite_genres_store"),s=o(n),a=e("../react_stores/notifications_store"),i=o(a),l=e("../react_stores/tabs_store"),u=o(l),d=e("../react_stores/current_user_store"),c=o(d),f=e("../react_stores/google_ads_store"),p=o(f),h=e("../react_stores/shelvings_store"),m=o(h),g=e("../react_stores/user_shelves_store"),_=o(g),v=e("../react_stores/user_not_interested_store"),y=o(v),b=e("../react_components/flash_message"),k=o(b),S=e("../react_components/ads/google_banner_ad"),T=o(S),P=e("../react_components/ads/google_native_ad"),N=o(P),w=e("../react_components/header/header_store_connector"),R=o(w),x=e("../react_components/site_announcement/site_announcement"),A=o(x),C=e("../react_components/site_announcement/choice_site_announcement"),M=o(C),E=e("../react_components/site_announcement/welcome_announcement"),L=o(E),I=e("../react_components/group/preview_broadcast"),U=o(I),O=e("../react_components/jobs_list"),D=o(O),j=e("../react_components/share_dialog"),B=o(j),q=e("../react_stores/share_dialog_store"),F=o(q);r.HeaderStores={FavoriteGenresStore:s["default"],NotificationsStore:i["default"],TabsStore:u["default"],GoogleAdsStore:p["default"],CurrentUserStore:c["default"],ShareDialogStore:F["default"],ShelvingsStore:m["default"],UserShelvesStore:_["default"],UserNotInterestedStore:y["default"]},r.HeaderComponents={FlashMessage:k["default"],HeaderStoreConnector:R["default"],GoogleBannerAd:T["default"],SiteAnnouncement:A["default"],ChoiceSiteAnnouncement:M["default"],WelcomeAnnouncement:L["default"],ShareDialog:B["default"],PreviewBroadcast:U["default"],GoogleNativeAd:N["default"],JobsList:D["default"]}},{"../react_components/ads/google_banner_ad":58,"../react_components/ads/google_native_ad":59,"../react_components/flash_message":112,"../react_components/group/preview_broadcast":116,"../react_components/header/header_store_connector":129,"../react_components/jobs_list":135,"../react_components/share_dialog":162,"../react_components/site_announcement/choice_site_announcement":173,"../react_components/site_announcement/site_announcement":175,"../react_components/site_announcement/welcome_announcement":176,"../react_stores/current_user_store":215,"../react_stores/favorite_genres_store":219,"../react_stores/google_ads_store":221,"../react_stores/notifications_store":225,"../react_stores/share_dialog_store":227,"../react_stores/shelvings_store":229,"../react_stores/tabs_store":230,"../react_stores/user_not_interested_store":233,"../react_stores/user_shelves_store":234}],207:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("lodash"),i=o(a),l=e("classnames"),u=o(l);r["default"]={propTypes:{bemModifiers:s["default"].PropTypes.oneOfType([s["default"].PropTypes.string,s["default"].PropTypes.arrayOf(s["default"].PropTypes.string)])},withBemModifiers:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null===t&&(t=this.props.bemModifiers),!t)return e;if(i["default"].isString(t))return e+" "+e+"--"+t;if(i["default"].isArray(t)){var r=(0,u["default"])(e,i["default"].map(t,function(t){return e+"--"+t}));return r}},withBemElement:function(e,t){return this.props.bemModifiers?i["default"].isString(this.props.bemModifiers)?e+"--"+this.props.bemModifiers+"__"+t:i["default"].isArray(this.props.bemModifiers)?(0,u["default"])(i["default"].map(this.props.bemModifiers,function(r){return e+"--"+r+"__"+t})):void 0:e+"__"+t}}},{classnames:"classnames",lodash:"lodash",react:"react"}],208:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),s=o(n),a=e("lodash"),i=o(a);r["default"]={propTypes:{deployServices:s["default"].PropTypes.arrayOf(s["default"].PropTypes.string)},isFeatureEnabled:function(e){return i["default"].indexOf(this.deployServices(),e)>=0},deployServices:function(){if(void 0===this.props.deployServices)throw"trying to access Deploy Services from component, but component does not contain deployServices prop ("+this.constructor.displayName+")";return this.props.deployServices}}},{lodash:"lodash",react:"react"}],209:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(e){return{getInitialState:function(){return this.store=e(),this.store.getInitialState()},componentWillMount:function(){this.actions=this.store.actions,this.unsubscribe=this.store.listen(this.onStoreChange)},componentWillUnmount:function(){this.unsubscribe()},onStoreChange:function(e){this.setState(e)}}}},{}],210:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=r.stateKey,s=void 0===o?null:o,a=r.filterValue,l=void 0===a?null:a;return{getInitialState:function(){var r=e.getInitialState(i["default"].get(this.props,t));return l&&(r=r[l]),i["default"].isNull(s)||(r=n({},s,r)),r},componentDidMount:function(){var r=this;u["default"].utils.extend(this,u["default"].ListenerMethods),this.listenTo(e,function(e){var o=e[i["default"].get(r.props,t)];l&&(o=o[l]),i["default"].isNull(s)||(o=n({},s,o)),r.setState(o)})},componentWillUnmount:u["default"].ListenerMixin.componentWillUnmount}}Object.defineProperty(r,"__esModule",{value:!0}),r.connectToLazyStore=s;var a=e("lodash"),i=o(a),l=e("reflux"),u=o(l)},{lodash:"lodash",reflux:"reflux"}],211:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=250;r["default"]={onEnterIntent:function(e,t){t||(t=a);try{clearTimeout(this.leaveTimeout)}catch(r){}this.hoverTimeout=s["default"].delay(e,t)},onLeaveIntent:function(e,t){t||(t=a);try{clearTimeout(this.hoverTimeout)}catch(r){}this.leaveTimeout=s["default"].delay(e,t)}}},{lodash:"lodash"}],212:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react-dom"),s=o(n),a=e("lodash"),i=e("../modules/data_tracking/data_tracking_helper");r["default"]={componentDidMount:function(){var e=this,t=this.props.trackingOptions;t&&!function(){var r=s["default"].findDOMNode(e);r&&((0,a.each)((0,a.keys)(t),function(e){var o=t[e];(0,a.isUndefined)(o)||r.setAttribute("data-tracking-"+e,JSON.stringify(o))}),t.enableTracking===!0&&r.addEventListener("click",i.handleDataTracking))}()}}},{"../modules/data_tracking/data_tracking_helper":9,lodash:"lodash","react-dom":"react-dom"}],213:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/book_search_actions_factory"),c=o(d),f=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null}),t=(0,c["default"])(),r=function(t){var r=e.get();r.results.reset(t)},o=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set("showLoadingSpinner",t.showLoadingSpinner).set("showResultsContainer",t.showResultsContainer).set("query",t.query).set("activeResult",t.activeResult).results.reset(t.results)},reset:function(){e.get().reset({})},setValue:function(t,r){var o=e.get();o.set(t,r)},onSelectSpecificResult:function(e){var t=s["default"].find(this.getState().results,function(t){return t.bookId===e});this.setValue("activeResult",t),this.trigger(this.getState())},onSetShowResultsContainer:function(e){this.setValue("showResultsContainer",e),this.trigger(this.getState())},onSelectNextResult:function(e){var t=this.getState().results,r=s["default"].indexOf(t,this.getState().activeResult);this.setValue("activeResult",t[(r+1)%e]),this.trigger(this.getState())},onSelectPreviousResult:function(e){var t=this.getState().results,r=this.getState().activeResult,o=s["default"].indexOf(t,r);0===o||null===r?this.setValue("activeResult",t[e-1]):this.setValue("activeResult",t[(o-1)%e]),this.trigger(this.getState())},onSearchResultsFound:function(e,t){r(t),this.setValue("query",e),this.setValue("showLoadingSpinner",!1),this.setValue("activeResult",null),this.setValue("showResultsContainer",!0),this.trigger(this.getState())},onSearch:function(e,r){this.setValue("showLoadingSpinner",!0),this.trigger(this.getState()),$j.ajax({url:r,data:{format:"json",q:e},success:function(r){t.searchResultsFound(e,r)}})}});return o};r["default"]=f},{"../react_actions/book_search_actions_factory":28,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],214:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../modules/gr_error_reporting"),c=o(d),f=e("../react_actions/comment_actions"),p=o(f),h=e("./shared/newsfeed_updates_mixin"),m=o(h),g={},_=new u["default"](g),v=2,y=10,b=function(){
return _.get()},k=function(e){b().reset(s["default"].merge({},g,e))},S=function(e){return s["default"].has(b(),e)||b().set(e,{numComments:0,unsavedComment:"",comments:[],saveInProgress:!1,showCommentButton:!1,textareaRows:1,showPagination:!1,currentPage:1,showSeeMoreLoadingSpinner:!1}),b()[e]},T=function(e,t){S(e).set(t)};r["default"]=i["default"].createStore({listenables:p["default"],mixins:[(0,m["default"])(h.NEWSFEED_DEPENDENT_STORE_KEYS.COMMENTS)],initializeWith:function(e){k(e)},updateWith:function(e){var t=s["default"].transform(e,function(e,t,r){e[r]={numComments:t.numComments||0,unsavedComment:t.unsavedComment||"",comments:t.comments||[],showCommentButton:!1,saveInProgress:!1,textareaRows:1,deletableByCurrentUser:t.deletableByCurrentUser,blockedByCurrentUser:t.blockedByCurrentUser||!1}});b().set(t)},onTextareaFocusRequested:function(e){T(e,{textareaFocusRequested:!0}),this.notifyListeners()},onTextareaFocused:function(e){T(e,{textareaRows:v,textareaFocusRequested:!1,showCommentButton:!0}),this.notifyListeners()},onTextareaUnfocused:function(e){var t=S(e).unsavedComment;s["default"].isEmpty(s["default"].trim(t))&&T(e,{textareaRows:1}),this.notifyListeners()},onShowSeeMoreLoadingSpinner:function(e){T(e,{showSeeMoreLoadingSpinner:!0}),this.notifyListeners()},onDeleteComment:function(e,t,r){var o=this,n=S(e),a=n.numComments-1,i=s["default"].findIndex(n.comments,function(e){return e.uri===t});i>=0&&(n.set("numComments",a),n.comments.splice(i,1),n.showPagination||this.notifyListeners(),$j.post("/comment/destroy?comment_uri="+t).done(function(){n.showPagination&&(0===S(e).comments.length&&n.currentPage>1?(r.page=n.currentPage-1,p["default"].showCommentsForPage(r)):n.currentPage<Math.ceil(a/y)?(r.page=n.currentPage,p["default"].showCommentsForPage(r)):o.notifyListeners())}))},onAddNewComment:function(e){var t=this,r={body:S(e.subjectKey).unsavedComment,authorUser:e.authorUser,updatedAtMessage:"Just now"};T(e.subjectKey,{saveInProgress:!0}),this.notifyListeners(),$j.post("/comment.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,comment:{body_usertext:r.body},digest_default:!0,respect_update_feed_preference:!0,react_framework:!0}).done(function(r){var o=S(e.subjectKey),n=o.numComments+1;if(o.set({unsavedComment:"",saveInProgress:!1,numComments:n,showCommentButton:!1}),o.comments.length<y){var s=r;o.comments.push({createdAt:new Date,body:s.body,deletableByCurrentUser:s.deletableByCurrentUser,blockedByCurrentUser:s.blockedByCurrentUser,authorUser:e.authorUser,updatedAtMessage:"Just now",uri:s.uri,flagForAbuseUrl:s.flagForAbuseUrl})}else e.page=Math.ceil(n/y),p["default"].showCommentsForPage(e);t.onTextareaUnfocused(e.subjectKey)}).fail(function(t){var r=null;422===t.status?r="Sorry, your comment cannot be posted because it is too long (must be under 12000 characters). Please try again.":404===t.status?r="Sorry, this post has been deleted.":(r="Sorry, your comment cannot be posted. ",t.responseJSON&&t.responseJSON.errors&&(r+=t.responseJSON.errors.join(", "))),r&&c["default"].notifyUser(r),T(e.subjectKey,{saveInProgress:!1,showCommentButton:!1}),p["default"].textareaUnfocused(e.subjectKey)})},onShowCommentsForPage:function(e){var t=this,r=e.page>0?e.page:1;$j.get("/comment/index.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,page:r,per_page:y,reverse:!0,react_framework:!0}).done(function(o){T(e.subjectKey,{comments:o.comments,showPagination:!0,currentPage:r,showSeeMoreLoadingSpinner:!1}),t.notifyListeners()})},onCommentEntered:function(e,t){T(e,{unsavedComment:t}),this.notifyListeners()},getState:b,getInitialState:function(e){return s["default"].isUndefined(e)?b():S(e)},getInitialStateForKey:S,reset:function(){k({})},notifyListeners:function(){this.trigger(b())}})},{"../modules/gr_error_reporting":21,"../react_actions/comment_actions":29,"./shared/newsfeed_updates_mixin":228,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],215:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash"),a=o(s),i=e("reflux"),l=o(i),u=e("freezer-js"),d=o(u),c=e("../react_actions/current_user_actions"),f=o(c),p={currentUser:{}},h=new d["default"](p),m=function(){return h.get()},g=function(e){m().reset(a["default"].merge({},p,e))};r["default"]=l["default"].createStore({listenables:[f["default"]],initializeWith:function(e){a["default"].each(a["default"].keys(e),function(e){if(!a["default"].has(p,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+" Expected one of "+a["default"].keys(p))}),g(e)},getState:m,getInitialState:m,onUpdatePreference:function(e,t){$j.post("/user/update_preferences",{user:n({},e,t)})},reset:function(){g({})}})},{"../react_actions/current_user_actions":30,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],216:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../../../modules/ajax/ajax_helper"),c=e("../../../react_actions/experimental/universal_search_actions_factory"),f=o(c),p=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null,currentInput:null}),t=(0,f["default"])(),r=function(t){var r=e.get();r.results.reset(t)},o=300,n=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set({showLoadingSpinner:t.showLoadingSpinner,showResultsContainer:t.showResultsContainer,query:t.query,activeResult:t.activeResult}).results.reset(t.results)},reset:function(){e.get().reset({})},hide:function(){e.get().set({showLoadingSpinner:!1,activeResult:null,showResultsContaine:!1}),this.trigger(e.get())},search:function(r,o,n){r==e.get().currentInput?(e.get().set("showLoadingSpinner",!0),this.trigger(e.get()),(0,d.httpGet)(o,{data:{format:"json",query:r,limit:n},success:function(e){t.searchResultsFound(r,e)}})):this.hide()},delayedSearch:s["default"].debounce(function(e,t,r,o){e.search(t,r,o)},o),onSelectSpecificResult:function(t){e.get().set("activeResult",t),this.trigger(e.get())},onSetShowResultsContainer:function(t){e.get().set("showResultsContainer",t),this.trigger(e.get())},onSelectNextResult:function(t){var r=e.get().results,o=s["default"].indexOf(r,e.get().activeResult);e.get().set("activeResult",r[(o+1)%t]),this.trigger(e.get())},onSelectPreviousResult:function(t){var r=e.get().results,o=e.get().activeResult,n=s["default"].indexOf(r,o);0===n||null===o?e.get().set("activeResult",r[t-1]):e.get().set("activeResult",r[(n-1)%t]),this.trigger(e.get())},onSearchResultsFound:function(t,o){t==e.get().currentInput&&(r(o),e.get().set({query:t,showLoadingSpinner:!1,activeResult:null,showResultsContainer:!0}),this.trigger(e.get()))},onSearch:function(t,r,o){t=t.trim(),e.get().set("currentInput",t),s["default"].isEmpty(t)?this.hide():this.delayedSearch(this,t,r,o)}});return n};r["default"]=p},{"../../../modules/ajax/ajax_helper":5,"../../../react_actions/experimental/universal_search_actions_factory":33,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],217:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/facebook_actions"),c=o(d),f={isUserConnected:!1,cog:{},images:{}},p={STATUS:"status",READ:"read",TO_READ:"toRead",AUTO_ADD_FRIENDS:"autoAdd",LIKE:"like"},h=new u["default"](f),m=function(){return h.get()};r["default"]=i["default"].createStore({listenables:c["default"],getState:m,getInitialState:m,COG_ACTIONS:p,getCogValue:function(e){var t=m().cog;return t&&t[e]?1:0},getCogRead:function(){return this.getCogValue(p.READ)},getCogStatus:function(){return this.getCogValue(p.STATUS)},initializeWith:function(e){m().reset(e)},reset:function(){m().reset({})},updateWith:function(e){m().set({isUserConnected:e.isUserConnected,cog:e.cog,images:e.images})},onEnablePublishPermission:function(){var e=this;$grfb.ensurePublishPermission().done(function(){var t=s["default"].transform(m().cog,function(e,t,r){e[r]=!0});m().set("cog",t),e.trigger(m())})},onTogglePublishPermission:function(e){var t=this,r=m(),o=r.cog[e];o?(r.cog.set(e,!o),this.trigger(m())):$grfb.ensurePublishPermission().done(function(){r.cog.set("enabled",!0).set(e,!0),t.trigger(m())})}})},{"../react_actions/facebook_actions":34,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],218:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/favorite_genres_actions"),c=o(d),f=e("../react_actions/favorite_genres_form_actions"),p=o(f),h=new u["default"]({selectedGenres:[]}),m=function(){return h.get()},g=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];m().selectedGenres.reset(e)},_=i["default"].createStore({listenables:p["default"],getInitialState:m,getState:m,initializeWith:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];g(t)},onSubmitSelectedGenres:function(){c["default"].changeFavoriteGenres(m().selectedGenres)},onSelectFavoriteGenre:function(e){s["default"].includes(m().selectedGenres,e)||(m().selectedGenres.push(e),this.notifyListeners())},onDeselectFavoriteGenre:function(e){m().selectedGenres.shift(e),this.notifyListeners()},notifyListeners:function(){this.trigger(m())},reset:function(){g()}});r["default"]=_},{"../react_actions/favorite_genres_actions":35,"../react_actions/favorite_genres_form_actions":36,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],219:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/favorite_genres_actions"),c=o(d),f={allGenres:[],favoriteGenres:[],sponsoredGenres:[]},p=new u["default"](f),h=function(){return p.get()},m=function(e){h().reset(s["default"].merge({},f,e))},g=function(e){return s["default"].inject(h().allGenres,function(t,r){var o=r.name;return t.favorites[o]=s["default"].includes(e,o),t},{favorites:{}})};r["default"]=i["default"].createStore({listenables:[c["default"]],initializeWith:function(e){s["default"].each(s["default"].keys(e),function(e){if(!s["default"].has(f,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+". Expected one of "+s["default"].keys(f))}),m(e)},updateWith:function(e){h().set(e)},getState:h,getInitialState:h,reset:function(){m()},notifyListeners:function(){this.trigger(h())},onChangeFavoriteGenres:function(e){var t=this,r=function(){h().favoriteGenres.reset(e),t.notifyListeners()};$j.post("/user/edit_fav_genres",s["default"].merge(g(e),{format:"json"}),r)}})},{"../react_actions/favorite_genres_actions":35,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],220:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/featured_genres_actions"),c=o(d),f=e("../react_actions/shelvings_actions"),p=o(f),h=e("../react_stores/favorite_genres_store"),m=o(h),g=new u["default"]({}),_=function(){return g.get()},v=i["default"].createStore({listenables:c["default"],init:function(){m["default"].listen(function(){c["default"].requestFeaturedBooks()})},initializeWith:function(e){g.get().reset({featuredGenreBookInfo:e})},getInitialState:_,getState:_,onRequestFeaturedBooks:function(){var e=this;return s["default"].isEmpty(m["default"].getState().favoriteGenres)?void this.saveNewFeaturedBooks([]):void(_().requestedFeaturedBooksBefore||($j.get("/genres/featured_books").done(function(t){e.saveNewFeaturedBooks(t.genres),p["default"].addShelvings(t.shelvings)}).fail(function(e){c["default"].displayError(e)}),_().set("requestedFeaturedBooksBefore",!0)))},saveNewFeaturedBooks:function(e){_().set("featuredGenreBookInfo",e),this.notifyListeners()},onDisplayError:function(){_().set("errorMessage","Error loading featured books in genre."),this.notifyListeners()},notifyListeners:function(){this.trigger(_())},reset:function(){_().reset({})}});r["default"]=v},{"../react_actions/featured_genres_actions":37,"../react_actions/shelvings_actions":46,"../react_stores/favorite_genres_store":219,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],221:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ImpressionCode=void 0;var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/data_tracking/data_tracking_actions"),c=o(d),f=e("../react_actions/google_ads_actions"),p=o(f),h=e("../react_actions/newsfeed_actions"),m=o(h),g=e("../modules/ads/google_ad_helper"),_=e("./shared/newsfeed_updates_mixin"),v=o(_),y=e("../modules/env_utils"),b=o(y),k={targeting:{},ads:{},nativeAds:{},polls:{},device_type:null},S=new u["default"](k),T=r.ImpressionCode={success:"0",dfpError:"1",monolithError:"2",empty:"3"},P=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];N().reset(s["default"].merge({},k,e))},N=function(){return S.get()},w=function(e){if(!s["default"].has(N().ads,e)){if(!s["default"].has(N().nativeAds,e)){if(!s["default"].has(N().polls,e))throw new ReferenceError("No such product existing for key "+e);return N().polls[e]}return N().nativeAds[e]}return N().ads[e]},R=function(e,t){w(e).set(t)},x=function(e){return e.path.split("/",3)[2]},A=function(e){return{ad_unit:x(e),line_item_id:e.lineItemId,ad_device_type:e.adDeviceType}},C=function(e,t,r){var o=s["default"].merge(A(t),r);$j.ajax({url:e,type:"GET",data:o})},M=function(e,t){var r=w(e);r&&!r.impressionLogged&&(C(r.pmetImpressionTrackUrl,r,{impression_output:t}),I(e))},E=function(e){C(e.pmetClickTrackUrl,e,{click_type:"click"})},L=function(e){R(e,{hasCreative:!0})},I=function(e){R(e,{impressionLogged:!0})};r["default"]=i["default"].createStore({listenables:[p["default"],{trackClickEvent:c["default"].trackClickEvent}],mixins:[(0,v["default"])(_.NEWSFEED_DEPENDENT_STORE_KEYS.NATIVE_ADS)],initializeWith:function(e){if(P(e),b["default"].hasDom()){var t=s["default"].merge({},this.getState().ads,this.getState().nativeAds);s["default"].map(s["default"].merge({},t,this.getState().polls),function(e,t){(0,g.defineSlot)(t,e.path,e.dimensions)}),(0,g.enableServices)()}},initializeWithoutDFPIntegrationWithData:function(e){P(e)},updateWith:function(e){N().set(s["default"].merge({},N(),e))},onTrackClickEvent:function(e,t){var r=e.target,o=void 0,n=void 0,a=void 0,i=void 0,l=/news/,u=JSON.parse(t.getAttribute("data-tracking-adId"));if(u=u?u:s["default"].findKey(N().nativeAds,function(e){return e.path.match(l)}))for(;r!==t;)r.getAttribute("data-tracking-dfp")&&!o&&(o=r.getAttribute("data-tracking-dfp"),a=JSON.parse(o),a&&this.trackDfpClick(u)),r.getAttribute("data-tracking-pmet")&&!n&&(n=r.getAttribute("data-tracking-pmet"),i=JSON.parse(n),this.trackPmetClick(u,i)),r=r.parentNode},mergeWith:function(e){N().set(s["default"].merge({},N(),e))},onHasRequestedCreativeForSlot:function(e){R(e,{hasRequestedCreative:!0})},onDisplayCreativeForSlot:function(e){L(e)},onRemoveAdSlot:function(e){R(e,{hasCreative:!1,hasRequestedCreative:!0,empty:!0}),this.notifyListeners()},onTrackImpression:function(e,t){M(e,t)},findAd:function(e){var t=s["default"].findKey(s["default"].merge({},N().ads,N().nativeAds),function(t){return t.path.match(e)}),r=t?N().ads[t]:null;return r=r?r:N().nativeAds[t],!r||r.hasRequestedCreative&&r.empty?null:{id:t,ad:r}},onAttachServedBannerAdAttributesAndTracking:function(e,t,r,o,n){R(e,{lineItemId:t,creative:r,impressionCode:o});var s=w(e);return r?(n||M(e,o),void s.creative.on("click","a",function(){E(s)})):void M(e,T.dfpError)},onPollAnswerChanged:function(e,t){var r=this;$j.post("/poll/homepage_vote",{answer:e,id:t.creative.pollId}).done(function(e){e.showStats=!0,R(t.id,e),r.trigger(N())}),R(t.id,{answer:Number(e)}),this.trigger(N())},onPopulateHomepagePollAndTracking:function(e,t,r,o){var n=this;return r?(R(e,{creative:r}),$j.get("/poll/index_ajax_homepage_poll/",o).done(function(t){"answer"in t&&(t.showStats=!0),R(e,t),n.trigger(N())}),void M(e,T.success)):void M(e,T.dfpError)},onAttachServedNativeAdAttributesAndTracking:function(e,t,r,o,n,s,a){var i=this;return R(e,{lineItemId:t,url:s}),r?void $j.ajax({type:"GET",url:"/home/index_ajax_newsfeed_ad",data:{format:"json",id:o,line_item_id:t,ad_unit:a,ad_device_type:"desktop",uxo:!0}}).done(function(t){t.ok?(L(e),R(e,t),m["default"].updateNativeAdSlot(w(e).id,w(e)),i.notifyListeners(N()),M(e,n)):M(e,T.monolithError)}):void M(e,T.dfpError)},trackDfpClick:function(e){var t=w(e),r=t.url,o=s["default"].merge(A(t),{click_type:"click"}),n=encodeURIComponent("?"+$j.param(o));$j.ajax({type:"GET",url:r+t.pmetClickTrackUrl+n})},trackPmetClick:function(e,t){var r=w(e),o=s["default"].merge(A(r),t);$j.ajax({type:"GET",url:r.pmetClickTrackUrl,data:o})},getInitialState:function(e){return s["default"].isUndefined(e)?N():w(e)},getInitialStateForKey:w,getState:N,reset:P,notifyListeners:function(){this.trigger(N())}})},{"../modules/ads/google_ad_helper":4,"../modules/env_utils":19,"../react_actions/data_tracking/data_tracking_actions":31,"../react_actions/google_ads_actions":38,"../react_actions/newsfeed_actions":41,"./shared/newsfeed_updates_mixin":228,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],222:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=e("reflux"),a=o(s),i=e("freezer-js"),l=o(i),u=e("../react_actions/discussions_pane_actions"),d=o(u),c={groups:[]},f=new l["default"](c),p=function(){return f.get()},h=function(e){p().reset((0,n.merge)({},c,e))};r["default"]=a["default"].createStore({listenables:[d["default"]],getState:p,getInitialState:p,onOpenPane:function(){var e=this;$j.post("/track/track_click",{feature:"NavBarDiscussionsPaneOpenedGem"}),(0,n.isEmpty)(p().groups)&&(this.trigger(p()),$j.get("/group/navbar_discussions",{format:"json"}).done(function(t){e.updateWith(t)}).fail(function(){p().set("errorMessage","There was an error loading your groups."),e.trigger(p())}))},updateWith:function(e){e.sparse?p().set("sparse",e.sparse):(0,n.each)(e.groups,function(e){var t=e.group;p().groups.push({group:{name:t.name,iconUrl:t.iconUrl,url:t.url,lastActiveAt:t.lastActiveAt,id:t.id,allUnreadPostsUrl:t.allUnreadPostsUrl},topics:e.topics})}),this.trigger(p())},reset:function(){h({})}})},{"../react_actions/discussions_pane_actions":32,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],223:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/like_actions"),c=o(d),f=e("./shared/newsfeed_updates_mixin"),p=o(f),h=e("../modules/gr_error_reporting"),m=o(h),g=e("../modules/ajax/ajax_helper"),_=new u["default"]({}),v=function(){return _.get()},y=function(e){return s["default"].has(v(),e)||v().set(e,{likeCount:0,isLiked:!1,showLoadingSpinner:!1}),v()[e]},b=function(e,t,r){v()[e].set(t,r)},k=function(e,t){return v()[e][t]},S=function(e){var t=k(e,"likeCount"),r=k(e,"isLiked");b(e,"isLiked",!r),b(e,"likeCount",k(e,"isLiked")?t+1:t-1)},T=i["default"].createStore({listenables:c["default"],mixins:[(0,p["default"])(f.NEWSFEED_DEPENDENT_STORE_KEYS.LIKES)],getState:v,getInitialState:function(e){return s["default"].isUndefined(e)?v():y(e)},getInitialStateForKey:y,reset:function(){_.get().reset({})},initializeWith:function(e){s["default"].each(s["default"].keys(e),function(t){var r=e[t];r.likedBy=r.likedBy||!1,r.likeCount=r.likeCount||0,r.showLoadingSpinner=!1,v().set(t,r)})},updateWith:function(e){this.initializeWith(e)},triggerLoadingSpinner:function(e){var t=k(e,"showLoadingSpinner");b(e,"showLoadingSpinner",!t)},onLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState()),(0,g.httpPost)("/rating",{format:"json",data:{rating:{resource_type:k(e,"resourceType"),resource_id:k(e,"resourceId"),resource_uri:k(e,"resourceUri"),rating:1}}}).done(function(r){S(e),b(e,"ratingId",r.rating_id),t.trigger(v())}).fail(function(e){var t=e.responseText;t&&m["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})},onUnLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState());var r=k(e,"ratingId"),o="",n={};r?(o="/rating/"+r,n={format:"json"}):(o="/rating/",n={format:"json",resource_uri:k(e,"resourceUri")}),(0,g.httpDelete)(o,{data:n}).done(function(){S(e),t.trigger(v())}).fail(function(e){var t="Unable to unlike.";404==e.status?t+=" You may have already unliked.":e.responseText&&(t+=e.responseText),t+=" Please refresh the page and try again.",m["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})}});r["default"]=T},{"../modules/ajax/ajax_helper":5,"../modules/gr_error_reporting":21,"../react_actions/like_actions":39,"./shared/newsfeed_updates_mixin":228,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],224:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/modal_actions"),u=o(l),d=new i["default"]({}),c=function(){return d.get()},f=s["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},onOpenModal:function(e){d.get().set("currentActiveModal",e),this.notifyListeners()},onCloseModal:function(){d.get().set("currentActiveModal",null),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/modal_actions":40,"freezer-js":"freezer-js",reflux:"reflux"}],225:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/notifications_actions"),u=o(l),d=new i["default"]({}),c=function(){return d.get()},f=s["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){this.initializeWith(e)},onLoadNotifications:function(e){d.get().set("notifications",e),d.get().set("unreadCount",0),d.get().set("unreadCountMore",!1),this.notifyListeners()},onLoadError:function(){d.get().set("errorOccurred",!0),this.notifyListeners()},onRequestNotifications:function(){d.get().hasRequestedBefore||$j.ajax({url:"/notifications/",type:"GET",success:function(e){u["default"].loadNotifications(e)},error:function(){u["default"].loadError()}}),d.get().set("hasRequestedBefore",!0)},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/notifications_actions":42,"freezer-js":"freezer-js",reflux:"reflux"}],226:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../../react_actions/reading_notes/annotated_books_actions"),c=o(d),f=new u["default"]({annotatedBooksCollection:[],nextToken:null,showSpinner:!0,showError:!1}),p=function(){return f.get()},h=i["default"].createStore({listenables:[c["default"]],getInitialState:p,getState:p,updateWith:function(e,t){var r=s["default"].union(f.get().annotatedBooksCollection,e);r=s["default"].uniq(r,function(e){return e.asin}),p().set({annotatedBooksCollection:r,nextToken:t,showError:!1}),this.notifyListeners()},showSpinner:function(e){p().set("showSpinner",e),this.notifyListeners()},showError:function(){p().set("showError",!0),this.notifyListeners()},notifyListeners:function(){this.trigger(p())},reset:function(){p().reset({})},onLoadAnnotatedBooks:function(e){var t=this,r="/notes/"+e+"/load_more";return this.showSpinner(!0),$j.get(r,{start_token:f.get().nextToken||0}).done(function(e){t.updateWith(e.annotated_books_collection,e.next_token)}).fail(function(e){t.showError()}).always(function(){t.showSpinner(!1)})}});r["default"]=h},{"../../react_actions/reading_notes/annotated_books_actions":43,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],227:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.WARNING_SHARING_TEXT_LENGTH=r.MAXIMUM_SHARING_TEXT_LENGTH=void 0;var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/share_dialog_actions"),u=o(l),d=e("../modules/ajax/ajax_helper"),c=e("../modules/string_helper"),f=e("lodash"),p=new i["default"]({}),h=function(){return p.get()},m=r.MAXIMUM_SHARING_TEXT_LENGTH=420;r.WARNING_SHARING_TEXT_LENGTH=100;r["default"]=s["default"].createStore({listenables:[u["default"]],getState:h,getInitialState:function(){return h()},initializeWith:function(e){h().reset(e)},onUpdateSharingTextInputValue:function(e){var t=(0,c.astralLength)(e)>m,r=t;h().set({sharingTextInputValue:e,shareModalButtonDisabled:r,textTooLong:t}),this.trigger(h())},onSubmitShare:function(e,t){var r=this;h().set({shareModalButtonDisabled:!0,error:!1}),this.trigger(h());var o={resource_id:e.resourceId,resource_type:e.resourceTypeFriendlyText,sharing_text:t};e.sharerUserId&&(o.sharer_user_id=e.sharerUserId),(0,d.httpPost)("/sharings",{format:"json",data:{sharing:o}}).done(function(e){h().set({shared:!0,sharingTextInputValue:"",sharingUrl:e.sharingUrl,sharingDisplayName:e.sharingDisplayName})}).fail(function(e){var t=(0,f.get)(e,["responseJSON","message"]);h().set({error:!0,errorText:t})}).always(function(){h().set({shareModalButtonDisabled:!1}),r.trigger(h())})},onOpenShareModal:function(e){h().set({shared:!1,error:!1}),this.trigger(h());var t="OpenSharingModal_"+e;(0,d.httpPost)("/track/track_click",{data:{feature:t}})},reset:function(){h().reset({})}})},{"../modules/ajax/ajax_helper":5,"../modules/string_helper":26,"../react_actions/share_dialog_actions":45,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],228:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.NEWSFEED_DEPENDENT_STORE_KEYS=void 0;var n=e("../../react_actions/newsfeed_actions"),s=o(n),a=e("lodash"),i=function(e){var t={init:function(){(0,a.includes)((0,a.values)(l),e)&&this.listenTo(s["default"].newsfeedItemsLoaded,this.onNewsfeedItemsLoaded)},onNewsfeedItemsLoaded:function(t){e&&t[e]&&(this.updateWith(t[e]),this.trigger(this.getState()))}};return t};r["default"]=i;var l=r.NEWSFEED_DEPENDENT_STORE_KEYS={COMMENTS:"comments",LIKES:"likes",SHELVINGS:"shelvings",AUTHOR_FOLLOWS:"authorFollows",NATIVE_ADS:"ads"}},{"../../react_actions/newsfeed_actions":41,lodash:"lodash"}],229:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/shelvings_actions"),c=o(d),f=e("../react_actions/reading_session_actions"),p=o(f),h=e("../react_actions/user_shelves_actions"),m=o(h),g=e("../react_stores/facebook_store"),_=o(g),v=e("./shared/newsfeed_updates_mixin"),y=o(v),b=e("../modules/default_shelves"),k=e("../modules/book_origins"),S=new u["default"]({}),T={DEFAULT:"defaultShelves",CUSTOM_EXCLUSIVE:"customExclusiveShelves",NONEXCLUSIVE:"nonExclusiveShelves"},P=function(e){return e===b.DEFAULT_SHELVES.READ.name||e===b.DEFAULT_SHELVES.CURRENTLY_READING.name||e===b.DEFAULT_SHELVES.WANT_TO_READ.name?T.DEFAULT:T.CUSTOM_EXCLUSIVE},N=function(){return S.get()},w=function(e){return s["default"].has(N(),e)||N().set(e,{exclusiveShelfName:null,nonExclusiveShelfNames:null,exclusiveShelfDisplayName:null,isShelvingInProgress:!1}),N()[e]},R=function(e,t){w(e).set(t),s["default"].each(N(),function(r,o){r.book&&r.book.bookId===e&&w(o).set(t)})},x=function(e,t,r){R(e,{exclusiveShelfName:t.name,exclusiveShelfDisplayName:t.displayName}),"undefined"!=typeof r&&R(e,{book:r.book,updatedAt:Date.parse(r.updatedAt)}),t.name===b.DEFAULT_SHELVES.CURRENTLY_READING.name&&p["default"].refreshReadingSessions()},A=function(e,t,r){R(e,{exclusiveShelfName:null,exclusiveShelfDisplayName:null,rating:0,nonExclusiveShelfNames:null}),r&&m["default"].removeNonExclusiveShelf(t.name)},C=function(e){R(e,{rating:0})},M=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];I(e,r),R(e,{rating:t})},E=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=w(e),n=s["default"].clone(o.nonExclusiveShelfNames)||[];n.push(t.name),R(e,{nonExclusiveShelfNames:n}),I(e,r),m["default"].addNonExclusiveShelf(t.name)},L=function(e,t,r){var o=w(e),n=s["default"].clone(o.nonExclusiveShelfNames);n=s["default"].without(n,t.name),r&&m["default"].removeNonExclusiveShelf(t.name),R(e,{nonExclusiveShelfNames:n})},I=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=w(e);null===r.exclusiveShelfName&&x(e,b.DEFAULT_SHELVES.READ,t)},U=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=e;return t&&(o=s["default"].merge({},e,{book_origin:t})),r&&(o=s["default"].merge({},o,{progress_update_text:r})),o=s["default"].merge({},o,{v:2}),$j.post("/shelf/add_to_shelf.json",o)};r["default"]=i["default"].createStore({listenables:c["default"],mixins:[(0,y["default"])(v.NEWSFEED_DEPENDENT_STORE_KEYS.SHELVINGS)],getState:N,getInitialState:function(e){return s["default"].isUndefined(e)?N():w(e)},initializeWith:function(e){S.get().reset(e),this.notifyListeners()},reset:function(){S.get().reset({})},notifyListeners:function(){this.trigger(N())},updateWith:function(e){var t=s["default"].transform(e,function(e,t,r){return e[r].isShelvingInProgress=!1,e[r].updatedAt=Date.parse(t.updatedAt),e},e);this.getState().set(t),this.notifyListeners()},onShelveBook:function(e,t){var r=this,o=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n=arguments.length<=3||void 0===arguments[3]?null:arguments[3],s=w(e).exclusiveShelfName;R(e,{isShelvingInProgress:!0});var a={book_id:e,name:t.name};t.name===b.DEFAULT_SHELVES.READ.name&&(o===k.BOOK_ORIGINS.UPDATE_READING_PROGRESS?a.explicit=_["default"].getCogStatus():a.explicit=_["default"].getCogRead()),this.notifyListeners(),U(a,o,n).done(function(r){if(x(e,t,r),r=r||{},r.shelves={},r.shelves[P(t.name)]=[t.name],c["default"].bookShelved(r),s){var n={};n[P(s)]=[s],c["default"].bookUnshelved({shelves:n})}o===k.BOOK_ORIGINS.CURRENTLY_READING_WIDGET&&p["default"].shelveBookSuccess()}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again.")}).always(function(){R(e,{isShelvingInProgress:!1}),r.notifyListeners()})},onUnshelveBook:function(e){var t=this;R(e,{isShelvingInProgress:!0}),this.notifyListeners(),$j.post("/review/destroy",{id:e}).done(function(){var t={};t[P(w(e).exclusiveShelfName)]=[w(e).exclusiveShelfName],t[T.NONEXCLUSIVE]=w(e).nonExclusiveShelfNames||[],c["default"].bookUnshelved({shelves:t}),A(e)}).fail(function(){window.alert("There was an error removing the book from your shelves, please try again.")}).always(function(){R(e,{isShelvingInProgress:!1}),t.notifyListeners()})},onToggleNonExclusiveShelving:function(e,t,r,o){var n=this,a=w(e).exclusiveShelfName,i=w(e).nonExclusiveShelfNames,l=!s["default"].includes(i,t.name),u=N()[e]&&null!==w(e).exclusiveShelfName,d={
book:{bookId:e,title:o}};l?(I(e,d),E(e,t,d)):L(e,t,!1),this.notifyListeners();var f={book_id:e,name:t.name,a:l?"":"remove",explicit:_["default"].getCogRead()};U(f).done(function(){var e={};l?(e[T.DEFAULT]=a?[]:[b.DEFAULT_SHELVES.READ.name],e[T.NONEXCLUSIVE]=[t.name],c["default"].bookShelved({shelves:e})):(e[T.NONEXCLUSIVE]=[t.name],c["default"].bookUnshelved({shelves:e}))}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again."),u?l?L(e,t,r):E(e,t,d):A(e,t,r),n.notifyListeners()})},onRateBook:function(e,t,r){var o=this,n=0,s=!1,a={book:{bookId:e,title:r}};N()[e]&&(n=w(e).rating,s=null!==w(e).exclusiveShelfName,0===n&&c["default"].rateBook.newBook()),M(e,t,a),this.notifyListeners(),$j.post("/review/rate",{format:"json",stars_click:!0,id:e,rating:t}).fail(function(){window.alert("There was an error saving your rating, please try again."),n>0?M(e,n,a):s?(C(e),c["default"].rateBook.failed()):(A(e,null,!1),c["default"].rateBook.failed()),o.notifyListeners()})},onAddShelvings:function(e){this.updateWith(e),this.notifyListeners()}})},{"../modules/book_origins":7,"../modules/default_shelves":18,"../react_actions/reading_session_actions":44,"../react_actions/shelvings_actions":46,"../react_actions/user_shelves_actions":51,"../react_stores/facebook_store":217,"./shared/newsfeed_updates_mixin":228,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],230:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/tab_actions"),u=o(l),d=new i["default"]({}),c=function(){return d.get()},f=s["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){c().set(e)},onSelectTab:function(e,t){d.get().set(t,e),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/tab_actions":47,"freezer-js":"freezer-js",reflux:"reflux"}],231:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DEAL_TYPES=r.DEAL_PREF_TYPES=r.PREF_TYPES=void 0;var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("lodash"),u=o(l),d=e("../../../react_actions/user/preferences/user_preferences_actions"),c=o(d),f=r.PREF_TYPES={DEALS:"deals"},p=r.DEAL_PREF_TYPES={DEAL_TYPES:"deal_types",EVENTS:"subscribed_to_events_emails",GENRE_URIS:"deal_genre_uris",RETAILERS:"retailers",EXCLUDE_SHELVES:"exclude_shelves"},h="aut",m="hor",g=r.DEAL_TYPES={AUTHOR:h+m,GENRE:"genre",WTR:"wtr"},_={preferences:{deals:{}},status:{deals:{waiting:[],disabledPreferences:[]}}},v=new i["default"](_),y=function(){return v.get()};r["default"]=s["default"].createStore({listenables:[c["default"]],updateDealsDisabledPreferences:function(){var e=y().preferences.deals,t=u["default"].merge({},y().status),r=u["default"].merge({},t.deals);r.disabledPreferences=[],u["default"].isEmpty(e.deal_types)?(r.disabledPreferences.push(p.RETAILERS),r.disabledPreferences.push(p.GENRE_URIS),r.disabledPreferences.push(p.EXCLUDE_SHELVES)):u["default"].includes(e.deal_types,g.GENRE)||r.disabledPreferences.push(p.GENRE_URIS),t.deals=r,y().set({status:t})},initialize:function(e){y().set({preferences:e}),this.updateDealsDisabledPreferences()},updateDealsWaitingStatus:function(e,t){var r=u["default"].merge({},y().status),o=u["default"].merge({},r.deals);t?u["default"].contains(o.waiting,e)||o.waiting.push(e):u["default"].pull(o.waiting,e),r.deals=o,y().set({status:r})},updateDealsPreferences:function(e){var t=u["default"].merge({},y().preferences);t[f.DEALS]=e,this.getState().set({preferences:t}),this.updateDealsDisabledPreferences()},handleUpdateDealsPreferencesFailure:function(){var e=this;$j.get("/user/edit",{format:"json",contentType:"application/json"}).done(function(t){e.updateDealsPreferences(t)}),window.alert("There was an error updating your preferences. Please try again later.")},postDealsPreferences:function(e,t){var r=this;this.updateDealsWaitingStatus(t,!0),this.trigger(this.getState()),$j.post("/user/update?tab=Deals&format=json",{format:"json",contentType:"application/json",d_type_preferences:e.deal_types,d_retailer_preferences:e.retailers,d_genre_uri_preferences:e.deal_genre_uris,d_exclude_shelves_preferences:e.exclude_shelves,d_subscribed_to_events_emails:e.subscribed_to_events_emails}).done(function(e){r.updateDealsPreferences(e,t)}).fail(function(){r.handleUpdateDealsPreferencesFailure()}).always(function(){r.updateDealsWaitingStatus(t,!1),r.trigger(r.getState())})},onUpdatePreferences:function(e,t,r){u["default"].isEmpty(e)||u["default"].isEmpty(t)||t===f.DEALS&&(this.updateDealsPreferences(e),this.postDealsPreferences(e,r))},getInitialState:y,getState:y,reset:function(){v.get().reset(_)}})},{"../../../react_actions/user/preferences/user_preferences_actions":48,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],232:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),s=o(n),a=e("freezer-js"),i=o(a),l=e("../react_actions/user_agent_capabilities_actions"),u=o(l),d={touch:!1},c=new i["default"](d);r["default"]=s["default"].createStore({listenables:[u["default"]],initializeWith:function(e){c.get().reset(e)},reset:function(){c.get().reset(d)},getInitialState:function(){return c.get()},onUserAgentGainsTouch:function(){c.get().set("touch",!0),this.trigger(c.get())},onUserAgentLosesTouch:function(){c.get().set("touch",!1),this.trigger(c.get())}})},{"../react_actions/user_agent_capabilities_actions":49,"freezer-js":"freezer-js",reflux:"reflux"}],233:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=e("reflux"),a=o(s),i=e("freezer-js"),l=o(i),u=e("../modules/ajax/ajax_helper"),d=e("../react_actions/user_not_interested_actions"),c=o(d),f={"default":{isFlashMessage:!1,isClosed:!1}},p=new l["default"](f),h=function(){return p.get()},m=function(e){h().reset((0,n.merge)({},f,e))};r["default"]=a["default"].createStore({listenables:[c["default"]],getState:h,getInitialState:h,reset:function(){m({})},setDataForKey:function(e,t){var r={};r[e]=t,h().set((0,n.merge)({},h(),r))},onAddBookIDToState:function(e){this.setDataForKey(e,h()["default"]),this.trigger(h())},onIsFlashMessageForBook:function(e){h()[e].isFlashMessage},onCloseFlashMessage:function(e){this.setDataForKey(e,{isClosed:!0}),this.trigger(h())},userNotInterestedHttpPost:function(e){return(0,u.httpPost)("/user_not_interested_works",{data:{user_not_interested_work:{book_id:e}}})},onUserNotInterested:function(e){var t=this;this.userNotInterestedHttpPost(e).done(function(){t.setDataForKey(e,{isFlashMessage:!0}),t.trigger(h())}).fail(function(){window.alert("There was an error marking this book as not interested, please try again.")})},undoUserNotInterestedHttpDelete:function(e){return(0,u.httpDelete)("/user_not_interested_works/undo",{data:{user_not_interested_work:{book_id:e}}})},onUndoUserNotInterested:function(e){var t=this;this.undoUserNotInterestedHttpDelete(e).done(function(){t.setDataForKey(e,{isFlashMessage:!1}),t.trigger(h())}).fail(function(){window.alert("There was an error undoing this action, please try again.")})}})},{"../modules/ajax/ajax_helper":5,"../react_actions/user_not_interested_actions":50,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],234:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/shelvings_actions"),c=o(d),f=e("../react_actions/user_shelves_actions"),p=o(f),h=e("../react_actions/want_to_read_menu_actions"),m=o(h),g=e("../modules/default_shelves"),_={defaultShelves:[],customExclusiveShelves:[],nonExclusiveShelves:[]},v=new u["default"](_),y=function(){return v.get()},b=function(e,t,r){var o=s["default"].find(y()[t],{name:e});o&&o.set("bookCount",o.bookCount+r)};r["default"]=i["default"].createStore({listenables:[p["default"],{bookShelved:c["default"].bookShelved,bookUnshelved:c["default"].bookUnshelved}],getInitialState:v.get,getState:y,defaultShelves:function(){var e=y().defaultShelves;return 0===e.length?g.DEFAULT_SHELVES:{READ:s["default"].find(e,"name","read"),CURRENTLY_READING:s["default"].find(e,"name","currently-reading"),WANT_TO_READ:s["default"].find(e,"name","to-read")}},initializeWith:function(e){v.get().reset(e)},reset:function(){v.get().reset(_)},updateWith:function(e){v.get().reset(e)},onAddNonExclusiveShelf:function(e){var t=s["default"].clone(v.get().nonExclusiveShelves)||[],r=s["default"].map(t,function(e){return e.name});s["default"].includes(r,e)||(t.unshift({name:e,url:"",displayName:e,bookCount:0}),v.get().set("nonExclusiveShelves",t),m["default"].updateShelves(),this.trigger(y()))},onRemoveNonExclusiveShelf:function(e){var t=s["default"].clone(v.get().nonExclusiveShelves)||[],r=s["default"].map(t,function(e){return e.name});s["default"].includes(r,e)&&(s["default"].remove(t,function(t){return t.name===e}),v.get().set("nonExclusiveShelves",t),m["default"].updateShelves(),this.trigger(y()))},onBookShelved:function(e){var t=e.shelves||{};s["default"].each(t,function(e,t){s["default"].each(e,function(e){b(e,t,1)})}),this.trigger(y())},onBookUnshelved:function(e){var t=e.shelves||{};s["default"].each(t,function(e,t){s["default"].each(e,function(e){b(e,t,-1)})}),this.trigger(y())}})},{"../modules/default_shelves":18,"../react_actions/shelvings_actions":46,"../react_actions/user_shelves_actions":51,"../react_actions/want_to_read_menu_actions":52,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],235:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),s=o(n),a=e("reflux"),i=o(a),l=e("freezer-js"),u=o(l),d=e("../react_actions/want_to_read_menu_actions"),c=o(d),f=e("./user_shelves_store"),p=o(f),h={},m=new u["default"](h),g=function(){return m.get()},_=function(e,t){var r=[],o=t.defaultShelves.concat(t.customExclusiveShelves||[]);return r=s["default"].isEmpty(e)?o:s["default"].filter(o,function(t){return t.name.match(new RegExp(e,"i"))})},v=function(e,t){var r=[];return r=s["default"].isEmpty(e)?t.nonExclusiveShelves:s["default"].filter(t.nonExclusiveShelves,function(t){return t.name.match(new RegExp(e,"i"))})},y=function(e){var t=p["default"].getState(),r=_(e,t),o=v(e,t);return{displayableExclusiveShelves:r,displayableNonExclusiveShelves:o,shelfNameFilter:e}},b=function(e,t){g().set(t,y(e))},k=function(e){var t=g()[e].shelfNameFilter;g().set(e,y(t))},S=function(e){return s["default"].has(g(),e)||b("",e),g()[e]},T=function(e){g().reset(s["default"].merge({},h,e))};r["default"]=i["default"].createStore({listenables:[c["default"]],getInitialState:function(e){return s["default"].isUndefined(e)?g():S(e)},getState:g,initializeWith:function(e){T(e)},reset:function(){T(h)},updateWith:function(e){s["default"].each(s["default"].keys(e),function(t){g().set(t,e[t])}),this.notifyListeners()},notifyListeners:function(){this.trigger(g())},onUpdateShelfNameFilter:function(e,t){b(e,t),S(t).set("showAddShelfTextbox",!1),this.notifyListeners()},onOpenAddShelfTextbox:function(e){S(e).set("showAddShelfTextbox",!0),this.notifyListeners()},onUpdateShelves:function(){s["default"].each(s["default"].keys(g()),function(e){k(e)}),this.notifyListeners()}})},{"../react_actions/want_to_read_menu_actions":52,"./user_shelves_store":234,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],236:[function(e,t,r){/**
 * Copyright 2013-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 */
"use strict";var o=function(e,t,r,o,n,s,a,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,o,n,s,a,i],d=0;l=new Error(t.replace(/%s/g,function(){return u[d++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};t.exports=o},{}],237:[function(e,t,r){"use strict";function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}var n=e("strict-uri-encode"),s=e("object-assign");r.extract=function(e){return e.split("?")[1]||""},r.parse=function(e){var t=Object.create(null);return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var r=e.replace(/\+/g," ").split("="),o=r.shift(),n=r.length>0?r.join("="):void 0;o=decodeURIComponent(o),n=void 0===n?null:decodeURIComponent(n),void 0===t[o]?t[o]=n:Array.isArray(t[o])?t[o].push(n):t[o]=[t[o],n]}),t):t},r.stringify=function(e,t){var r={encode:!0,strict:!0};return t=s(r,t),e?Object.keys(e).sort().map(function(r){var n=e[r];if(void 0===n)return"";if(null===n)return o(r,t);if(Array.isArray(n)){var s=[];return n.slice().forEach(function(e){void 0!==e&&(null===e?s.push(o(r,t)):s.push(o(r,t)+"="+o(e,t)))}),s.join("&")}return o(r,t)+"="+o(n,t)}).filter(function(e){return e.length>0}).join("&"):""}},{"object-assign":"object-assign","strict-uri-encode":278}],238:[function(e,t,r){"use strict";function o(e,t,r){function o(){return a=!0,i?void(u=[].concat(Array.prototype.slice.call(arguments))):void r.apply(this,arguments)}function n(){if(!a&&(l=!0,!i)){for(i=!0;!a&&e>s&&l;)l=!1,t.call(this,s++,n,o);return i=!1,a?void r.apply(this,u):void(s>=e&&l&&(a=!0,r()))}}var s=0,a=!1,i=!1,l=!1,u=void 0;n()}function n(e,t,r){function o(e,t,o){a||(t?(a=!0,r(t)):(s[e]=o,a=++i===n,a&&r(null,s)))}var n=e.length,s=[];if(0===n)return r(null,s);var a=!1,i=0;e.forEach(function(e,r){t(e,r,function(e,t){o(r,e,t)})})}r.__esModule=!0,r.loopAsync=o,r.mapAsync=n},{}],239:[function(e,t,r){"use strict";function o(e){return"@@contextSubscriber/"+e}function n(e){var t,r,n=o(e),s=n+"/listeners",a=n+"/eventIndex",l=n+"/subscribe";return r={childContextTypes:(t={},t[n]=i.isRequired,t),getChildContext:function(){var e;return e={},e[n]={eventIndex:this[a],subscribe:this[l]},e},componentWillMount:function(){this[s]=[],this[a]=0},componentWillReceiveProps:function(){this[a]++},componentDidUpdate:function(){var e=this;this[s].forEach(function(t){return t(e[a])})}},r[l]=function(e){var t=this;return this[s].push(e),function(){t[s]=t[s].filter(function(t){return t!==e})}},r}function s(e){var t,r,n=o(e),s=n+"/lastRenderedEventIndex",a=n+"/handleContextUpdate",l=n+"/unsubscribe";return r={contextTypes:(t={},t[n]=i,t),getInitialState:function(){var e;return this.context[n]?(e={},e[s]=this.context[n].eventIndex,e):{}},componentDidMount:function(){this.context[n]&&(this[l]=this.context[n].subscribe(this[a]))},componentWillReceiveProps:function(){var e;this.context[n]&&this.setState((e={},e[s]=this.context[n].eventIndex,e))},componentWillUnmount:function(){this[l]&&(this[l](),this[l]=null)}},r[a]=function(e){if(e!==this.state[s]){var t;this.setState((t={},t[s]=e,t))}},r}r.__esModule=!0,r.ContextProvider=n,r.ContextSubscriber=s;var a=e("react"),i=a.PropTypes.shape({subscribe:a.PropTypes.func.isRequired,eventIndex:a.PropTypes.number.isRequired})},{react:"react"}],240:[function(e,t,r){"use strict";function o(e,t,r){return e[t]?new Error("<"+r+'> should not have a "'+t+'" prop'):void 0}r.__esModule=!0,r.routes=r.route=r.components=r.component=r.history=void 0,r.falsy=o;var n=e("react"),s=n.PropTypes.func,a=n.PropTypes.object,i=n.PropTypes.arrayOf,l=n.PropTypes.oneOfType,u=n.PropTypes.element,d=n.PropTypes.shape,c=n.PropTypes.string,f=(r.history=d({listen:s.isRequired,push:s.isRequired,replace:s.isRequired,go:s.isRequired,goBack:s.isRequired,goForward:s.isRequired}),r.component=l([s,c])),p=(r.components=l([f,a]),r.route=l([a,u]));r.routes=l([p,i(p)])},{react:"react"}],241:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function s(e){return 0===e.button}function a(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function i(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function l(e,t){return"function"==typeof e?e(t.location):e}r.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},d=e("react"),c=o(d),f=e("invariant"),p=o(f),h=e("./PropTypes"),m=e("./ContextUtils"),g=c["default"].PropTypes,_=g.bool,v=g.object,y=g.string,b=g.func,k=g.oneOfType,S=c["default"].createClass({displayName:"Link",mixins:[(0,m.ContextSubscriber)("router")],contextTypes:{router:h.routerShape},propTypes:{to:k([y,v,b]),query:v,hash:y,state:v,activeStyle:v,activeClassName:y,onlyActiveOnIndex:_.isRequired,onClick:b,target:y},getDefaultProps:function(){return{onlyActiveOnIndex:!1,style:{}}},handleClick:function(e){if(this.props.onClick&&this.props.onClick(e),!e.defaultPrevented){var t=this.context.router;t?void 0:(0,p["default"])(!1),!a(e)&&s(e)&&(this.props.target||(e.preventDefault(),t.push(l(this.props.to,t))))}},render:function(){var e=this.props,t=e.to,r=e.activeClassName,o=e.activeStyle,s=e.onlyActiveOnIndex,a=n(e,["to","activeClassName","activeStyle","onlyActiveOnIndex"]),d=this.context.router;if(d){if(null==t)return c["default"].createElement("a",a);var f=l(t,d);a.href=d.createHref(f),(r||null!=o&&!i(o))&&d.isActive(f,s)&&(r&&(a.className?a.className+=" "+r:a.className=r),o&&(a.style=u({},a.style,o)))}return c["default"].createElement("a",u({},a,{onClick:this.handleClick}))}});r["default"]=S,t.exports=r["default"]},{"./ContextUtils":239,"./PropTypes":244,invariant:236,react:"react"}],242:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){for(var t="",r=[],o=[],s=void 0,a=0,i=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;s=i.exec(e);)s.index!==a&&(o.push(e.slice(a,s.index)),t+=n(e.slice(a,s.index))),s[1]?(t+="([^/]+)",r.push(s[1])):"**"===s[0]?(t+="(.*)",r.push("splat")):"*"===s[0]?(t+="(.*?)",r.push("splat")):"("===s[0]?t+="(?:":")"===s[0]&&(t+=")?"),o.push(s[0]),a=i.lastIndex;return a!==e.length&&(o.push(e.slice(a,e.length)),t+=n(e.slice(a,e.length))),{pattern:e,regexpSource:t,paramNames:r,tokens:o}}function a(e){return p[e]||(p[e]=s(e)),p[e]}function i(e,t){"/"!==e.charAt(0)&&(e="/"+e);var r=a(e),o=r.regexpSource,n=r.paramNames,s=r.tokens;"/"!==e.charAt(e.length-1)&&(o+="/?"),"*"===s[s.length-1]&&(o+="$");var i=t.match(new RegExp("^"+o,"i"));if(null==i)return null;var l=i[0],u=t.substr(l.length);if(u){if("/"!==l.charAt(l.length-1))return null;u="/"+u}return{remainingPathname:u,paramNames:n,paramValues:i.slice(1).map(function(e){return e&&decodeURIComponent(e)})}}function l(e){return a(e).paramNames}function u(e,t){var r=i(e,t);if(!r)return null;var o=r.paramNames,n=r.paramValues,s={};return o.forEach(function(e,t){s[e]=n[t]}),s}function d(e,t){t=t||{};for(var r=a(e),o=r.tokens,n=0,s="",i=0,l=[],u=void 0,d=void 0,c=void 0,p=0,h=o.length;h>p;++p)if(u=o[p],"*"===u||"**"===u)c=Array.isArray(t.splat)?t.splat[i++]:t.splat,null!=c||n>0?void 0:(0,f["default"])(!1),null!=c&&(s+=encodeURI(c));else if("("===u)l[n]="",n+=1;else if(")"===u){var m=l.pop();n-=1,n?l[n-1]+=m:s+=m}else if(":"===u.charAt(0))if(d=u.substring(1),c=t[d],null!=c||n>0?void 0:(0,f["default"])(!1),null==c){if(n){l[n-1]="";for(var g=o.indexOf(u),_=o.slice(g,o.length),v=-1,y=0;y<_.length;y++)if(")"==_[y]){v=y;break}v>0?void 0:(0,f["default"])(!1),p=g+v-1}}else n?l[n-1]+=encodeURIComponent(c):s+=encodeURIComponent(c);else n?l[n-1]+=u:s+=u;return 0>=n?void 0:(0,f["default"])(!1),s.replace(/\/+/g,"/")}r.__esModule=!0,r.compilePattern=a,r.matchPattern=i,r.getParamNames=l,r.getParams=u,r.formatPattern=d;var c=e("invariant"),f=o(c),p=Object.create(null)},{invariant:236}],243:[function(e,t,r){"use strict";function o(e){return e&&"function"==typeof e.then}r.__esModule=!0,r.isPromise=o},{}],244:[function(e,t,r){"use strict";r.__esModule=!0,r.locationShape=r.routerShape=void 0;var o=e("react"),n=o.PropTypes.func,s=o.PropTypes.object,a=o.PropTypes.shape,i=o.PropTypes.string;r.routerShape=a({push:n.isRequired,replace:n.isRequired,go:n.isRequired,goBack:n.isRequired,goForward:n.isRequired,setRouteLeaveHook:n.isRequired,isActive:n.isRequired}),r.locationShape=a({pathname:i.isRequired,search:i.isRequired,state:s,action:i.isRequired,key:i})},{react:"react"}],245:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("react"),s=o(n),a=e("invariant"),i=o(a),l=e("./RouteUtils"),u=e("./InternalPropTypes"),d=s["default"].PropTypes,c=d.string,f=d.func,p=s["default"].createClass({displayName:"Route",statics:{createRouteFromReactElement:l.createRouteFromReactElement},propTypes:{path:c,component:u.component,components:u.components,getComponent:f,getComponents:f},render:function(){(0,i["default"])(!1)}});r["default"]=p,t.exports=r["default"]},{"./InternalPropTypes":240,"./RouteUtils":246,invariant:236,react:"react"}],246:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return null==e||f["default"].isValidElement(e)}function s(e){return n(e)||Array.isArray(e)&&e.every(n)}function a(e,t){return d({},e,t)}function i(e){var t=e.type,r=a(t.defaultProps,e.props);if(r.children){var o=l(r.children,r);o.length&&(r.childRoutes=o),delete r.children}return r}function l(e,t){var r=[];return f["default"].Children.forEach(e,function(e){if(f["default"].isValidElement(e))if(e.type.createRouteFromReactElement){var o=e.type.createRouteFromReactElement(e,t);o&&r.push(o)}else r.push(i(e))}),r}function u(e){return s(e)?e=l(e):e&&!Array.isArray(e)&&(e=[e]),e}r.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};r.isReactChildren=s,r.createRouteFromReactElement=i,r.createRoutesFromReactChildren=l,r.createRoutes=u;var c=e("react"),f=o(c)},{react:"react"}],247:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=e("invariant"),i=o(a),l=e("react"),u=o(l),d=e("./createTransitionManager"),c=o(d),f=e("./InternalPropTypes"),p=e("./RouterContext"),h=o(p),m=e("./RouteUtils"),g=e("./RouterUtils"),_=e("./routerWarning"),v=(o(_),u["default"].PropTypes),y=v.func,b=v.object,k=u["default"].createClass({displayName:"Router",propTypes:{history:b,children:f.routes,routes:f.routes,render:y,createElement:y,onError:y,onUpdate:y,matchContext:b},getDefaultProps:function(){return{render:function(e){return u["default"].createElement(h["default"],e)}}},getInitialState:function(){return{location:null,routes:null,params:null,components:null}},handleError:function(e){if(!this.props.onError)throw e;this.props.onError.call(this,e)},createRouterObject:function(e){var t=this.props.matchContext;if(t)return t.router;var r=this.props.history;return(0,g.createRouterObject)(r,this.transitionManager,e)},createTransitionManager:function(){var e=this.props.matchContext;if(e)return e.transitionManager;var t=this.props.history,r=this.props,o=r.routes,n=r.children;return t.getCurrentLocation?void 0:(0,i["default"])(!1),(0,c["default"])(t,(0,m.createRoutes)(o||n))},componentWillMount:function(){var e=this;this.transitionManager=this.createTransitionManager(),this.router=this.createRouterObject(this.state),this._unlisten=this.transitionManager.listen(function(t,r){t?e.handleError(t):((0,g.assignRouterState)(e.router,r),e.setState(r,e.props.onUpdate))})},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this._unlisten&&this._unlisten()},render:function S(){var e=this.state,t=e.location,r=e.routes,o=e.params,a=e.components,i=this.props,l=i.createElement,S=i.render,u=n(i,["createElement","render"]);return null==t?null:(Object.keys(k.propTypes).forEach(function(e){return delete u[e]}),S(s({},u,{router:this.router,location:t,routes:r,params:o,components:a,createElement:l})))}});r["default"]=k,t.exports=r["default"]},{"./InternalPropTypes":240,"./RouteUtils":246,"./RouterContext":248,"./RouterUtils":249,"./createTransitionManager":255,"./routerWarning":261,invariant:236,react:"react"}],248:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("invariant"),i=o(a),l=e("react"),u=o(l),d=e("./getRouteParams"),c=o(d),f=e("./ContextUtils"),p=e("./RouteUtils"),h=u["default"].PropTypes,m=h.array,g=h.func,_=h.object,v=u["default"].createClass({displayName:"RouterContext",mixins:[(0,f.ContextProvider)("router")],propTypes:{router:_.isRequired,location:_.isRequired,routes:m.isRequired,params:_.isRequired,components:m.isRequired,createElement:g.isRequired},getDefaultProps:function(){return{createElement:u["default"].createElement}},childContextTypes:{router:_.isRequired},getChildContext:function(){return{router:this.props.router}},createElement:function(e,t){return null==e?null:this.props.createElement(e,t)},render:function(){var e=this,t=this.props,r=t.location,o=t.routes,a=t.params,l=t.components,d=t.router,f=null;return l&&(f=l.reduceRight(function(t,i,l){if(null==i)return t;var u=o[l],f=(0,c["default"])(u,a),h={location:r,params:a,route:u,router:d,routeParams:f,routes:o};if((0,p.isReactChildren)(t))h.children=t;else if(t)for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&(h[m]=t[m]);if("object"===("undefined"==typeof i?"undefined":s(i))){var g={};for(var _ in i)Object.prototype.hasOwnProperty.call(i,_)&&(g[_]=e.createElement(i[_],n({key:_},h)));return g}return e.createElement(i,h)},f)),null===f||f===!1||u["default"].isValidElement(f)?void 0:(0,i["default"])(!1),f}});r["default"]=v,t.exports=r["default"]},{"./ContextUtils":239,"./RouteUtils":246,"./getRouteParams":257,invariant:236,react:"react"}],249:[function(e,t,r){"use strict";function o(e,t,r){var o=s({},e,{setRouteLeaveHook:t.listenBeforeLeavingRoute,isActive:t.isActive});return n(o,r)}function n(e,t){var r=t.location,o=t.params,n=t.routes;return e.location=r,e.params=o,e.routes=n,e}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};r.createRouterObject=o,r.assignRouterState=n},{}],250:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r,o){var n=e.length<r,s=function(){for(var r=arguments.length,o=Array(r),s=0;r>s;s++)o[s]=arguments[s];if(e.apply(t,o),n){var a=o[o.length-1];a()}};return o.add(s),s}function s(e){return e.reduce(function(e,t){return t.onEnter&&e.push(n(t.onEnter,t,3,p)),e},[])}function a(e){return e.reduce(function(e,t){return t.onChange&&e.push(n(t.onChange,t,4,h)),e},[])}function i(e,t,r){function o(e){n=e}if(!e)return void r();var n=void 0;(0,c.loopAsync)(e,function(e,r,s){t(e,o,function(e){e||n?s(e,n):r()})},r)}function l(e,t,r){p.clear();var o=s(e);return i(o.length,function(e,r,n){var s=function(){p.has(o[e])&&(n(),p.remove(o[e]))};o[e](t,r,s)},r)}function u(e,t,r,o){h.clear();var n=a(e);return i(n.length,function(e,o,s){var a=function(){h.has(n[e])&&(s(),h.remove(n[e]))};n[e](t,r,o,a)},o)}function d(e,t){for(var r=0,o=e.length;o>r;++r)e[r].onLeave&&e[r].onLeave.call(e[r],t)}r.__esModule=!0,r.runEnterHooks=l,r.runChangeHooks=u,r.runLeaveHooks=d;var c=e("./AsyncUtils"),f=function m(){var e=this;o(this,m),this.hooks=[],this.add=function(t){return e.hooks.push(t)},this.remove=function(t){return e.hooks=e.hooks.filter(function(e){return e!==t})},this.has=function(t){return-1!==e.hooks.indexOf(t)},this.clear=function(){return e.hooks=[]}},p=new f,h=new f},{"./AsyncUtils":238}],251:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("history/lib/createBrowserHistory"),s=o(n),a=e("./createRouterHistory"),i=o(a);r["default"]=(0,i["default"])(s["default"]),t.exports=r["default"]},{"./createRouterHistory":254,"history/lib/createBrowserHistory":272}],252:[function(e,t,r){"use strict";function o(e,t,r){if(!e.path)return!1;var o=(0,s.getParamNames)(e.path);return o.some(function(e){return t.params[e]!==r.params[e]})}function n(e,t){var r=e&&e.routes,n=t.routes,s=void 0,a=void 0,i=void 0;return r?!function(){var l=!1;s=r.filter(function(r){if(l)return!0;var s=-1===n.indexOf(r)||o(r,e,t);return s&&(l=!0),s}),s.reverse(),i=[],a=[],n.forEach(function(e){var t=-1===r.indexOf(e),o=-1!==s.indexOf(e);t||o?i.push(e):a.push(e)})}():(s=[],a=[],i=n),{leaveRoutes:s,changeRoutes:a,enterRoutes:i}}r.__esModule=!0;var s=e("./PatternUtils");r["default"]=n,t.exports=r["default"]},{"./PatternUtils":242}],253:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=(0,d["default"])(e),r=function(){return t},o=(0,a["default"])((0,l["default"])(r))(e);return o}r.__esModule=!0,r["default"]=n;var s=e("history/lib/useQueries"),a=o(s),i=e("history/lib/useBasename"),l=o(i),u=e("history/lib/createMemoryHistory"),d=o(u);t.exports=r["default"]},{"history/lib/createMemoryHistory":274,"history/lib/useBasename":276,"history/lib/useQueries":277}],254:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r["default"]=function(e){var t=void 0;return a&&(t=(0,s["default"])(e)()),t};var n=e("./useRouterHistory"),s=o(n),a=!("undefined"==typeof window||!window.document||!window.document.createElement);t.exports=r["default"]},{"./useRouterHistory":262}],255:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}function s(e,t){function r(t,r){return t=e.createLocation(t),(0,f["default"])(t,r,y.location,y.routes,y.params)}function o(e,r){b&&b.location===e?s(b,r):(0,g["default"])(t,e,function(t,o){t?r(t):o?s(a({},o,{location:e}),r):r()})}function s(e,t){function r(r,n){return r||n?o(r,n):void(0,h["default"])(e,function(r,o){r?t(r):t(null,null,y=a({},e,{components:o}))})}function o(e,r){e?t(e):t(null,r)}var n=(0,u["default"])(y,e),s=n.leaveRoutes,i=n.changeRoutes,l=n.enterRoutes;(0,d.runLeaveHooks)(s,y),s.filter(function(e){return-1===l.indexOf(e)}).forEach(m),(0,d.runChangeHooks)(i,y,e,function(t,n){return t||n?o(t,n):void(0,d.runEnterHooks)(l,e,r)})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;return e.__id__||t&&(e.__id__=k++)}function l(e){return e.map(function(e){return S[i(e)]}).filter(function(e){return e})}function c(e,r){(0,g["default"])(t,e,function(t,o){if(null==o)return void r();b=a({},o,{location:e});for(var n=l((0,u["default"])(y,b).leaveRoutes),s=void 0,i=0,d=n.length;null==s&&d>i;++i)s=n[i](e);r(s)})}function p(){if(y.routes){for(var e=l(y.routes),t=void 0,r=0,o=e.length;"string"!=typeof t&&o>r;++r)t=e[r]();return t}}function m(e){var t=i(e);t&&(delete S[t],n(S)||(T&&(T(),T=null),P&&(P(),P=null)))}function _(t,r){var o=!n(S),s=i(t,!0);return S[s]=r,o&&(T=e.listenBefore(c),e.listenBeforeUnload&&(P=e.listenBeforeUnload(p))),function(){m(t)}}function v(t){function r(r){y.location===r?t(null,y):o(r,function(r,o,n){r?t(r):o?e.replace(o):n&&t(null,n)})}var n=e.listen(r);return y.location?t(null,y):r(e.getCurrentLocation()),n}var y={},b=void 0,k=1,S=Object.create(null),T=void 0,P=void 0;return{isActive:r,match:o,listenBeforeLeavingRoute:_,listen:v}}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};r["default"]=s;var i=e("./routerWarning"),l=(o(i),e("./computeChangedRoutes")),u=o(l),d=e("./TransitionUtils"),c=e("./isActive"),f=o(c),p=e("./getComponents"),h=o(p),m=e("./matchRoutes"),g=o(m);t.exports=r["default"]},{"./TransitionUtils":250,"./computeChangedRoutes":252,"./getComponents":256,"./isActive":258,"./matchRoutes":260,"./routerWarning":261}],256:[function(e,t,r){"use strict";function o(e,t,r){if(t.component||t.components)return void r(null,t.component||t.components);var o=t.getComponent||t.getComponents;if(o){var n=o.call(t,e,r);(0,a.isPromise)(n)&&n.then(function(e){return r(null,e)},r)}else r()}function n(e,t){(0,s.mapAsync)(e.routes,function(t,r,n){o(e,t,n)},t)}r.__esModule=!0;var s=e("./AsyncUtils"),a=e("./PromiseUtils");r["default"]=n,t.exports=r["default"]},{"./AsyncUtils":238,"./PromiseUtils":243}],257:[function(e,t,r){"use strict";function o(e,t){var r={};return e.path?((0,n.getParamNames)(e.path).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}),r):r}r.__esModule=!0;var n=e("./PatternUtils");r["default"]=o,t.exports=r["default"]},{"./PatternUtils":242}],258:[function(e,t,r){"use strict";function o(e,t){if(e==t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every(function(e,r){return o(e,t[r])});if("object"===("undefined"==typeof e?"undefined":l(e))){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r))if(void 0===e[r]){if(void 0!==t[r])return!1}else{if(!Object.prototype.hasOwnProperty.call(t,r))return!1;if(!o(e[r],t[r]))return!1}return!0}return String(e)===String(t)}function n(e,t){return"/"!==t.charAt(0)&&(t="/"+t),"/"!==e.charAt(e.length-1)&&(e+="/"),"/"!==t.charAt(t.length-1)&&(t+="/"),t===e}function s(e,t,r){for(var o=e,n=[],s=[],a=0,i=t.length;i>a;++a){var l=t[a],d=l.path||"";if("/"===d.charAt(0)&&(o=e,n=[],s=[]),null!==o&&d){var c=(0,u.matchPattern)(d,o);if(c?(o=c.remainingPathname,n=[].concat(n,c.paramNames),s=[].concat(s,c.paramValues)):o=null,""===o)return n.every(function(e,t){return String(s[t])===String(r[e])})}}return!1}function a(e,t){return null==t?null==e:null==e?!0:o(e,t)}function i(e,t,r,o,i){var l=e.pathname,u=e.query;return null==r?!1:("/"!==l.charAt(0)&&(l="/"+l),n(l,r.pathname)||!t&&s(l,o,i)?a(u,r.query):!1)}r.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r["default"]=i;var u=e("./PatternUtils");t.exports=r["default"]},{"./PatternUtils":242}],259:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){var r={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r}function s(e,t){var r=e.history,o=e.routes,s=e.location,l=n(e,["history","routes","location"]);r||s?void 0:(0,u["default"])(!1),r=r?r:(0,c["default"])(l);var d=(0,p["default"])(r,(0,h.createRoutes)(o));s=s?r.createLocation(s):r.getCurrentLocation(),d.match(s,function(e,o,n){var s=void 0;if(n){var l=(0,m.createRouterObject)(r,d,n);s=a({},n,{router:l,matchContext:{transitionManager:d,router:l}})}t(e,o&&r.createLocation(o,i.REPLACE),s)})}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},i=e("history/lib/Actions"),l=e("invariant"),u=o(l),d=e("./createMemoryHistory"),c=o(d),f=e("./createTransitionManager"),p=o(f),h=e("./RouteUtils"),m=e("./RouterUtils");r["default"]=s,t.exports=r["default"]},{"./RouteUtils":246,"./RouterUtils":249,"./createMemoryHistory":253,"./createTransitionManager":255,"history/lib/Actions":263,invariant:236}],260:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,o,n){if(e.childRoutes)return[null,e.childRoutes];if(!e.getChildRoutes)return[];var s=!0,a=void 0,l={location:t,params:i(r,o)},u=e.getChildRoutes(l,function(e,t){return t=!e&&(0,g.createRoutes)(t),s?void(a=[e,t]):void n(e,t)});return(0,p.isPromise)(u)&&u.then(function(e){return n(null,(0,g.createRoutes)(e))},n),s=!1,a}function s(e,t,r,o,n){if(e.indexRoute)n(null,e.indexRoute);else if(e.getIndexRoute){var a={location:t,params:i(r,o)},l=e.getIndexRoute(a,function(e,t){n(e,!e&&(0,g.createRoutes)(t)[0])});(0,p.isPromise)(l)&&l.then(function(e){return n(null,(0,g.createRoutes)(e)[0])},n)}else e.childRoutes?!function(){var a=e.childRoutes.filter(function(e){return!e.path});(0,f.loopAsync)(a.length,function(e,n,i){s(a[e],t,r,o,function(t,r){if(t||r){var o=[a[e]].concat(Array.isArray(r)?r:[r]);i(t,o)}else n()})},function(e,t){n(null,t)})}():n()}function a(e,t,r){return t.reduce(function(e,t,o){var n=r&&r[o];return Array.isArray(e[t])?e[t].push(n):t in e?e[t]=[e[t],n]:e[t]=n,e},e)}function i(e,t){return a({},e,t)}function l(e,t,r,o,a,l){var d=e.path||"";if("/"===d.charAt(0)&&(r=t.pathname,o=[],a=[]),null!==r&&d){try{var f=(0,h.matchPattern)(d,r);f?(r=f.remainingPathname,o=[].concat(o,f.paramNames),a=[].concat(a,f.paramValues)):r=null}catch(p){l(p)}if(""===r){var m=function(){var r={routes:[e],params:i(o,a)};return s(e,t,o,a,function(e,t){if(e)l(e);else{if(Array.isArray(t)){var o;(o=r.routes).push.apply(o,t)}else t&&r.routes.push(t);l(null,r)}}),{v:void 0}}();if("object"===("undefined"==typeof m?"undefined":c(m)))return m.v}}if(null!=r||e.childRoutes){var g=function(n,s){n?l(n):s?u(s,t,function(t,r){t?l(t):r?(r.routes.unshift(e),l(null,r)):l()},r,o,a):l()},_=n(e,t,o,a,g);_&&g.apply(void 0,_)}else l()}function u(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];void 0===o&&("/"!==t.pathname.charAt(0)&&(t=d({},t,{pathname:"/"+t.pathname})),o=t.pathname),(0,f.loopAsync)(e.length,function(r,a,i){l(e[r],t,o,n,s,function(e,t){e||t?i(e,t):a()})},r)}r.__esModule=!0;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r["default"]=u;var f=e("./AsyncUtils"),p=e("./PromiseUtils"),h=e("./PatternUtils"),m=e("./routerWarning"),g=(o(m),e("./RouteUtils"));t.exports=r["default"]},{"./AsyncUtils":238,"./PatternUtils":242,"./PromiseUtils":243,"./RouteUtils":246,"./routerWarning":261}],261:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(-1!==t.indexOf("deprecated")){if(l[t])return;l[t]=!0}t="[react-router] "+t;for(var r=arguments.length,o=Array(r>2?r-2:0),n=2;r>n;n++)o[n-2]=arguments[n];i["default"].apply(void 0,[e,t].concat(o))}function s(){l={}}r.__esModule=!0,r["default"]=n,r._resetWarned=s;var a=e("warning"),i=o(a),l={}},{warning:279}],262:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function n(e){return function(t){var r=(0,a["default"])((0,l["default"])(e))(t);return r}}r.__esModule=!0,r["default"]=n;var s=e("history/lib/useQueries"),a=o(s),i=e("history/lib/useBasename"),l=o(i);t.exports=r["default"]},{"history/lib/useBasename":276,"history/lib/useQueries":277}],263:[function(e,t,r){"use strict";r.__esModule=!0;r.PUSH="PUSH",r.REPLACE="REPLACE",r.POP="POP"},{}],264:[function(e,t,r){"use strict";r.__esModule=!0;r.loopAsync=function(e,t,r){var o=0,n=!1,s=!1,a=!1,i=void 0,l=function(){for(var e=arguments.length,t=Array(e),o=0;e>o;o++)t[o]=arguments[o];return n=!0,s?void(i=t):void r.apply(void 0,t)},u=function d(){if(!n&&(a=!0,!s)){for(s=!0;!n&&e>o&&a;)a=!1,t(o++,d,l);return s=!1,n?void r.apply(void 0,i):void(o>=e&&a&&(n=!0,r()))}};u()}},{}],265:[function(e,t,r){"use strict";r.__esModule=!0,r.go=r.replaceLocation=r.pushLocation=r.startListener=r.getUserConfirmation=r.getCurrentLocation=void 0;var o=e("./LocationUtils"),n=e("./DOMUtils"),s=e("./DOMStateStorage"),a=e("./PathUtils"),i=e("./ExecutionEnvironment"),l="popstate",u="hashchange",d=i.canUseDOM&&!(0,n.supportsPopstateOnHashchange)(),c=function(e){var t=e&&e.key;return(0,o.createLocation)({pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:t?(0,s.readState)(t):void 0},void 0,t)},f=r.getCurrentLocation=function(){var e=void 0;try{e=window.history.state||{}}catch(t){e={}}return c(e)},p=(r.getUserConfirmation=function(e,t){return t(window.confirm(e))},r.startListener=function(e){var t=function(t){void 0!==t.state&&e(c(t.state))};(0,n.addEventListener)(window,l,t);var r=function(){return e(f())};return d&&(0,n.addEventListener)(window,u,r),function(){(0,n.removeEventListener)(window,l,t),d&&(0,n.removeEventListener)(window,u,r)}},function(e,t){var r=e.state,o=e.key;void 0!==r&&(0,s.saveState)(o,r),t({key:o},(0,a.createPath)(e))});r.pushLocation=function(e){return p(e,function(e,t){return window.history.pushState(e,null,t)})},r.replaceLocation=function(e){return p(e,function(e,t){return window.history.replaceState(e,null,t)})},r.go=function(e){e&&window.history.go(e)}},{"./DOMStateStorage":266,"./DOMUtils":267,"./ExecutionEnvironment":268,"./LocationUtils":269,"./PathUtils":270}],266:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r.readState=r.saveState=void 0;var n=e("warning"),s=(o(n),{QuotaExceededError:!0,QUOTA_EXCEEDED_ERR:!0}),a={SecurityError:!0},i="@@History/",l=function(e){return i+e};r.saveState=function(e,t){if(window.sessionStorage)try{null==t?window.sessionStorage.removeItem(l(e)):window.sessionStorage.setItem(l(e),JSON.stringify(t))}catch(r){if(a[r.name])return;if(s[r.name]&&0===window.sessionStorage.length)return;throw r}},r.readState=function(e){var t=void 0;try{t=window.sessionStorage.getItem(l(e))}catch(r){if(a[r.name])return}if(t)try{return JSON.parse(t)}catch(r){}}},{warning:279}],267:[function(e,t,r){"use strict";r.__esModule=!0;r.addEventListener=function(e,t,r){return e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)},r.removeEventListener=function(e,t,r){return e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent("on"+t,r)},r.supportsHistory=function(){var e=window.navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1},r.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},r.supportsPopstateOnHashchange=function(){return-1===window.navigator.userAgent.indexOf("Trident")}},{}],268:[function(e,t,r){"use strict";r.__esModule=!0;r.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement)},{}],269:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r.locationsAreEqual=r.statesAreEqual=r.createLocation=r.createQuery=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e;
},a=e("invariant"),i=o(a),l=e("warning"),u=(o(l),e("./PathUtils")),d=e("./Actions"),c=(r.createQuery=function(e){return s(Object.create(null),e)},r.createLocation=function(){var e=arguments.length<=0||void 0===arguments[0]?"/":arguments[0],t=arguments.length<=1||void 0===arguments[1]?d.POP:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o="string"==typeof e?(0,u.parsePath)(e):e,n=o.pathname||"/",s=o.search||"",a=o.hash||"",i=o.state;return{pathname:n,search:s,hash:a,state:i,action:t,key:r}},function(e){return"[object Date]"===Object.prototype.toString.call(e)}),f=r.statesAreEqual=function p(e,t){if(e===t)return!0;var r="undefined"==typeof e?"undefined":n(e),o="undefined"==typeof t?"undefined":n(t);if(r!==o)return!1;if("function"===r?(0,i["default"])(!1):void 0,"object"===r){if(c(e)&&c(t)?(0,i["default"])(!1):void 0,!Array.isArray(e)){var s=Object.keys(e),a=Object.keys(t);return s.length===a.length&&s.every(function(r){return p(e[r],t[r])})}return Array.isArray(t)&&e.length===t.length&&e.every(function(e,r){return p(e,t[r])})}return!1};r.locationsAreEqual=function(e,t){return e.key===t.key&&e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&f(e.state,t.state)}},{"./Actions":263,"./PathUtils":270,invariant:236,warning:279}],270:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0,r.createPath=r.parsePath=r.getQueryStringValueFromPath=r.stripQueryStringValueFromPath=r.addQueryStringValueToPath=void 0;var n=e("warning"),s=(o(n),r.addQueryStringValueToPath=function(e,t,r){var o=a(e),n=o.pathname,s=o.search,l=o.hash;return i({pathname:n,search:s+(-1===s.indexOf("?")?"?":"&")+t+"="+r,hash:l})},r.stripQueryStringValueFromPath=function(e,t){var r=a(e),o=r.pathname,n=r.search,s=r.hash;return i({pathname:o,search:n.replace(new RegExp("([?&])"+t+"=[a-zA-Z0-9]+(&?)"),function(e,t,r){return"?"===t?t:r}),hash:s})},r.getQueryStringValueFromPath=function(e,t){var r=a(e),o=r.search,n=o.match(new RegExp("[?&]"+t+"=([a-zA-Z0-9]+)"));return n&&n[1]},function(e){var t=e.match(/^(https?:)?\/\/[^\/]*/);return null==t?e:e.substring(t[0].length)}),a=r.parsePath=function(e){var t=s(e),r="",o="",n=t.indexOf("#");-1!==n&&(o=t.substring(n),t=t.substring(0,n));var a=t.indexOf("?");return-1!==a&&(r=t.substring(a),t=t.substring(0,a)),""===t&&(t="/"),{pathname:t,search:r,hash:o}},i=r.createPath=function(e){if(null==e||"string"==typeof e)return e;var t=e.basename,r=e.pathname,o=e.search,n=e.hash,s=(t||"")+r;return o&&"?"!==o&&(s+=o),n&&(s+=n),s}},{warning:279}],271:[function(e,t,r){"use strict";r.__esModule=!0,r.replaceLocation=r.pushLocation=r.getCurrentLocation=r.go=r.getUserConfirmation=void 0;var o=e("./BrowserProtocol");Object.defineProperty(r,"getUserConfirmation",{enumerable:!0,get:function(){return o.getUserConfirmation}}),Object.defineProperty(r,"go",{enumerable:!0,get:function(){return o.go}});var n=e("./LocationUtils"),s=e("./PathUtils");r.getCurrentLocation=function(){return(0,n.createLocation)(window.location)},r.pushLocation=function(e){return window.location.href=(0,s.createPath)(e),!1},r.replaceLocation=function(e){return window.location.replace((0,s.createPath)(e)),!1}},{"./BrowserProtocol":265,"./LocationUtils":269,"./PathUtils":270}],272:[function(e,t,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},a=e("invariant"),i=n(a),l=e("./ExecutionEnvironment"),u=e("./BrowserProtocol"),d=o(u),c=e("./RefreshProtocol"),f=o(c),p=e("./DOMUtils"),h=e("./createHistory"),m=n(h),g=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];l.canUseDOM?void 0:(0,i["default"])(!1);var t=e.forceRefresh||!(0,p.supportsHistory)(),r=t?f:d,o=r.getUserConfirmation,n=r.getCurrentLocation,a=r.pushLocation,u=r.replaceLocation,c=r.go,h=(0,m["default"])(s({getUserConfirmation:o},e,{getCurrentLocation:n,pushLocation:a,replaceLocation:u,go:c})),g=0,_=void 0,v=function(e,t){1===++g&&(_=d.startListener(h.transitionTo));var r=t?h.listenBefore(e):h.listen(e);return function(){r(),0===--g&&_()}},y=function(e){return v(e,!0)},b=function(e){return v(e,!1)};return s({},h,{listenBefore:y,listen:b})};r["default"]=g},{"./BrowserProtocol":265,"./DOMUtils":267,"./ExecutionEnvironment":268,"./RefreshProtocol":271,"./createHistory":273,invariant:236}],273:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("./AsyncUtils"),s=e("./PathUtils"),a=e("./runTransitionHook"),i=o(a),l=e("./Actions"),u=e("./LocationUtils"),d=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.getCurrentLocation,r=e.getUserConfirmation,o=e.pushLocation,a=e.replaceLocation,d=e.go,c=e.keyLength,f=void 0,p=void 0,h=[],m=[],g=[],_=function(){return p&&p.action===l.POP?g.indexOf(p.key):f?g.indexOf(f.key):-1},v=function(e){var t=_();f=e,f.action===l.PUSH?g=[].concat(g.slice(0,t+1),[f.key]):f.action===l.REPLACE&&(g[t]=f.key),m.forEach(function(e){return e(f)})},y=function(e){return h.push(e),function(){return h=h.filter(function(t){return t!==e})}},b=function(e){return m.push(e),function(){return m=m.filter(function(t){return t!==e})}},k=function(e,t){(0,n.loopAsync)(h.length,function(t,r,o){(0,i["default"])(h[t],e,function(e){return null!=e?o(e):r()})},function(e){r&&"string"==typeof e?r(e,function(e){return t(e!==!1)}):t(e!==!1)})},S=function(e){f&&(0,u.locationsAreEqual)(f,e)||p&&(0,u.locationsAreEqual)(p,e)||(p=e,k(e,function(t){if(p===e)if(p=null,t){if(e.action===l.PUSH){var r=(0,s.createPath)(f),n=(0,s.createPath)(e);n===r&&(0,u.statesAreEqual)(f.state,e.state)&&(e.action=l.REPLACE)}e.action===l.POP?v(e):e.action===l.PUSH?o(e)!==!1&&v(e):e.action===l.REPLACE&&a(e)!==!1&&v(e)}else if(f&&e.action===l.POP){var i=g.indexOf(f.key),c=g.indexOf(e.key);-1!==i&&-1!==c&&d(i-c)}}))},T=function(e){return S(A(e,l.PUSH))},P=function(e){return S(A(e,l.REPLACE))},N=function(){return d(-1)},w=function(){return d(1)},R=function(){return Math.random().toString(36).substr(2,c||6)},x=function(e){return(0,s.createPath)(e)},A=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?R():arguments[2];return(0,u.createLocation)(e,t,r)};return{getCurrentLocation:t,listenBefore:y,listen:b,transitionTo:S,push:T,replace:P,go:d,goBack:N,goForward:w,createKey:R,createPath:s.createPath,createHref:x,createLocation:A}};r["default"]=d},{"./Actions":263,"./AsyncUtils":264,"./LocationUtils":269,"./PathUtils":270,"./runTransitionHook":275}],274:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=e("warning"),a=(o(s),e("invariant")),i=o(a),l=e("./LocationUtils"),u=e("./PathUtils"),d=e("./createHistory"),c=o(d),f=e("./Actions"),p=function(e){return e.filter(function(e){return e.state}).reduce(function(e,t){return e[t.key]=t.state,e},{})},h=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];Array.isArray(e)?e={entries:e}:"string"==typeof e&&(e={entries:[e]});var t=function(){var e=m[g],t=(0,u.createPath)(e),r=void 0,o=void 0;e.key&&(r=e.key,o=y(r));var s=(0,u.parsePath)(t);return(0,l.createLocation)(n({},s,{state:o}),void 0,r)},r=function(e){var t=g+e;return t>=0&&t<m.length},o=function(e){if(e&&r(e)){g+=e;var o=t();d.transitionTo(n({},o,{action:f.POP}))}},s=function(e){g+=1,g<m.length&&m.splice(g),m.push(e),v(e.key,e.state)},a=function(e){m[g]=e,v(e.key,e.state)},d=(0,c["default"])(n({},e,{getCurrentLocation:t,pushLocation:s,replaceLocation:a,go:o})),h=e,m=h.entries,g=h.current;"string"==typeof m?m=[m]:Array.isArray(m)||(m=["/"]),m=m.map(function(e){return(0,l.createLocation)(e)}),null==g?g=m.length-1:g>=0&&g<m.length?void 0:(0,i["default"])(!1);var _=p(m),v=function(e,t){return _[e]=t},y=function(e){return _[e]};return n({},d,{canGo:r})};r["default"]=h},{"./Actions":263,"./LocationUtils":269,"./PathUtils":270,"./createHistory":273,invariant:236,warning:279}],275:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=e("warning"),s=(o(n),function(e,t,r){var o=e(t,r);e.length<2&&r(o)});r["default"]=s},{warning:279}],276:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=e("./runTransitionHook"),a=o(s),i=e("./PathUtils"),l=function(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=e(t),o=t.basename,s=function(e){return e?(o&&null==e.basename&&(0===e.pathname.indexOf(o)?(e.pathname=e.pathname.substring(o.length),e.basename=o,""===e.pathname&&(e.pathname="/")):e.basename=""),e):e},l=function(e){if(!o)return e;var t="string"==typeof e?(0,i.parsePath)(e):e,r=t.pathname,s="/"===o.slice(-1)?o:o+"/",a="/"===r.charAt(0)?r.slice(1):r,l=s+a;return n({},t,{pathname:l})},u=function(){return s(r.getCurrentLocation())},d=function(e){return r.listenBefore(function(t,r){return(0,a["default"])(e,s(t),r)})},c=function(e){return r.listen(function(t){return e(s(t))})},f=function(e){return r.push(l(e))},p=function(e){return r.replace(l(e))},h=function(e){return r.createPath(l(e))},m=function(e){return r.createHref(l(e))},g=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),n=1;t>n;n++)o[n-1]=arguments[n];return s(r.createLocation.apply(r,[l(e)].concat(o)))};return n({},r,{getCurrentLocation:u,listenBefore:d,listen:c,push:f,replace:p,createPath:h,createHref:m,createLocation:g})}};r["default"]=l},{"./PathUtils":270,"./runTransitionHook":275}],277:[function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},s=e("query-string"),a=e("./runTransitionHook"),i=o(a),l=e("./LocationUtils"),u=e("./PathUtils"),d=function(e){return(0,s.stringify)(e).replace(/%20/g,"+")},c=s.parse,f=function(e){return function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=e(t),o=t.stringifyQuery,s=t.parseQueryString;"function"!=typeof o&&(o=d),"function"!=typeof s&&(s=c);var a=function(e){return e?(null==e.query&&(e.query=s(e.search.substring(1))),e):e},f=function(e,t){if(null==t)return e;var r="string"==typeof e?(0,u.parsePath)(e):e,s=o(t),a=s?"?"+s:"";return n({},r,{search:a})},p=function(){return a(r.getCurrentLocation())},h=function(e){return r.listenBefore(function(t,r){return(0,i["default"])(e,a(t),r)})},m=function(e){return r.listen(function(t){return e(a(t))})},g=function(e){return r.push(f(e,e.query))},_=function(e){return r.replace(f(e,e.query))},v=function(e){return r.createPath(f(e,e.query))},y=function(e){return r.createHref(f(e,e.query))},b=function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),n=1;t>n;n++)o[n-1]=arguments[n];var s=r.createLocation.apply(r,[f(e,e.query)].concat(o));return e.query&&(s.query=(0,l.createQuery)(e.query)),a(s)};return n({},r,{getCurrentLocation:p,listenBefore:h,listen:m,push:g,replace:_,createPath:v,createHref:y,createLocation:b})}};r["default"]=f},{"./LocationUtils":269,"./PathUtils":270,"./runTransitionHook":275,"query-string":237}],278:[function(e,t,r){"use strict";t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},{}],279:[function(e,t,r){/**
 * Copyright 2014-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 */
"use strict";var o=function(){};t.exports=o},{}]},{},[57]);
//# sourceMappingURL=../react_client_side/site_header-89779897dc.js.map